{"version":3,"file":"use-date-range-picker-state-Bb0A2vO_.js","sources":["../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list.tsx","../../../common/foundation/resources/client/ui/library/i18n/formatted-date-time-range.tsx","../../../common/foundation/resources/client/ui/library/utils/hooks/is-tablet-media-query.ts","../../../common/foundation/resources/client/ui/library/utils/date/end-of-day.ts","../../../common/foundation/resources/client/ui/library/utils/date/start-of-day.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-preset-list.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts"],"sourcesContent":["import {message} from '@ui/i18n/message';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\n\nexport interface DateRangeComparePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: (range: DateRangeValue) => DateRangeValue;\n}\n\nexport const DateRangeComparePresets: DateRangeComparePreset[] = [\n  {\n    key: 0,\n    label: message('Preceding period'),\n    getRangeValue: (range: DateRangeValue) => {\n      const startDate = range.start;\n      const endDate = range.end;\n\n      const diffInMilliseconds =\n        endDate.toDate().getTime() - startDate.toDate().getTime();\n      const diffInMinutes = diffInMilliseconds / (1000 * 60);\n      const newStart = startDate.subtract({minutes: diffInMinutes});\n      return {\n        preset: 0,\n        start: newStart,\n        end: startDate,\n      };\n    },\n  },\n  {\n    key: 1,\n    label: message('Same period last year'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({years: 1}),\n        end: range.end.subtract({years: 1}),\n        preset: 1,\n      };\n    },\n  },\n  {\n    key: 2,\n    label: message('Custom'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({weeks: 1}),\n        end: range.end.subtract({weeks: 1}),\n        preset: 2,\n      };\n    },\n  },\n];\n","import {List, ListItem} from '@ui/list/list';\nimport {Trans} from '@ui/i18n/trans';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {DateRangeComparePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\n\ninterface DateRangePresetList {\n  originalRangeValue: DateRangeValue;\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DateRangeComparePresetList({\n  originalRangeValue,\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangeComparePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue(originalRangeValue);\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {DateValue, parseAbsolute} from '@internationalized/date';\nimport {DateFormatPresets} from '@ui/i18n/formatted-date';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {useUserTimezone} from '@ui/i18n/use-user-timezone';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {shallowEqual} from '@ui/utils/shallow-equal';\nimport {Fragment, memo} from 'react';\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n  preset?: keyof typeof DateFormatPresets;\n  timezone?: string;\n}\nexport const FormattedDateTimeRange = memo(\n  ({\n    start,\n    end,\n    options,\n    preset,\n    timezone: propsTimezone,\n  }: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const userTimezone = useUserTimezone();\n    const timezone = propsTimezone || options?.timeZone || userTimezone;\n    const formatter = useDateFormatter(\n      options ||\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\n          preset || dates?.format || 'short'\n        ],\n    );\n\n    if (!start || !end) {\n      return null;\n    }\n\n    let value: string;\n\n    try {\n      value = formatter.formatRange(\n        castToDate(start, timezone),\n        castToDate(end, timezone),\n      );\n    } catch (e) {\n      value = '';\n    }\n\n    return <Fragment>{value}</Fragment>;\n  },\n  shallowEqual,\n);\n\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}\n","import {useMediaQuery} from '@ui/utils/hooks/use-media-query';\n\nexport function useIsTabletMediaQuery() {\n  return useMediaQuery('(max-width: 1024px)');\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1,\n  });\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\n}\n","import {\n  endOfMonth,\n  endOfWeek,\n  endOfYear,\n  startOfMonth,\n  startOfWeek,\n  startOfYear,\n} from '@internationalized/date';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {getCurrentDateTime} from '@ui/i18n/use-current-date-time';\nimport {endOfDay} from '@ui/utils/date/end-of-day';\nimport {startOfDay} from '@ui/utils/date/start-of-day';\nimport {DateRangeValue} from '../date-range-value';\n\nconst Now = startOfDay(getCurrentDateTime());\nconst locale = getBootstrapData()?.i18n?.active || 'en';\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: () => DateRangeValue;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('Today'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now,\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 1,\n    label: message('Yesterday'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 1}),\n      end: endOfDay(Now).subtract({days: 1}),\n    }),\n  },\n  {\n    key: 2,\n    label: message('This week'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: startOfWeek(Now, locale),\n      end: endOfWeek(endOfDay(Now), locale),\n    }),\n  },\n  {\n    key: 3,\n    label: message('Last week'),\n    getRangeValue: () => {\n      const start = startOfWeek(Now, locale).subtract({days: 7});\n      return {\n        preset: 3,\n        start,\n        end: start.add({days: 6}),\n      };\n    },\n  },\n  {\n    key: 4,\n    label: message('Last 7 days'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({days: 7}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 5,\n    label: message('Last 30 days'),\n    getRangeValue: () => ({\n      preset: 5,\n      start: Now.subtract({days: 30}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 6,\n    label: message('Last 3 months'),\n    getRangeValue: () => ({\n      preset: 6,\n      start: Now.subtract({months: 3}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 7,\n    label: message('Last 12 months'),\n    getRangeValue: () => ({\n      preset: 7,\n      start: Now.subtract({months: 12}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 8,\n    label: message('This month'),\n    getRangeValue: () => ({\n      preset: 8,\n      start: startOfMonth(Now),\n      end: endOfMonth(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 9,\n    label: message('This year'),\n    getRangeValue: () => ({\n      preset: 9,\n      start: startOfYear(Now),\n      end: endOfYear(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 10,\n    label: message('Last year'),\n    getRangeValue: () => ({\n      preset: 10,\n      start: startOfYear(Now).subtract({years: 1}),\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\n    }),\n  },\n];\n","import {List, ListItem} from '@ui/list/list';\nimport {DateRangePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {Trans} from '@ui/i18n/trans';\nimport {DateRangeValue} from '@ui/forms/input-field/date/date-range-picker/date-range-value';\n\ninterface DateRangePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue();\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {Button} from '@ui/buttons/button';\nimport {DateRangeComparePresetList} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list';\nimport {Switch} from '@ui/forms/toggle/switch';\nimport {FormattedDateTimeRange} from '@ui/i18n/formatted-date-time-range';\nimport {Trans} from '@ui/i18n/trans';\nimport {ArrowRightAltIcon} from '@ui/icons/material/ArrowRightAlt';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {useIsTabletMediaQuery} from '@ui/utils/hooks/is-tablet-media-query';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useRef, useState} from 'react';\nimport {Calendar} from '../../calendar/calendar';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {DatePresetList} from './date-range-preset-list';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  compareVisibleDefault?: boolean;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  compareState,\n  showInlineDatePickerField = false,\n  compareVisibleDefault = false,\n}: DateRangeDialogProps) {\n  const isTablet = useIsTabletMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n  const [compareVisible, setCompareVisible] = useState(compareVisibleDefault);\n\n  const footer = (\n    <DialogFooter\n      dividerTop\n      startAction={\n        !hasPlaceholder && !isTablet ? (\n          <div className=\"text-xs\">\n            <FormattedDateTimeRange\n              start={state.selectedValue.start.toDate()}\n              end={state.selectedValue.end.toDate()}\n              options={{dateStyle: 'medium'}}\n            />\n          </div>\n        ) : undefined\n      }\n    >\n      <Button\n        variant=\"text\"\n        size=\"xs\"\n        onClick={() => {\n          state.setSelectedValue(initialStateRef.current.selectedValue);\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n          close();\n        }}\n      >\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"xs\"\n        onClick={() => {\n          const value = state.selectedValue;\n          if (compareState && compareVisible) {\n            value.compareStart = compareState.selectedValue.start;\n            value.compareEnd = compareState.selectedValue.end;\n          }\n          close(value);\n        }}\n      >\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && (\n          <div className=\"min-w-192 py-14\">\n            <DatePresetList\n              selectedValue={state.selectedValue}\n              onPresetSelected={preset => {\n                state.setSelectedValue(preset);\n                if (state.closeDialogOnSelection) {\n                  close(preset);\n                }\n              }}\n            />\n            {!!compareState && (\n              <Fragment>\n                <Switch\n                  className=\"mx-20 mb-10 mt-14\"\n                  checked={compareVisible}\n                  onChange={e => setCompareVisible(e.target.checked)}\n                >\n                  <Trans message=\"Compare\" />\n                </Switch>\n                {compareVisible && (\n                  <DateRangeComparePresetList\n                    originalRangeValue={state.selectedValue}\n                    selectedValue={compareState.selectedValue}\n                    onPresetSelected={preset => {\n                      compareState.setSelectedValue(preset);\n                    }}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            compareState={compareState}\n            showInlineDatePickerField={showInlineDatePickerField}\n            compareVisible={compareVisible}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n  compareVisible: boolean;\n}\nfunction Calendars({\n  state,\n  compareState,\n  showInlineDatePickerField,\n  compareVisible,\n}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pb-20 pt-10\"\n    >\n      {showInlineDatePickerField && (\n        <div>\n          <InlineDatePickerField state={state} />\n          {!!compareState && compareVisible && (\n            <InlineDatePickerField\n              state={compareState}\n              label={<Trans message=\"Compare\" />}\n            />\n          )}\n        </div>\n      )}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n  label?: ReactNode;\n}\nfunction InlineDatePickerField({state, label}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\" label={label}>\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  isSameDay,\n  isSameMonth,\n  maxDate,\n  minDate,\n  startOfMonth,\n  toCalendarDate,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useControlledState} from '@react-stately/utils';\nimport {toSafeZoned} from '@ui/i18n/to-safe-zoned';\nimport {useCurrentDateTime} from '@ui/i18n/use-current-date-time';\nimport {endOfDay} from '@ui/utils/date/end-of-day';\nimport {startOfDay} from '@ui/utils/date/start-of-day';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  BaseDatePickerState,\n  DatePickerValueProps,\n} from '../date-picker/use-date-picker-state';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>,\n): DateRangePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value ? completeRange(props.value, now) : undefined,\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\n    value => {\n      setIsPlaceholder({start: false, end: false});\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue.start, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder({start: true, end: true});\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(internalValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n\n  const constrainRange = useCallback(\n    (range: DateRangeValue): DateRangeValue => {\n      let start = range.start;\n      let end = range.end;\n\n      // make sure start date is after min date and before max date/range end\n      if (min) {\n        start = maxDate(start, min)!;\n      }\n      const startMax = max ? minDate(max, end) : end;\n      start = minDate(start, startMax)!;\n\n      // make sure end date is after min date/range start and before max date\n      const endMin = min ? maxDate(min, start) : start;\n      end = maxDate(end, endMin)!;\n\n      if (max) {\n        end = minDate(end, max)!;\n      }\n\n      return {\n        start: toSafeZoned(start, timezone),\n        end: toSafeZoned(end, timezone),\n      };\n    },\n    [min, max, timezone],\n  );\n\n  const setSelectedValue = useCallback(\n    (newRange: DateRangeValue) => {\n      const value = {\n        ...constrainRange(newRange),\n        preset: newRange.preset,\n      };\n      setInternalValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setInternalValue, constrainRange, max],\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder],\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting],\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange],\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange],\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(\n              makeRange({start: anchorDate!, end: date, timezone}),\n            );\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\n          } else {\n            const finalRange = makeRange({\n              start: anchorDate!,\n              end: date,\n              timezone,\n            });\n            // cast to start and end of day after making range, because \"makeRange\"\n            // will flip start and end dates, if they are out of order\n            finalRange.start = startOfDay(finalRange.start);\n            finalRange.end = endOfDay(finalRange.end);\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n      timezone,\n    ],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue,\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n  timezone: string;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toSafeZoned(props.start, props.timezone);\n  const end = toSafeZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined,\n  now: ZonedDateTime,\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: now, end: now.add({months: 1})};\n}\n"],"names":["DateRangeComparePresets","message","range","startDate","diffInMinutes","DateRangeComparePresetList","originalRangeValue","onPresetSelected","selectedValue","jsx","List","preset","ListItem","newValue","Trans","FormattedDateTimeRange","memo","start","end","options","propsTimezone","dates","useSettings","userTimezone","useUserTimezone","timezone","formatter","useDateFormatter","DateFormatPresets","value","castToDate","Fragment","shallowEqual","date","parseAbsolute","useIsTabletMediaQuery","useMediaQuery","endOfDay","startOfDay","Now","getCurrentDateTime","locale","_b","_a","getBootstrapData","DateRangePresets","startOfWeek","endOfWeek","startOfMonth","endOfMonth","startOfYear","endOfYear","DatePresetList","DateRangeDialog","state","compareState","showInlineDatePickerField","compareVisibleDefault","isTablet","close","useDialogContext","initialStateRef","useRef","hasPlaceholder","compareVisible","setCompareVisible","useState","footer","jsxs","DialogFooter","Button","Dialog","DialogBody","Switch","e","AnimatePresence","Calendars","m","InlineDatePickerField","Calendar","label","setSelectedValue","DatePickerField","DateSegmentList","ArrowRightAltIcon","useDateRangePickerState","props","now","useCurrentDateTime","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","useControlledState","completeRange","min","max","granularity","calendarIsOpen","setCalendarIsOpen","closeDialogOnSelection","useBaseDatePickerState","clear","useCallback","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","maxDate","startMax","minDate","endMin","toSafeZoned","newRange","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate"],"mappings":"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"}