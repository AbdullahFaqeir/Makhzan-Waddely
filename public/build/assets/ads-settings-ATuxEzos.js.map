{"version":3,"file":"ads-settings-ATuxEzos.js","sources":["../../../common/foundation/resources/client/ui/library/overlays/dialog/image-zoom-dialog.tsx","../../../common/foundation/resources/client/admin/settings/pages/ads-settings.tsx"],"sourcesContent":["import {useControlledState} from '@react-stately/utils';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {KeyboardArrowLeftIcon} from '@ui/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@ui/icons/material/KeyboardArrowRight';\nimport {Dialog} from './dialog';\nimport {DialogBody} from './dialog-body';\nimport {useDialogContext} from './dialog-context';\n\ninterface Props {\n  image?: string;\n  images?: string[];\n  activeIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  defaultActiveIndex?: number;\n}\nexport function ImageZoomDialog(props: Props) {\n  const {close} = useDialogContext();\n  const {image, images} = props;\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex,\n    props.onActiveIndexChange,\n  );\n  const src = image || images?.[activeIndex];\n\n  return (\n    <Dialog size=\"fullscreenTakeover\" background=\"bg-black/80\">\n      <DialogBody padding=\"p-0\" className=\"h-full w-full\">\n        <IconButton\n          size=\"lg\"\n          color=\"elevated\"\n          className=\"absolute right-0 top-0 z-20 text-white\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <CloseIcon />\n        </IconButton>\n        <div className=\"relative flex h-full w-full items-center justify-center p-40\">\n          {images?.length ? (\n            <IconButton\n              size=\"lg\"\n              color=\"white\"\n              variant=\"flat\"\n              className=\"absolute bottom-0 left-20 top-0 my-auto\"\n              disabled={activeIndex < 1}\n              onClick={() => {\n                setActiveIndex(activeIndex - 1);\n              }}\n            >\n              <KeyboardArrowLeftIcon />\n            </IconButton>\n          ) : null}\n          <img\n            src={src}\n            alt=\"\"\n            className=\"max-h-full w-auto rounded-panel object-contain shadow\"\n          />\n          {images?.length ? (\n            <IconButton\n              size=\"lg\"\n              color=\"white\"\n              variant=\"flat\"\n              className=\"absolute bottom-0 right-20 top-0 my-auto\"\n              disabled={activeIndex + 1 === images?.length}\n              onClick={() => {\n                setActiveIndex(activeIndex + 1);\n              }}\n            >\n              <KeyboardArrowRightIcon />\n            </IconButton>\n          ) : null}\n        </div>\n      </DialogBody>\n    </Dialog>\n  );\n}\n","import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {ImageZoomDialog} from '@ui/overlays/dialog/image-zoom-dialog';\nimport {useContext} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {\n  AdConfig,\n  SiteConfigContext,\n} from '../../../core/settings/site-config-context';\nimport {useAdminSettings} from '../requests/use-admin-settings';\n\nexport function Component() {\n  const {data} = useAdminSettings();\n  const {\n    admin: {ads},\n  } = useContext(SiteConfigContext);\n\n  const adsData = data?.client?.ads as Record<string, string | boolean>;\n  const defaultAdsSettings: Record<string, string | boolean> = {\n    disable: adsData?.disable ?? false,\n  };\n  ads.forEach(ad => {\n    const key = ad.slot.replace('ads.', '');\n    defaultAdsSettings[key] = adsData?.[key] ?? '';\n  });\n\n  const form = useForm<AdminSettings>({\n    defaultValues: {client: {ads: defaultAdsSettings}},\n  });\n\n  return (\n    <AdminSettingsLayout\n      form={form}\n      title={<Trans message=\"Predefined AD slots\" />}\n    >\n      {ads.map(ad => (\n        <AdSection key={ad.slot} adConfig={ad} />\n      ))}\n      <FormSwitch\n        name=\"client.ads.disable\"\n        className=\"mb-30\"\n        description={\n          <Trans message=\"Disable all add related functionality across the site.\" />\n        }\n      >\n        <Trans message=\"Disable ads\" />\n      </FormSwitch>\n    </AdminSettingsLayout>\n  );\n}\n\ninterface AdSectionProps {\n  adConfig: AdConfig;\n}\nfunction AdSection({adConfig}: AdSectionProps) {\n  return (\n    <div className=\"flex items-center gap-24\">\n      <FormTextField\n        className=\"mb-30 flex-auto\"\n        name={`client.${adConfig.slot}`}\n        inputElementType=\"textarea\"\n        rows={8}\n        label={<Trans {...adConfig.description} />}\n      />\n      <DialogTrigger type=\"modal\">\n        <button\n          type=\"button\"\n          className=\"cursor-zoom-in overflow-hidden rounded-input outline-none transition hover:scale-105 focus-visible:ring max-md:hidden\"\n        >\n          <img\n            src={adConfig.image}\n            className=\"h-[186px] w-auto border\"\n            alt=\"Ad slot example\"\n          />\n        </button>\n        <ImageZoomDialog image={adConfig.image} />\n      </DialogTrigger>\n    </div>\n  );\n}\n"],"names":["ImageZoomDialog","props","close","useDialogContext","image","images","activeIndex","setActiveIndex","useControlledState","src","jsx","Dialog","jsxs","DialogBody","IconButton","CloseIcon","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","Component","data","useAdminSettings","ads","useContext","SiteConfigContext","adsData","_a","defaultAdsSettings","ad","key","form","useForm","AdminSettingsLayout","Trans","AdSection","FormSwitch","adConfig","FormTextField","DialogTrigger"],"mappings":"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"}