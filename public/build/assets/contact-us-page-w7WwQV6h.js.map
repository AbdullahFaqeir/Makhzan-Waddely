{"version":3,"file":"contact-us-page-w7WwQV6h.js","sources":["../../../common/foundation/resources/client/contact/use-submit-contact-form.ts","../../../common/foundation/resources/client/contact/contact-us-page.tsx"],"sourcesContent":["import {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {toast} from '@ui/toast/toast';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '../errors/on-form-query-error';\nimport {BackendResponse} from '../http/backend-response/backend-response';\nimport {apiClient} from '../http/query-client';\nimport {useNavigate} from '../ui/navigation/use-navigate';\n\ninterface Response extends BackendResponse {}\n\nexport interface ContactPagePayload {\n  name: string;\n  email: string;\n  message: string;\n  captcha_token: string | null;\n}\n\nexport function useSubmitContactForm(form: UseFormReturn<ContactPagePayload>) {\n  const {trans} = useTrans();\n  const navigate = useNavigate();\n\n  return useMutation({\n    mutationFn: (props: ContactPagePayload) => submitContactForm(props),\n    onSuccess: () => {\n      toast(trans(message('Your message has been submitted.')));\n      navigate('/');\n    },\n    onError: err => onFormQueryError(err, form),\n  });\n}\n\nfunction submitContactForm(payload: ContactPagePayload): Promise<Response> {\n  return apiClient.post('contact-page', payload).then(r => r.data);\n}\n","import {CaptchaContainer} from '@common/captcha/captcha-container';\nimport {Footer} from '@common/ui/footer/footer';\nimport {Navbar} from '@common/ui/navigation/navbar/navbar';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {toast} from '@ui/toast/toast';\nimport {useForm} from 'react-hook-form';\nimport {useCaptcha} from '../captcha/use-captcha';\nimport {StaticPageTitle} from '../seo/static-page-title';\nimport {\n  ContactPagePayload,\n  useSubmitContactForm,\n} from './use-submit-contact-form';\n\nexport function Component() {\n  const form = useForm<ContactPagePayload>();\n  const submitForm = useSubmitContactForm(form);\n  const {captchaToken, captchaEnabled, resetCaptcha} = useCaptcha('contact');\n\n  return (\n    <div className=\"flex min-h-screen flex-col bg\">\n      <StaticPageTitle>\n        <Trans message=\"Contact us\" />\n      </StaticPageTitle>\n      <Navbar\n        color=\"bg\"\n        className=\"sticky top-0 flex-shrink-0\"\n        menuPosition=\"contact-us-page\"\n      />\n      <div className=\"container mx-auto flex flex-auto items-center justify-center p-24 md:p-40\">\n        <div className=\"max-w-620 rounded-panel border bg-elevated p-24 shadow-sm\">\n          <h1 className=\"text-2xl\">\n            <Trans message=\"Contact us\" />\n          </h1>\n          <p className=\"mb-30 mt-4 text-sm\">\n            <Trans message=\"Please use the form below to send us a message and we'll get back to you as soon as possible.\" />\n          </p>\n          <Form\n            form={form}\n            onSubmit={async value => {\n              if (captchaEnabled && !captchaToken) {\n                toast.danger(message('Please solve the captcha challenge.'));\n                return;\n              }\n              submitForm.mutate(\n                {\n                  ...value,\n                  captcha_token: captchaToken,\n                },\n                {onError: () => resetCaptcha()},\n              );\n            }}\n          >\n            <FormTextField\n              label={<Trans message=\"Name\" />}\n              name=\"name\"\n              required\n              className=\"mb-20\"\n            />\n            <FormTextField\n              label={<Trans message=\"Email\" />}\n              name=\"email\"\n              required\n              type=\"email\"\n              className=\"mb-20\"\n            />\n            <FormTextField\n              label={<Trans message=\"Message\" />}\n              name=\"message\"\n              required\n              inputElementType=\"textarea\"\n              className=\"mb-20\"\n              rows={8}\n            />\n            {captchaEnabled && <CaptchaContainer className=\"mb-20\" />}\n            <Button\n              type=\"submit\"\n              variant=\"flat\"\n              color=\"primary\"\n              disabled={submitForm.isPending}\n            >\n              <Trans message=\"Send\" />\n            </Button>\n          </Form>\n        </div>\n      </div>\n      <Footer className=\"container mx-auto flex-shrink-0 px-24\" />\n    </div>\n  );\n}\n"],"names":["useSubmitContactForm","form","trans","useTrans","navigate","useNavigate","useMutation","props","submitContactForm","toast","message","err","onFormQueryError","payload","apiClient","r","Component","useForm","submitForm","captchaToken","captchaEnabled","resetCaptcha","useCaptcha","jsxs","jsx","StaticPageTitle","Trans","Navbar","Form","value","FormTextField","CaptchaContainer","Button","Footer"],"mappings":"6MAmBO,SAASA,EAAqBC,EAAyC,CAC5E,KAAM,CAAC,MAAAC,CAAA,EAASC,EAAA,EACVC,EAAWC,EAAA,EAEjB,OAAOC,EAAY,CACjB,WAAaC,GAA8BC,EAAkBD,CAAK,EAClE,UAAW,IAAM,CACfE,EAAMP,EAAMQ,EAAQ,kCAAkC,CAAC,CAAC,EACxDN,EAAS,GAAG,CACd,EACA,QAASO,GAAOC,EAAiBD,EAAKV,CAAI,CAAA,CAC3C,CACH,CAEA,SAASO,EAAkBK,EAAgD,CACzE,OAAOC,EAAU,KAAK,eAAgBD,CAAO,EAAE,KAAKE,GAAKA,EAAE,IAAI,CACjE,CClBO,SAASC,GAAY,CAC1B,MAAMf,EAAOgB,EAAA,EACPC,EAAalB,EAAqBC,CAAI,EACtC,CAAC,aAAAkB,EAAc,eAAAC,EAAgB,aAAAC,CAAA,EAAgBC,EAAW,SAAS,EAEzE,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAC,MAACC,EAAA,CACC,SAAAD,EAAAA,IAACE,EAAA,CAAM,QAAQ,aAAa,EAC9B,EACAF,EAAAA,IAACG,EAAA,CACC,MAAM,KACN,UAAU,6BACV,aAAa,iBAAA,CAAA,QAEd,MAAA,CAAI,UAAU,4EACb,SAAAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,WACZ,eAACE,EAAA,CAAM,QAAQ,aAAa,CAAA,CAC9B,EACAF,EAAAA,IAAC,KAAE,UAAU,qBACX,eAACE,EAAA,CAAM,QAAQ,gGAAgG,CAAA,CACjH,EACAH,EAAAA,KAACK,EAAA,CACC,KAAA3B,EACA,SAAU,MAAM4B,GAAS,CACvB,GAAIT,GAAkB,CAACD,EAAc,CACnCV,EAAM,OAAOC,EAAQ,qCAAqC,CAAC,EAC3D,MACF,CACAQ,EAAW,OACT,CACE,GAAGW,EACH,cAAeV,CAAA,EAEjB,CAAC,QAAS,IAAME,EAAA,CAAa,CAAC,CAElC,EAEA,SAAA,CAAAG,EAAAA,IAACM,EAAA,CACC,MAAON,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,EAC7B,KAAK,OACL,SAAQ,GACR,UAAU,OAAA,CAAA,EAEZF,EAAAA,IAACM,EAAA,CACC,MAAON,EAAAA,IAACE,EAAA,CAAM,QAAQ,OAAA,CAAQ,EAC9B,KAAK,QACL,SAAQ,GACR,KAAK,QACL,UAAU,OAAA,CAAA,EAEZF,EAAAA,IAACM,EAAA,CACC,MAAON,EAAAA,IAACE,EAAA,CAAM,QAAQ,SAAA,CAAU,EAChC,KAAK,UACL,SAAQ,GACR,iBAAiB,WACjB,UAAU,QACV,KAAM,CAAA,CAAA,EAEPN,GAAkBI,EAAAA,IAACO,EAAA,CAAiB,UAAU,OAAA,CAAQ,EACvDP,EAAAA,IAACQ,EAAA,CACC,KAAK,SACL,QAAQ,OACR,MAAM,UACN,SAAUd,EAAW,UAErB,SAAAM,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,CAAA,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,EACAF,EAAAA,IAACS,EAAA,CAAO,UAAU,uCAAA,CAAwC,CAAA,EAC5D,CAEJ"}