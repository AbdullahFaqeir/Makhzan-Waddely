{"version":3,"file":"themes-settings-page-CCFbYhM5.js","sources":["../../../common/foundation/resources/client/admin/settings/pages/themes-settings/theme-options-button.tsx","../../../common/foundation/resources/client/ui/library/utils/string/random-number.ts","../../../common/foundation/resources/client/admin/settings/pages/themes-settings/create-new-theme-button.tsx","../../../common/foundation/resources/client/admin/settings/pages/themes-settings/select-theme-button.tsx","../../../common/foundation/resources/client/ui/library/themes/utils/color-to-theme-value.ts","../../../common/foundation/resources/client/admin/settings/pages/themes-settings/theme-color-button.tsx","../../../common/foundation/resources/client/admin/settings/pages/themes-settings/theme-constants.ts","../../../common/foundation/resources/client/ui/font-selector/font.svg","../../../common/foundation/resources/client/ui/font-selector/font-selector-filters.tsx","../../../common/foundation/resources/client/ui/library/fonts/font-picker/browser-safe-fonts.ts","../../../common/foundation/resources/client/ui/library/utils/array/chunk-array.ts","../../../common/foundation/resources/client/ui/font-selector/font-selector-state.ts","../../../common/foundation/resources/client/ui/font-selector/font-selector-pagination.tsx","../../../common/foundation/resources/client/ui/font-selector/font-selector.tsx","../../../common/foundation/resources/client/admin/settings/pages/themes-settings/themes-settings-page.tsx"],"sourcesContent":["import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {useSettingsPageStore} from '@common/admin/settings/layout/settings-page-store';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {Button} from '@ui/buttons/button';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {Form} from '@ui/forms/form';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item as MenuItem} from '@ui/forms/listbox/item';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {DeleteIcon} from '@ui/icons/material/Delete';\nimport {MoreVertIcon} from '@ui/icons/material/MoreVert';\nimport {RestartAltIcon} from '@ui/icons/material/RestartAlt';\nimport {TuneIcon} from '@ui/icons/material/Tune';\nimport {Menu, MenuTrigger} from '@ui/menu/menu-trigger';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {CssTheme} from '@ui/themes/css-theme';\nimport {toast} from '@ui/toast/toast';\nimport {Fragment, useEffect, useState} from 'react';\nimport {useForm, useFormContext} from 'react-hook-form';\n\ninterface Props {\n  selectedThemeId: number;\n  initialThemeId: number;\n  onSelectedThemeChange: (index: number) => void;\n}\nexport function ThemeOptionsButton({\n  selectedThemeId,\n  initialThemeId,\n  onSelectedThemeChange,\n}: Props) {\n  const preview = useSettingsPageStore(s => s.preview);\n  const [confirmDialogOpen, setConfirmDialogOpen] = useState(false);\n  const [settingsDialogOpen, setSettingsDialogOpen] = useState(false);\n  const {setValue, getValues} = useFormContext<AdminSettings>();\n  const {\n    data: {defaults},\n  } = useAdminSettings();\n\n  const deleteTheme = () => {\n    if (getValues('themes').length <= 1) {\n      toast.danger(message('At least one theme is required'));\n      return;\n    }\n    if (selectedThemeId) {\n      setValue(\n        'themes',\n        getValues('themes').filter(t => t.id !== selectedThemeId),\n        {shouldDirty: true},\n      );\n\n      const initialTheme = getValues('themes').find(\n        t => t.id === initialThemeId,\n      );\n\n      if (initialThemeId === selectedThemeId) {\n        window.location.reload();\n      } else {\n        if (initialTheme) {\n          onSelectedThemeChange(initialThemeId);\n        } else {\n          onSelectedThemeChange(getValues('themes')[0].id);\n        }\n      }\n    }\n  };\n\n  const resetThemeColors = () => {\n    const selectedThemeIndex = getValues('themes').findIndex(\n      t => t.id === selectedThemeId,\n    );\n    const path = `themes.${selectedThemeIndex}` as 'themes.0';\n    const defaultColors = getValues(`${path}.is_dark`)\n      ? defaults.themes.dark\n      : defaults.themes.light;\n\n    Object.entries(defaultColors).forEach(([colorName, themeValue]) => {\n      preview.setThemeValue(colorName, themeValue);\n    });\n    preview.setThemeFont(null);\n\n    setValue(`${path}.values`, defaultColors, {\n      shouldDirty: true,\n    });\n    setValue(`${path}.font`, undefined, {\n      shouldDirty: true,\n    });\n  };\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <IconButton variant=\"outline\" size=\"sm\">\n          <MoreVertIcon />\n        </IconButton>\n        <Menu>\n          <MenuItem\n            value=\"settings\"\n            startIcon={<TuneIcon />}\n            onSelected={() => setSettingsDialogOpen(true)}\n          >\n            <Trans message=\"Settings\" />\n          </MenuItem>\n          <MenuItem\n            value=\"reset\"\n            startIcon={<RestartAltIcon />}\n            onSelected={() => resetThemeColors()}\n          >\n            <Trans message=\"Reset to default\" />\n          </MenuItem>\n          <MenuItem\n            value=\"delete\"\n            startIcon={<DeleteIcon />}\n            onSelected={() => setConfirmDialogOpen(true)}\n          >\n            <Trans message=\"Delete\" />\n          </MenuItem>\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={confirmDialogOpen}\n        onClose={isConfirmed => {\n          if (isConfirmed) {\n            deleteTheme();\n          }\n          setConfirmDialogOpen(false);\n        }}\n      >\n        <ConfirmationDialog\n          isDanger\n          title={<Trans message=\"Delete theme\" />}\n          body={<Trans message=\"Are you sure you want to delete this theme?\" />}\n          confirm={<Trans message=\"Delete\" />}\n        />\n      </DialogTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={settingsDialogOpen}\n        onClose={() => setSettingsDialogOpen(false)}\n      >\n        <SettingsDialog\n          theme={getValues(`themes`).find(t => t.id === selectedThemeId)}\n        />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface SettingsDialogProps {\n  theme?: CssTheme;\n}\nfunction SettingsDialog({theme}: SettingsDialogProps) {\n  const settingsForm = useFormContext<AdminSettings>();\n  const form = useForm<CssTheme>({defaultValues: theme});\n  const {close, formId} = useDialogContext();\n\n  useEffect(() => {\n    const subscription = form.watch((value, {name}) => {\n      // theme can only be set as either light or dark default\n      if (name === 'default_light' && value.default_light) {\n        form.setValue('default_dark', false);\n      }\n      if (name === 'default_dark' && value.default_dark) {\n        form.setValue('default_light', false);\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, [form]);\n\n  const applyChanges = (value: CssTheme) => {\n    settingsForm.getValues('themes').forEach((currentTheme, index) => {\n      // update changed theme\n      if (currentTheme.id === value.id) {\n        settingsForm.setValue(`themes.${index}`, value, {\n          shouldDirty: true,\n        });\n        return;\n      }\n\n      // unset \"default_light\" and \"default_dark\" on other themes\n      if (value.default_light) {\n        settingsForm.setValue(\n          `themes.${index}`,\n          {...currentTheme, default_light: false},\n          {shouldDirty: true},\n        );\n        return;\n      }\n      if (value.default_dark) {\n        settingsForm.setValue(\n          `themes.${index}`,\n          {...currentTheme, default_dark: false},\n          {shouldDirty: true},\n        );\n        return;\n      }\n    });\n  };\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Update settings\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={values => {\n            applyChanges(values);\n            close();\n          }}\n        >\n          <ThemeSettingsFormFields />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={!form.formState.isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nexport function ThemeSettingsFormFields() {\n  return (\n    <Fragment>\n      <FormTextField\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        className=\"mb-24\"\n        autoFocus\n        required\n      />\n      <FormSwitch\n        name=\"is_dark\"\n        className=\"mb-20 border-b pb-20\"\n        description={\n          <Trans message=\"Whether this theme has light text on dark background.\" />\n        }\n      >\n        <Trans message=\"Dark theme\" />\n      </FormSwitch>\n      <FormSwitch\n        name=\"default_light\"\n        className=\"mb-24\"\n        description={\n          <Trans message=\"When light mode is selected, this theme will be used.\" />\n        }\n      >\n        <Trans message=\"Default for light mode\" />\n      </FormSwitch>\n      <FormSwitch\n        name=\"default_dark\"\n        description={\n          <Trans message=\"When dark mode is selected, this theme will be used.\" />\n        }\n      >\n        <Trans message=\"Default for dark mode\" />\n      </FormSwitch>\n    </Fragment>\n  );\n}\n","export function randomNumber(min: number = 1, max: number = 10000) {\n  const randomBuffer = new Uint32Array(1);\n\n  window.crypto.getRandomValues(randomBuffer);\n\n  const number = randomBuffer[0] / (0xffffffff + 1);\n\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(number * (max - min + 1)) + min;\n}\n","import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {ThemeSettingsFormFields} from '@common/admin/settings/pages/themes-settings/theme-options-button';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {Button} from '@ui/buttons/button';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {Form} from '@ui/forms/form';\nimport {Trans} from '@ui/i18n/trans';\nimport {AddIcon} from '@ui/icons/material/Add';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {CssTheme} from '@ui/themes/css-theme';\nimport {randomNumber} from '@ui/utils/string/random-number';\nimport {useForm, useFormContext} from 'react-hook-form';\n\ninterface Props {\n  type?: string;\n  onCreated?: (index: number) => void;\n}\nexport function CreateNewThemeButton({type = 'site', onCreated}: Props) {\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={newThemeId => {\n        if (newThemeId != null) {\n          onCreated?.(newThemeId);\n        }\n      }}\n    >\n      <IconButton\n        variant=\"outline\"\n        shadow=\"shadow\"\n        size=\"sm\"\n        className=\"ml-auto\"\n      >\n        <AddIcon />\n      </IconButton>\n      <NewThemDialog type={type} />\n    </DialogTrigger>\n  );\n}\n\ninterface NewThemeDialogProps {\n  type: string;\n}\nfunction NewThemDialog({type}: NewThemeDialogProps) {\n  const {formId, close} = useDialogContext();\n  const {\n    data: {defaults},\n  } = useAdminSettings();\n  const settingsForm = useFormContext<AdminSettings>();\n  const form = useForm<CssTheme>({\n    defaultValues: {\n      default_dark: false,\n      default_light: false,\n      is_dark: false,\n    },\n  });\n\n  const createTheme = (formValues: CssTheme) => {\n    const themeColors = formValues.is_dark\n      ? defaults.themes.dark\n      : defaults.themes.light;\n    const currentThemes = settingsForm.getValues('themes');\n    const newThemeId = randomNumber(100, 1000);\n\n    settingsForm.setValue(\n      'themes',\n      [\n        ...currentThemes,\n        {\n          ...formValues,\n          id: newThemeId,\n          type,\n          values: themeColors,\n        },\n      ],\n      {shouldDirty: true},\n    );\n\n    close(newThemeId);\n  };\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"New theme\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form id={formId} form={form} onSubmit={createTheme}>\n          <ThemeSettingsFormFields />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={!form.formState.isDirty}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {Item} from '@ui/forms/listbox/item';\nimport {Select} from '@ui/forms/select/select';\nimport {CssTheme} from '@ui/themes/css-theme';\n\ninterface Props {\n  selectedThemeId: number;\n  onSelectionChange: (themeId: number) => void;\n  allThemes: CssTheme[];\n}\nexport function SelectThemeButton({\n  selectedThemeId,\n  onSelectionChange,\n  allThemes,\n}: Props) {\n  return (\n    <Select\n      size=\"sm\"\n      selectionMode=\"single\"\n      selectedValue={selectedThemeId}\n      onSelectionChange={value => onSelectionChange(value as number)}\n      appearance=\"dropdown\"\n    >\n      {allThemes.map(theme => (\n        <Item key={theme.id} value={theme.id}>\n          {theme.name}\n        </Item>\n      ))}\n    </Select>\n  );\n}\n","import {parseColor} from '@react-stately/color';\n\nexport function colorToThemeValue(color: string): string {\n  return parseColor(color)\n    .toString('rgb')\n    .replace('rgb(', '')\n    .replace(')', '')\n    .replace(/, ?/g, ' ');\n}\n","import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {useSettingsPageStore} from '@common/admin/settings/layout/settings-page-store';\nimport {SettingsSectionButton} from '@common/admin/settings/layout/settings-section-button';\nimport {ColorIcon} from '@common/admin/settings/pages/themes-settings/color-icon';\nimport {ColorPickerDialog} from '@ui/color-picker/color-picker-dialog';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {colorToThemeValue} from '@ui/themes/utils/color-to-theme-value';\nimport {themeValueToHex} from '@ui/themes/utils/theme-value-to-hex';\nimport {ReactNode, useEffect, useState} from 'react';\nimport {useFormContext} from 'react-hook-form';\n\ninterface Props {\n  label: ReactNode;\n  colorName: string;\n  initialThemeValue: string;\n  themeId: number;\n  size?: 'md' | 'lg';\n}\nexport function ThemeColorButton({\n  label,\n  colorName,\n  initialThemeValue,\n  themeId,\n  size = 'lg',\n}: Props) {\n  const preview = useSettingsPageStore(s => s.preview);\n  const {setValue, getValues} = useFormContext<AdminSettings>();\n  const [selectedThemeValue, setSelectedThemeValue] =\n    useState<string>(initialThemeValue);\n\n  // set color as css variable in preview and on button preview, but not in appearance values\n  // this way color change can be canceled when color picker is closed and applied explicitly via apply button\n  const selectThemeValue = (themeValue: string) => {\n    setSelectedThemeValue(themeValue);\n    preview.setThemeValue(colorName, themeValue);\n  };\n\n  useEffect(() => {\n    // need to update the color here so changes via \"reset colors\" button are reflected\n    setSelectedThemeValue(initialThemeValue);\n  }, [initialThemeValue]);\n\n  return (\n    <DialogTrigger\n      value={themeValueToHex(selectedThemeValue)}\n      type=\"popover\"\n      placement=\"right\"\n      offset={10}\n      onValueChange={newColor => {\n        selectThemeValue(colorToThemeValue(newColor));\n      }}\n      onClose={(newColor, {valueChanged, initialValue}) => {\n        if (newColor && valueChanged) {\n          const themeIndex = getValues('themes').findIndex(\n            t => t.id === themeId,\n          );\n          setValue(\n            `themes.${themeIndex}.values.${colorName}`,\n            colorToThemeValue(newColor),\n            {shouldDirty: true},\n          );\n        } else {\n          // reset to initial value, if apply button was not clicked\n          selectThemeValue(initialValue ? colorToThemeValue(initialValue) : '');\n        }\n      }}\n    >\n      <SettingsSectionButton\n        size={size}\n        radius=\"rounded-panel\"\n        startIcon={\n          <ColorIcon\n            viewBox=\"0 0 48 48\"\n            className=\"icon-lg\"\n            style={{\n              fill: selectedThemeValue.startsWith('#')\n                ? selectedThemeValue\n                : `rgb(${selectedThemeValue})`,\n            }}\n          />\n        }\n      >\n        {label}\n      </SettingsSectionButton>\n      <ColorPickerDialog />\n    </DialogTrigger>\n  );\n}\n","import {message} from '@ui/i18n/message';\n\nexport const themeColorList = [\n  {\n    label: message('Background'),\n    key: '--be-background',\n  },\n  {\n    label: message('Background alt'),\n    key: '--be-bg-alt',\n  },\n  {\n    label: message('Background elevated'),\n    key: '--be-bg-elevated',\n  },\n  {\n    label: message('Foreground'),\n    key: '--be-fg-base',\n  },\n  {\n    label: message('Accent light'),\n    key: '--be-primary-light',\n  },\n  {\n    label: message('Accent'),\n    key: '--be-primary',\n  },\n  {\n    label: message('Accent dark'),\n    key: '--be-primary-dark',\n  },\n  {\n    label: message('Text on accent'),\n    key: '--be-on-primary',\n  },\n  {\n    label: message('Chip'),\n    key: '--be-bg-chip',\n  },\n];\n\nexport const themeRadiusMap = {\n  'rounded-none': {\n    label: message('Square'),\n    value: '0px',\n  },\n  rounded: {\n    label: message('Small'),\n    value: '0.25rem',\n  },\n  'rounded-md': {\n    label: message('Medium'),\n    value: '0.375rem',\n  },\n  'rounded-lg': {\n    label: message('Large'),\n    value: '0.5rem',\n  },\n  'rounded-xl': {\n    label: message('Larger'),\n    value: '0.75rem',\n  },\n  'rounded-full': {\n    label: message('Pill'),\n    value: '9999px',\n  },\n};\n","export default \"__VITE_ASSET__nZRd1ta3__\"","import {useTrans} from '@ui/i18n/use-trans';\nimport {TextField} from '@ui/forms/input-field/text-field/text-field';\nimport {SearchIcon} from '@ui/icons/material/Search';\nimport {message} from '@ui/i18n/message';\nimport {Select} from '@ui/forms/select/select';\nimport {Item} from '@ui/forms/listbox/item';\nimport {Trans} from '@ui/i18n/trans';\nimport React from 'react';\nimport {FontSelectorState} from '@common/ui/font-selector/font-selector-state';\n\nexport interface FontSelectorFilterValue {\n  query: string;\n  category: string;\n}\n\ninterface FiltersHeaderProps {\n  state: FontSelectorState;\n}\nexport function FontSelectorFilters({\n  state: {filters, setFilters},\n}: FiltersHeaderProps) {\n  const {trans} = useTrans();\n  return (\n    <div className=\"mb-24 items-center gap-24 @xs:flex\">\n      <TextField\n        className=\"mb-12 flex-auto @xs:mb-0\"\n        value={filters.query}\n        onChange={e => {\n          setFilters({\n            ...filters,\n            query: e.target.value,\n          });\n        }}\n        startAdornment={<SearchIcon />}\n        placeholder={trans(message('Search fonts'))}\n      />\n      <Select\n        className=\"flex-auto\"\n        selectionMode=\"single\"\n        selectedValue={filters.category}\n        onSelectionChange={value => {\n          setFilters({\n            ...filters,\n            category: value as string,\n          });\n        }}\n      >\n        <Item value=\"\">\n          <Trans message=\"All categories\" />\n        </Item>\n        <Item value=\"serif\">\n          <Trans message=\"Serif\" />\n        </Item>\n        <Item value=\"sans-serif\">\n          <Trans message=\"Sans serif\" />\n        </Item>\n        <Item value=\"display\">\n          <Trans message=\"Display\" />\n        </Item>\n        <Item value=\"handwriting\">\n          <Trans message=\"Handwriting\" />\n        </Item>\n        <Item value=\"monospace\">\n          <Trans message=\"Monospace\" />\n        </Item>\n      </Select>\n    </div>\n  );\n}\n","import {message} from '@ui/i18n/message';\nimport {FontConfig} from '@ui/fonts/font-picker/font-config';\n\nexport const BrowserSafeFonts: FontConfig[] = [\n  {\n    label: message('System'),\n    family:\n      'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"',\n    category: 'sans-serif',\n  },\n  {family: 'Impact, Charcoal, sans-serif', category: 'sans-serif'},\n  {family: 'Arial, Helvetica Neue, Helvetica, sans-serif', category: 'serif'},\n  {family: '\"Comic Sans MS\", cursive, sans-serif', category: 'Handwriting'},\n  {family: 'Century Gothic, sans-serif', category: 'sans-serif'},\n  {family: '\"Courier New\", Courier, monospace', category: 'monospace'},\n  {\n    family: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif',\n    category: 'sans-serif',\n  },\n  {family: '\"Times New Roman\", Times, serif', category: 'serif'},\n  {family: '\"Lucida Console\", Monaco, monospace', category: 'monospace'},\n  {family: '\"Andele Mono\", monospace, sans-serif', category: 'sans-serif'},\n  {family: 'Verdana, Geneva, sans-serif', category: 'sans-serif'},\n  {\n    family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif',\n    category: 'sans-serif',\n  },\n];\n","export function chunkArray<T>(array: T[], chunkSize: number): T[][] {\n  return array.reduce<any>((resultArray, item, index) => {\n    const chunkIndex = Math.floor(index / chunkSize);\n\n    if (!resultArray[chunkIndex]) {\n      resultArray[chunkIndex] = [];\n    }\n\n    resultArray[chunkIndex].push(item);\n\n    return resultArray;\n  }, []);\n}\n","import {useCallback, useEffect, useMemo, useState} from 'react';\nimport {FontSelectorFilterValue} from '@common/ui/font-selector/font-selector-filters';\nimport {useValueLists} from '@common/http/value-lists';\nimport {BrowserSafeFonts} from '@ui/fonts/font-picker/browser-safe-fonts';\nimport {chunkArray} from '@ui/utils/array/chunk-array';\nimport {loadFonts} from '@ui/fonts/font-picker/load-fonts';\nimport {FontConfig} from '@ui/fonts/font-picker/font-config';\nimport {useFilter} from '@ui/i18n/use-filter';\n\nexport interface FontSelectorState extends UseFontSelectorProps {\n  fonts: FontConfig[];\n  filteredFonts: FontConfig[];\n  pages: FontConfig[][];\n  isLoading: boolean;\n  filters: FontSelectorFilterValue;\n  setFilters: (filters: FontSelectorFilterValue) => void;\n  currentPage: number;\n  setCurrentPage: (page: number) => void;\n}\n\nexport interface UseFontSelectorProps {\n  value?: FontConfig;\n  onChange: (value: FontConfig) => void;\n}\nexport function useFontSelectorState({\n  value,\n  onChange,\n}: UseFontSelectorProps): FontSelectorState {\n  const {data, isLoading} = useValueLists(['googleFonts']);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [filters, setFilterState] = useState<FontSelectorFilterValue>({\n    query: '',\n    category: value?.category ?? '',\n  });\n  const {contains} = useFilter({\n    sensitivity: 'base',\n  });\n\n  const allFonts = useMemo(() => {\n    return BrowserSafeFonts.concat(data?.googleFonts ?? []);\n  }, [data?.googleFonts]);\n\n  const filteredFonts = useMemo(() => {\n    return allFonts.filter(font => {\n      return (\n        contains(font.family, filters.query) &&\n        (!filters.category ||\n          font.category?.toLowerCase() === filters.category.toLowerCase())\n      );\n    });\n  }, [allFonts, filters, contains]);\n\n  const pages = useMemo(() => {\n    return chunkArray(filteredFonts, 20);\n  }, [filteredFonts]);\n  const fonts = pages[currentPage];\n\n  // open the page with the selected font\n  useEffect(() => {\n    if (data && value?.family) {\n      const index = filteredFonts.findIndex(f => f.family === value.family);\n      if (index >= 0) {\n        setCurrentPage(Math.floor(index / 20));\n      }\n    }\n  }, [data, filteredFonts, value?.family]);\n\n  useEffect(() => {\n    const id = 'font-selector';\n    if (fonts?.length) {\n      loadFonts(fonts, {id});\n    }\n  }, [fonts, currentPage]);\n\n  const setFilters = useCallback((filters: FontSelectorFilterValue) => {\n    setFilterState(filters);\n    // reset to first page when searching or changing category\n    setCurrentPage(0);\n  }, []);\n\n  return {\n    fonts: fonts || [],\n    currentPage,\n    filteredFonts: filteredFonts || [],\n    setCurrentPage,\n    isLoading,\n    filters,\n    setFilters,\n    value,\n    onChange,\n    pages,\n  };\n}\n","import {Trans} from '@ui/i18n/trans';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@ui/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@ui/icons/material/KeyboardArrowRight';\nimport React from 'react';\nimport {FontSelectorState} from '@common/ui/font-selector/font-selector-state';\n\ninterface FontSelectorPaginationProps {\n  state: FontSelectorState;\n}\nexport function FontSelectorPagination({\n  state: {currentPage = 0, setCurrentPage, filteredFonts, pages},\n}: FontSelectorPaginationProps) {\n  const total = filteredFonts?.length || 0;\n\n  return (\n    <div className=\"mt-30 flex items-center justify-end gap-24 border-t pt-14 text-sm\">\n      {total > 0 && (\n        <div>\n          <Trans\n            message=\":from - :to of :total\"\n            values={{\n              from: currentPage * 20 + 1,\n              to: Math.min((currentPage + 1) * 20, total),\n              total,\n            }}\n          />\n        </div>\n      )}\n      <div className=\"text-muted\">\n        <IconButton\n          disabled={currentPage < 1}\n          onClick={() => {\n            setCurrentPage(Math.max(0, currentPage - 1));\n          }}\n        >\n          <KeyboardArrowLeftIcon />\n        </IconButton>\n        <IconButton\n          disabled={currentPage >= pages.length - 1}\n          onClick={() => {\n            setCurrentPage(currentPage + 1);\n          }}\n        >\n          <KeyboardArrowRightIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {Trans} from '@ui/i18n/trans';\nimport React from 'react';\nimport {ButtonBase} from '@ui/buttons/button-base';\nimport clsx from 'clsx';\nimport {IllustratedMessage} from '@ui/images/illustrated-message';\nimport fontImage from './font.svg';\nimport {SvgImage} from '@ui/images/svg-image';\nimport {FontSelectorFilters} from '@common/ui/font-selector/font-selector-filters';\nimport {\n  FontSelectorState,\n  UseFontSelectorProps,\n  useFontSelectorState,\n} from '@common/ui/font-selector/font-selector-state';\nimport {FontSelectorPagination} from '@common/ui/font-selector/font-selector-pagination';\nimport {Skeleton} from '@ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@ui/animation/opacity-animation';\nimport {FontConfig} from '@ui/fonts/font-picker/font-config';\n\ninterface FontSelectorProps extends UseFontSelectorProps {\n  className?: string;\n}\nexport function FontSelector(props: FontSelectorProps) {\n  const state = useFontSelectorState(props);\n  return (\n    <div className={props.className}>\n      <FontSelectorFilters state={state} />\n      <AnimatePresence initial={false} mode=\"wait\">\n        <FontList state={state} />\n      </AnimatePresence>\n      <FontSelectorPagination state={state} />\n    </div>\n  );\n}\n\ninterface FontListProps {\n  state: FontSelectorState;\n}\nfunction FontList({state}: FontListProps) {\n  const {isLoading, fonts} = state;\n\n  const gridClassName =\n    'grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start';\n\n  if (isLoading) {\n    return <FontListSkeleton className={gridClassName} />;\n  }\n\n  if (!fonts?.length) {\n    return (\n      <IllustratedMessage\n        className=\"mt-60\"\n        size=\"sm\"\n        image={<SvgImage src={fontImage} />}\n        title={<Trans message=\"No matching fonts\" />}\n        description={\n          <Trans message=\"Try another search query or different category\" />\n        }\n      />\n    );\n  }\n\n  return (\n    <m.div key=\"font-list\" {...opacityAnimation} className={gridClassName}>\n      {fonts?.map(font => (\n        <FontButton key={font.family} font={font} state={state} />\n      ))}\n    </m.div>\n  );\n}\n\ninterface FontButtonProps {\n  font: FontConfig;\n  state: FontSelectorState;\n}\nfunction FontButton({font, state: {value, onChange}}: FontButtonProps) {\n  const isActive = value?.family === font.family;\n  const displayName = font.family.split(',')[0].replace(/\"/g, '');\n\n  return (\n    <ButtonBase\n      key={font.family}\n      display=\"block\"\n      onClick={() => {\n        onChange(font);\n      }}\n    >\n      <span\n        className={clsx(\n          'flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl',\n          isActive && 'ring-2 ring-primary ring-offset-2',\n        )}\n      >\n        <span style={{fontFamily: font.family}}>Aa</span>\n      </span>\n      <span\n        className={clsx(\n          'mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm',\n          isActive && 'text-primary',\n        )}\n      >\n        {font.label ? <Trans {...font.label} /> : displayName}\n      </span>\n    </ButtonBase>\n  );\n}\n\ninterface FontListSkeletonProps {\n  className: string;\n}\nfunction FontListSkeleton({className}: FontListSkeletonProps) {\n  const items = Array.from(Array(20).keys());\n  return (\n    <m.div key=\"font-list-skeleton\" {...opacityAnimation} className={className}>\n      {items.map(index => (\n        <div key={index}>\n          <div className=\"aspect-square\">\n            <Skeleton display=\"block\" variant=\"rect\" />\n          </div>\n          <Skeleton className=\"mt-6 text-sm\" />\n        </div>\n      ))}\n    </m.div>\n  );\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {useSettingsPageStore} from '@common/admin/settings/layout/settings-page-store';\nimport {SettingsWithPreview} from '@common/admin/settings/layout/settings-with-preview';\nimport {CreateNewThemeButton} from '@common/admin/settings/pages/themes-settings/create-new-theme-button';\nimport {SelectThemeButton} from '@common/admin/settings/pages/themes-settings/select-theme-button';\nimport {ThemeColorButton} from '@common/admin/settings/pages/themes-settings/theme-color-button';\nimport {\n  themeColorList,\n  themeRadiusMap,\n} from '@common/admin/settings/pages/themes-settings/theme-constants';\nimport {ThemeOptionsButton} from '@common/admin/settings/pages/themes-settings/theme-options-button';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {FontSelector} from '@common/ui/font-selector/font-selector';\nimport {Accordion, AccordionItem} from '@ui/accordion/accordion';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\nimport {ButtonBase} from '@ui/buttons/button-base';\nimport {Item as Option} from '@ui/forms/listbox/item';\nimport {FormSelect} from '@ui/forms/select/select';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\nimport {useThemeSelector} from '@ui/themes/theme-selector-context';\nimport clsx from 'clsx';\nimport {ReactNode, use, useState} from 'react';\nimport {useForm, useFormContext, useWatch} from 'react-hook-form';\n\nexport function Component() {\n  const {data} = useAdminSettings();\n  const {auth} = use(SiteConfigContext);\n  const siteThemes = data.themes.filter(t => t.type === 'site');\n\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      themes: siteThemes,\n      client: {\n        themes: {\n          default_id: data.client.themes?.default_id\n            ? parseInt(data.client.themes.default_id as string)\n            : 0,\n          user_change: data.client.themes?.user_change ?? false,\n        },\n      },\n    },\n  });\n\n  return (\n    <SettingsWithPreview\n      title={<Trans message=\"Themes\" />}\n      defaultRoute={getBootstrapData().auth_redirect_uri ?? '/'}\n      docsLink={AdminDocsUrls.settings.themes}\n    >\n      <SettingsWithPreview.Content>\n        <SettingsWithPreview.Form form={form}>\n          <div className=\"mb-20 border-b pb-20\">\n            <FormSelect\n              className=\"mb-20\"\n              size=\"sm\"\n              name=\"client.themes.default_id\"\n              selectionMode=\"single\"\n              label={<Trans message=\"Default site theme\" />}\n            >\n              <Option value={0}>\n                <Trans message=\"System\" />\n              </Option>\n              {siteThemes.map(theme => (\n                <Option key={theme.id} value={theme.id}>\n                  {theme.name}\n                </Option>\n              ))}\n            </FormSelect>\n            <FormSwitch name=\"client.themes.user_change\">\n              <Trans message=\"Allow users to switch theme\" />\n            </FormSwitch>\n          </div>\n          <ThemeEditor />\n        </SettingsWithPreview.Form>\n      </SettingsWithPreview.Content>\n      <SettingsWithPreview.Preview />\n    </SettingsWithPreview>\n  );\n}\n\ninterface ThemeEditorProps {\n  size?: 'md' | 'lg';\n  type?: string;\n}\nexport function ThemeEditor({size = 'lg', type = 'site'}: ThemeEditorProps) {\n  const preview = useSettingsPageStore(s => s.preview);\n  const form = useFormContext<AdminSettings>();\n  const allThemes = useWatch<AdminSettings, 'themes'>({name: 'themes'}).filter(\n    t => t.type === type,\n  );\n  const {selectedTheme: initialSelectedTheme} = useThemeSelector();\n  const [selectedThemeId, setSelectedThemeId] = useState(() => {\n    const initialTheme = allThemes.find(t => t.id === initialSelectedTheme.id);\n    return initialTheme ? initialTheme.id : allThemes[0]?.id;\n  });\n  const selectedTheme = form\n    .watch('themes')\n    .find(t => t.id === selectedThemeId);\n\n  const setSelectedTheme = (themeId: number) => {\n    if (themeId === selectedThemeId) return;\n    setSelectedThemeId(themeId);\n    const theme = form.getValues('themes').find(t => t.id === themeId);\n    if (theme) {\n      preview.setActiveTheme(theme.id);\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"mb-24 flex items-center gap-8\">\n        <SelectThemeButton\n          selectedThemeId={selectedThemeId}\n          onSelectionChange={setSelectedTheme}\n          allThemes={allThemes}\n        />\n        <ThemeOptionsButton\n          selectedThemeId={selectedThemeId}\n          initialThemeId={initialSelectedTheme.id}\n          onSelectedThemeChange={setSelectedTheme}\n        />\n        <CreateNewThemeButton type={type} onCreated={setSelectedTheme} />\n      </div>\n      <Accordion variant=\"outline\" size={size} className=\"mb-10\">\n        <AccordionItem\n          fontClassName=\"text-sm\"\n          label={<Trans message=\"Font\" />}\n          descriptionClassName=\"overflow-hidden text-ellipsis whitespace-nowrap text-xs text-muted\"\n          description={\n            selectedTheme?.font?.family ? (\n              selectedTheme.font.family\n            ) : (\n              <Trans message=\"System\" />\n            )\n          }\n        >\n          <FontList themeId={selectedThemeId} />\n        </AccordionItem>\n        <AccordionItem\n          label={<Trans message=\"Rounding\" />}\n          fontClassName=\"text-sm\"\n        >\n          <RadiusSelector\n            label={<Trans message=\"Button rounding\" />}\n            name=\"button-radius\"\n            themeId={selectedThemeId}\n            className=\"mb-24\"\n          />\n          <RadiusSelector\n            label={<Trans message=\"Input rounding\" />}\n            name=\"input-radius\"\n            themeId={selectedThemeId}\n            className=\"mb-24\"\n          />\n          <RadiusSelector\n            label={<Trans message=\"Panel rounding\" />}\n            name=\"panel-radius\"\n            hidePill\n            themeId={selectedThemeId}\n          />\n        </AccordionItem>\n      </Accordion>\n      {themeColorList.map(color => (\n        <ThemeColorButton\n          key={color.key}\n          colorName={color.key}\n          size={size}\n          label={<Trans {...color.label} />}\n          initialThemeValue={selectedTheme?.values[color.key] ?? ''}\n          themeId={selectedThemeId}\n        />\n      ))}\n    </div>\n  );\n}\n\ninterface FontListProps {\n  themeId: number;\n}\nfunction FontList({themeId}: FontListProps) {\n  const preview = useSettingsPageStore(s => s.preview);\n  const {setValue, watch} = useFormContext<AdminSettings>();\n  const selectedThemeIndex = watch('themes').findIndex(t => t.id === themeId);\n  const key = `themes.${selectedThemeIndex}.font` as 'themes.1.font';\n  return (\n    <FontSelector\n      value={watch(key)}\n      onChange={font => {\n        setValue(key, font, {shouldDirty: true});\n        preview.setThemeFont(font);\n      }}\n    />\n  );\n}\n\ninterface RadiusSelectorProps {\n  label: ReactNode;\n  name: string;\n  hidePill?: boolean;\n  themeId: number;\n  className?: string;\n}\nfunction RadiusSelector({\n  label,\n  name,\n  hidePill,\n  themeId,\n  className,\n}: RadiusSelectorProps) {\n  const preview = useSettingsPageStore(s => s.preview);\n  const {watch, setValue} = useFormContext<AdminSettings>();\n  const themeIndex = watch('themes').findIndex(t => t.id === themeId);\n  const formKey =\n    `themes.${themeIndex}.values.--be-${name}` as 'themes.1.values.--be-button-radius';\n  const currentValue = watch(formKey);\n  return (\n    <div className={className}>\n      <div className=\"mb-10 text-sm font-semibold\">{label}</div>\n      <div className=\"grid grid-cols-3 gap-10 text-sm\">\n        {Object.entries(themeRadiusMap)\n          .filter(([key]) => !hidePill || !key.includes('full'))\n          .map(([key, {label, value}]) => (\n            <ButtonBase\n              key={key}\n              display=\"block\"\n              className={clsx(\n                'h-36 border-2 hover:bg-hover',\n                key,\n                value === currentValue && 'border-primary',\n              )}\n              onClick={() => {\n                setValue(formKey, value, {shouldDirty: true});\n                preview.setThemeValue(`--be-${name}`, value);\n              }}\n            >\n              <Trans {...label} />\n            </ButtonBase>\n          ))}\n      </div>\n    </div>\n  );\n}\n"],"names":["ThemeOptionsButton","selectedThemeId","initialThemeId","onSelectedThemeChange","preview","useSettingsPageStore","s","confirmDialogOpen","setConfirmDialogOpen","useState","settingsDialogOpen","setSettingsDialogOpen","setValue","getValues","useFormContext","defaults","useAdminSettings","deleteTheme","toast","message","t","initialTheme","resetThemeColors","path","defaultColors","colorName","themeValue","Fragment","jsxs","MenuTrigger","jsx","IconButton","MoreVertIcon","Menu","MenuItem","TuneIcon","Trans","RestartAltIcon","DeleteIcon","DialogTrigger","isConfirmed","ConfirmationDialog","SettingsDialog","theme","settingsForm","form","useForm","close","formId","useDialogContext","useEffect","subscription","value","name","applyChanges","currentTheme","index","Dialog","DialogHeader","DialogBody","Form","values","ThemeSettingsFormFields","DialogFooter","Button","FormTextField","FormSwitch","randomNumber","min","max","randomBuffer","number","CreateNewThemeButton","type","onCreated","newThemeId","AddIcon","NewThemDialog","createTheme","formValues","themeColors","currentThemes","SelectThemeButton","onSelectionChange","allThemes","Select","Item","colorToThemeValue","color","parseColor","ThemeColorButton","label","initialThemeValue","themeId","size","selectedThemeValue","setSelectedThemeValue","selectThemeValue","themeValueToHex","newColor","valueChanged","initialValue","themeIndex","SettingsSectionButton","ColorIcon","ColorPickerDialog","themeColorList","themeRadiusMap","fontImage","FontSelectorFilters","filters","setFilters","trans","useTrans","TextField","e","SearchIcon","BrowserSafeFonts","chunkArray","array","chunkSize","resultArray","item","chunkIndex","useFontSelectorState","onChange","data","isLoading","useValueLists","currentPage","setCurrentPage","setFilterState","contains","useFilter","allFonts","useMemo","filteredFonts","font","_a","pages","fonts","f","loadFonts","useCallback","FontSelectorPagination","total","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","FontSelector","props","state","AnimatePresence","FontList","gridClassName","FontListSkeleton","m","opacityAnimation","FontButton","IllustratedMessage","SvgImage","isActive","displayName","ButtonBase","clsx","className","items","Skeleton","Component","auth","use","SiteConfigContext","siteThemes","_b","SettingsWithPreview","getBootstrapData","AdminDocsUrls","FormSelect","Option","ThemeEditor","useWatch","initialSelectedTheme","useThemeSelector","setSelectedThemeId","selectedTheme","setSelectedTheme","Accordion","AccordionItem","RadiusSelector","watch","key","hidePill","formKey","currentValue"],"mappings":"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"}