{"version":3,"file":"drive-settings-CTKD6yCC.js","sources":["../../../resources/client/admin/settings/drive-settings.tsx"],"sourcesContent":["import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FormRadio} from '@ui/forms/radio-group/radio';\nimport {FormRadioGroup} from '@ui/forms/radio-group/radio-group';\nimport {FormSelect} from '@ui/forms/select/select';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {useForm, useWatch} from 'react-hook-form';\n\nexport function Component() {\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      client: {\n        drive: {\n          default_view: data.client.drive?.default_view ?? 'list',\n          send_share_notification:\n            data.client.drive?.send_share_notification ?? false,\n          default_available_space:\n            data.client.drive?.default_available_space ?? 1024 * 1024 * 1024,\n          direct_links: data.client.drive?.direct_links ?? false,\n          copy_link_default:\n            data.client.drive?.copy_link_default ?? 'shareable',\n        },\n        share: {\n          suggest_emails: data.client.share?.suggest_emails ?? false,\n        },\n      },\n    },\n  });\n\n  return (\n    <AdminSettingsLayout form={form} title={<Trans message=\"Drive\" />}>\n      <div className=\"space-y-24\">\n        <ViewModePanel />\n        <ShareNotificationsPanel />\n        <EmailSuggestionPanel />\n        <DefaultAvailableSpacePanel />\n        <DirectLinkPanel />\n        <CopyLinkDefaultPanel />\n      </div>\n    </AdminSettingsLayout>\n  );\n}\n\nfunction ViewModePanel() {\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Default view mode\" />}\n      description={\n        <Trans message=\"Configure which view mode should be used by default in the drive user dashboard.\" />\n      }\n    >\n      <FormRadioGroup\n        required\n        name=\"client.drive.default_view\"\n        orientation=\"vertical\"\n      >\n        <FormRadio value=\"list\">\n          <Trans message=\"List\" />\n        </FormRadio>\n        <FormRadio value=\"grid\">\n          <Trans message=\"Grid\" />\n        </FormRadio>\n      </FormRadioGroup>\n    </SettingsPanel>\n  );\n}\n\nfunction ShareNotificationsPanel() {\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Share notifications\" />}\n      description={\n        <Trans message=\"Send a notification to user when a file or folder is shared with them.\" />\n      }\n    >\n      <FormSwitch name=\"client.drive.send_share_notification\">\n        <Trans message=\"Enable notifications\" />\n      </FormSwitch>\n    </SettingsPanel>\n  );\n}\n\nfunction EmailSuggestionPanel() {\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Email suggestions\" />}\n      description={\n        <Trans message=\"Suggest email address of existing users when sharing a file or folder.\" />\n      }\n    >\n      <FormSwitch name=\"client.share.suggest_emails\">\n        <Trans message=\"Enable suggestions\" />\n      </FormSwitch>\n    </SettingsPanel>\n  );\n}\n\nfunction DefaultAvailableSpacePanel() {\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Default available space\" />}\n      description={\n        <Trans message=\"You can override this by editing permissions for a specific user, role or subscription plan in admin area.\" />\n      }\n    >\n      <FormTextField\n        type=\"number\"\n        name=\"client.drive.default_available_space\"\n        endAdornment={\n          <span className=\"pr-12 text-xs text-muted\">\n            <Trans message=\"Bytes\" />\n          </span>\n        }\n      />\n    </SettingsPanel>\n  );\n}\n\nfunction DirectLinkPanel() {\n  const {base_url} = useSettings();\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Direct links\" />}\n      description={\n        <Trans\n          message=\"These links will show file content directly, instead of it being embedded inside share page.\"\n          values={{baseUrl: base_url}}\n        />\n      }\n    >\n      <FormSwitch name=\"client.drive.direct_links\">\n        <Trans message=\"Allow copying direct links\" />\n      </FormSwitch>\n    </SettingsPanel>\n  );\n}\n\nfunction CopyLinkDefaultPanel() {\n  const directLinksEnabled = useWatch({name: 'client.drive.direct_links'});\n  if (!directLinksEnabled) {\n    return null;\n  }\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Default link to copy\" />}\n      description={\n        <Trans message=\"Whether shareable or direct link should be copied to clipboard by default.\" />\n      }\n    >\n      <FormSelect\n        label={<Trans message=\"Copy link default\" />}\n        labelDisplay=\"hidden\"\n        name=\"client.drive.copy_link_default\"\n      >\n        <Item value=\"shareable\">\n          <Trans message=\"Shareable link\" />\n        </Item>\n        <Item value=\"direct\">\n          <Trans message=\"Direct link\" />\n        </Item>\n      </FormSelect>\n    </SettingsPanel>\n  );\n}\n"],"names":["Component","data","useAdminSettings","form","useForm","_a","_b","_c","_d","_e","_f","jsx","AdminSettingsLayout","Trans","jsxs","ViewModePanel","ShareNotificationsPanel","EmailSuggestionPanel","DefaultAvailableSpacePanel","DirectLinkPanel","CopyLinkDefaultPanel","SettingsPanel","FormRadioGroup","FormRadio","FormSwitch","FormTextField","base_url","useSettings","useWatch","FormSelect","Item"],"mappings":"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"}