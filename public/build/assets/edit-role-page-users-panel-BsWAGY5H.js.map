{"version":3,"file":"edit-role-page-users-panel-BsWAGY5H.js","sources":["../../../common/foundation/resources/client/users/select-user-dialog.tsx","../../../common/foundation/resources/client/admin/roles/requests/use-add-users-to-role.ts","../../../common/foundation/resources/client/admin/roles/requests/use-remove-users-from-role.ts","../../../common/foundation/resources/client/admin/roles/crupdate-role-page/edit-role-page-users-panel.tsx"],"sourcesContent":["import {Avatar} from '@ui/avatar/avatar';\nimport {Button} from '@ui/buttons/button';\nimport {TextField} from '@ui/forms/input-field/text-field/text-field';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {SearchIcon} from '@ui/icons/material/Search';\nimport {IllustratedMessage} from '@ui/images/illustrated-message';\nimport {SvgImage} from '@ui/images/svg-image';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {NormalizedModel} from '@ui/types/normalized-model';\nimport clsx from 'clsx';\nimport {useState} from 'react';\nimport teamSvg from '../admin/roles/team.svg';\nimport {useNormalizedModels} from '../ui/normalized-model/use-normalized-models';\n\ninterface SingleProps<T extends NormalizedModel> {\n  multiple?: false;\n}\n\ninterface MultipleProps<T extends NormalizedModel> {\n  multiple?: true;\n}\n\nexport function SelectUserDialog<T extends NormalizedModel>({\n  multiple = false,\n  endpoint = 'normalized-models/user',\n}: (MultipleProps<T> | SingleProps<T>) & {endpoint?: string}) {\n  const {close} = useDialogContext();\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const {trans} = useTrans();\n  const query = useNormalizedModels(endpoint, {\n    query: searchTerm,\n    perPage: 14,\n  });\n  const users = query.data?.results || [];\n  const [selectedUsers, setSelectedUsers] = useState<T[]>([]);\n\n  const emptyStateMessage = (\n    <IllustratedMessage\n      className=\"pt-20\"\n      size=\"sm\"\n      title={<Trans message=\"No matching users\" />}\n      description={<Trans message=\"Try another search query\" />}\n      image={<SvgImage src={teamSvg} />}\n    />\n  );\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        {multiple ? (\n          <Trans message=\"Select users\" />\n        ) : (\n          <Trans message=\"Select a user\" />\n        )}\n      </DialogHeader>\n      <DialogBody>\n        <TextField\n          autoFocus\n          size=\"sm\"\n          className=\"mb-20\"\n          startAdornment={<SearchIcon />}\n          placeholder={trans(message('Search for user by name or email'))}\n          value={searchTerm}\n          onChange={e => {\n            setSearchTerm(e.target.value);\n          }}\n        />\n        {!query.isLoading && !users.length && emptyStateMessage}\n        <div className=\"grid grid-cols-2 gap-x-10\">\n          {users.map(user => (\n            <UserListItem\n              isSelected={!!selectedUsers.find(u => u.id === user.id)}\n              key={user.id}\n              user={user}\n              onSelected={user => {\n                if (multiple) {\n                  if (selectedUsers.find(u => u.id === user.id)) {\n                    setSelectedUsers(\n                      selectedUsers.filter(u => u.id !== user.id),\n                    );\n                  } else {\n                    setSelectedUsers([...selectedUsers, user as T]);\n                  }\n                } else {\n                  close(user);\n                }\n              }}\n            />\n          ))}\n        </div>\n      </DialogBody>\n      {multiple && (\n        <DialogFooter>\n          <Button onClick={() => close()}>\n            <Trans message=\"Cancel\" />\n          </Button>\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => close(selectedUsers)}\n            disabled={!selectedUsers.length}\n          >\n            <Trans message=\"Select\" />\n          </Button>\n        </DialogFooter>\n      )}\n    </Dialog>\n  );\n}\n\ninterface UserListItemProps {\n  isSelected: boolean;\n  user: NormalizedModel;\n  onSelected: (user: NormalizedModel) => void;\n}\nfunction UserListItem({user, onSelected, isSelected}: UserListItemProps) {\n  return (\n    <div\n      key={user.id}\n      className={clsx(\n        'flex items-center gap-10 rounded-panel border-1 p-10 outline-none ring-offset-4 focus-visible:ring',\n        isSelected\n          ? 'border-primary bg-primary/5 hover:bg-primary/10'\n          : 'border-transparent hover:bg-hover',\n      )}\n      role=\"button\"\n      tabIndex={0}\n      onClick={() => {\n        onSelected(user);\n      }}\n      onKeyDown={e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          onSelected(user);\n        }\n      }}\n    >\n      <Avatar src={user.image} label={user.name ?? 'Visitor'} circle />\n      <div className=\"overflow-hidden\">\n        <div className=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n          {user.name ?? <Trans message=\"Visitor\" />}\n        </div>\n        <div className=\"overflow-hidden text-ellipsis text-muted\">\n          {user.description}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import {Role} from '@common/auth/role';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  userIds: number[];\n}\n\nexport function useAddUsersToRole(role: Role) {\n  return useMutation({\n    mutationFn: ({userIds}: Payload) =>\n      addUsersToRole({userIds, roleId: role.id}),\n    onSuccess: (response, payload) => {\n      toast(\n        message('Assigned [one 1 user|other :count users] to :role', {\n          values: {count: payload.userIds.length, role: role.name},\n        }),\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction addUsersToRole({\n  roleId,\n  userIds,\n}: Payload & {roleId: number}): Promise<Response> {\n  return apiClient\n    .post(`roles/${roleId}/add-users`, {userIds})\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {toast} from '@ui/toast/toast';\nimport {message} from '@ui/i18n/message';\nimport {Role} from '@common/auth/role';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  userIds: number[];\n}\n\nexport function useRemoveUsersFromRole(role: Role) {\n  return useMutation({\n    mutationFn: ({userIds}: Payload) =>\n      removeUsersFromRole({userIds, roleId: role.id}),\n    onSuccess: (response, payload) => {\n      toast(\n        message('Removed [one 1 user|other :count users] from “{role}“', {\n          values: {count: payload.userIds.length, role: role.name},\n        }),\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction removeUsersFromRole({\n  roleId,\n  userIds,\n}: Payload & {roleId: number}): Promise<Response> {\n  return apiClient\n    .post(`roles/${roleId}/remove-users`, {userIds})\n    .then(r => r.data);\n}\n","import {commonAdminQueries} from '@common/admin/common-admin-queries';\nimport {validateUserIndexSearch} from '@common/admin/users/validate-user-index-search';\nimport {Role} from '@common/auth/role';\nimport {GlobalLoadingProgress} from '@common/core/global-loading-progress';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {DataTableHeader} from '@common/datatable/data-table-header';\nimport {DataTablePaginationFooter} from '@common/datatable/data-table-pagination-footer';\nimport {useDatatableSearchParams} from '@common/datatable/filters/utils/use-datatable-search-params';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {DatatablePageScrollContainer} from '@common/datatable/page/datatable-page-with-header-layout';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\nimport {useDatatableQuery} from '@common/datatable/requests/use-datatable-query';\nimport {queryClient} from '@common/http/query-client';\nimport {useRequiredParams} from '@common/ui/navigation/use-required-params';\nimport {Table} from '@common/ui/tables/table';\nimport {SelectUserDialog} from '@common/users/select-user-dialog';\nimport {keepPreviousData, useSuspenseQuery} from '@tanstack/react-query';\nimport {Button} from '@ui/buttons/button';\nimport {FormattedDate} from '@ui/i18n/formatted-date';\nimport {Trans} from '@ui/i18n/trans';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {User} from '@ui/types/user';\nimport {useState} from 'react';\nimport {useAddUsersToRole} from '../requests/use-add-users-to-role';\nimport {useRemoveUsersFromRole} from '../requests/use-remove-users-from-role';\nimport teamSvg from '../team.svg';\n\nconst columns: ColumnConfig<User>[] = [\n  {\n    key: 'email',\n    allowsSorting: true,\n    sortingKey: 'email',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"User\" />,\n    body: user => {\n      return (\n        <NameWithAvatar\n          image={user.image}\n          label={user.name ?? <Trans message=\"Visitor\" />}\n          description={user.email}\n          alwaysShowAvatar\n          avatarLabel=\"Visitor\"\n        />\n      );\n    },\n  },\n  {\n    key: 'created_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Assigned at\" />,\n    body: user => <FormattedDate date={user.created_at} />,\n  },\n];\n\nexport function Component() {\n  const {roleId} = useRequiredParams(['roleId']);\n  const roleQuery = useSuspenseQuery(commonAdminQueries.roles.get(roleId));\n\n  if (roleQuery.data.role.guests || roleQuery.data.role.type === 'workspace') {\n    return (\n      <div className=\"pb-10 pt-30\">\n        <DataTableEmptyStateMessage\n          image={teamSvg}\n          title={<Trans message=\"Users can't be assigned to this role\" />}\n        />\n      </div>\n    );\n  }\n\n  return <UsersTable role={roleQuery.data.role} />;\n}\n\ninterface UsersTableProps {\n  role: Role;\n}\nfunction UsersTable({role}: UsersTableProps) {\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const {\n    searchParams,\n    sortDescriptor,\n    mergeIntoSearchParams,\n    setSearchQuery,\n    isFiltering,\n  } = useDatatableSearchParams(validateUserIndexSearch);\n\n  const query = useDatatableQuery({\n    ...commonAdminQueries.users.index({...searchParams, roleId: `${role.id}`}),\n    placeholderData: keepPreviousData,\n  });\n\n  return (\n    <div>\n      <GlobalLoadingProgress query={query} />\n      <DataTableHeader\n        searchValue={searchParams.query}\n        onSearchChange={setSearchQuery}\n        actions={<AssignUserAction role={role} />}\n        selectedItems={selectedIds}\n        selectedActions={\n          <RemoveUsersAction role={role} selectedIds={selectedIds} />\n        }\n      />\n      <DatatablePageScrollContainer>\n        <Table\n          columns={columns}\n          data={query.items}\n          sortDescriptor={sortDescriptor}\n          onSortChange={mergeIntoSearchParams}\n          enableSelection\n          selectedRows={selectedIds}\n          onSelectionChange={ids => setSelectedIds(ids as number[])}\n        />\n        {query.isEmpty ? (\n          <DataTableEmptyStateMessage\n            image={teamSvg}\n            isFiltering={isFiltering}\n            title={\n              <Trans message=\"No users have been assigned to this role yet\" />\n            }\n            filteringTitle={<Trans message=\"No matching users\" />}\n          />\n        ) : null}\n        <DataTablePaginationFooter\n          query={query}\n          onPageChange={page => mergeIntoSearchParams({page})}\n          onPerPageChange={perPage => mergeIntoSearchParams({perPage})}\n        />\n      </DatatablePageScrollContainer>\n    </div>\n  );\n}\n\ninterface AssignUserActionProps {\n  role: Role;\n}\nfunction AssignUserAction({role}: AssignUserActionProps) {\n  const addUsers = useAddUsersToRole(role);\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={user => {\n        if (user) {\n          addUsers.mutate(\n            {userIds: [user.id as number]},\n            {\n              onSuccess: () => {\n                queryClient.invalidateQueries({\n                  queryKey: DatatableDataQueryKey('users', {\n                    roleId: `${role.id}`,\n                  }),\n                });\n              },\n            },\n          );\n        }\n      }}\n    >\n      <Button variant=\"flat\" color=\"primary\" disabled={addUsers.isPending}>\n        <Trans message=\"Assign user\" />\n      </Button>\n      <SelectUserDialog />\n    </DialogTrigger>\n  );\n}\n\ntype RemoveUsersActionProps = {\n  role: Role;\n  selectedIds: number[];\n};\nexport function RemoveUsersAction({role, selectedIds}: RemoveUsersActionProps) {\n  const removeUsers = useRemoveUsersFromRole(role);\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          removeUsers.mutate(\n            {userIds: selectedIds},\n            {\n              onSuccess: () => {\n                queryClient.invalidateQueries({\n                  queryKey: commonAdminQueries.users.invalidateKey,\n                });\n              },\n            },\n          );\n        }\n      }}\n    >\n      <Button variant=\"flat\" color=\"danger\" disabled={removeUsers.isPending}>\n        <Trans message=\"Remove users\" />\n      </Button>\n      <ConfirmationDialog\n        title={<Trans message=\"Remove users from role?\" />}\n        body={\n          <Trans message=\"This will permanently remove the users from this role.\" />\n        }\n        confirm={<Trans message=\"Remove\" />}\n        isDanger\n      />\n    </DialogTrigger>\n  );\n}\n"],"names":["SelectUserDialog","multiple","endpoint","close","useDialogContext","searchTerm","setSearchTerm","useState","trans","useTrans","query","useNormalizedModels","users","_a","selectedUsers","setSelectedUsers","emptyStateMessage","jsx","IllustratedMessage","Trans","SvgImage","teamSvg","jsxs","Dialog","DialogHeader","DialogBody","TextField","SearchIcon","message","e","user","UserListItem","u","DialogFooter","Button","onSelected","isSelected","clsx","Avatar","useAddUsersToRole","role","useMutation","userIds","addUsersToRole","response","payload","toast","err","showHttpErrorToast","roleId","apiClient","useRemoveUsersFromRole","removeUsersFromRole","columns","NameWithAvatar","FormattedDate","Component","useRequiredParams","roleQuery","useSuspenseQuery","commonAdminQueries","DataTableEmptyStateMessage","UsersTable","selectedIds","setSelectedIds","searchParams","sortDescriptor","mergeIntoSearchParams","setSearchQuery","isFiltering","useDatatableSearchParams","validateUserIndexSearch","useDatatableQuery","keepPreviousData","GlobalLoadingProgress","DataTableHeader","AssignUserAction","RemoveUsersAction","DatatablePageScrollContainer","Table","ids","DataTablePaginationFooter","page","perPage","addUsers","DialogTrigger","queryClient","DatatableDataQueryKey","removeUsers","isConfirmed","ConfirmationDialog"],"mappings":"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"}