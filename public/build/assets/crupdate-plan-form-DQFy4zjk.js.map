{"version":3,"file":"crupdate-plan-form-DQFy4zjk.js","sources":["../../../common/foundation/resources/client/admin/plans/crupdate-plan-page/billing-period-presets.ts","../../../common/foundation/resources/client/ui/library/utils/intl/currencies.ts","../../../common/foundation/resources/client/admin/plans/crupdate-plan-page/price-form.tsx","../../../common/foundation/resources/client/admin/plans/crupdate-plan-page/crupdate-plan-form.tsx"],"sourcesContent":["import {message} from '@ui/i18n/message';\n\nexport const BillingPeriodPresets = [\n  {\n    key: 'day1',\n    label: message('Daily'),\n    interval: 'day',\n    interval_count: 1,\n  },\n  {\n    key: 'week1',\n    label: message('Weekly'),\n    interval: 'week',\n    interval_count: 1,\n  },\n  {\n    key: 'month1',\n    label: message('Monthly'),\n    interval: 'month',\n    interval_count: 1,\n  },\n  {\n    key: 'month3',\n    label: message('Every 3 months'),\n    interval: 'month',\n    interval_count: 3,\n  },\n  {\n    key: 'month6',\n    label: message('Every 6 months'),\n    interval: 'month',\n    interval_count: 6,\n  },\n  {\n    key: 'year1',\n    label: message('Yearly'),\n    interval: 'year',\n    interval_count: 1,\n  },\n  {\n    key: 'custom',\n    label: message('Custom'),\n    interval: null,\n    interval_count: null,\n  },\n];\n","import memoize from 'nano-memoize';\n\nconst primary = [\n  'USD',\n  'EUR',\n  'JPY',\n  'GBP',\n  'AUD',\n  'CAD',\n  'CHF',\n  'CNY',\n  'HKD',\n  'NZD',\n];\n\nexport const getCurrencyList = memoize((lang = 'en') => {\n  const codes = Intl.supportedValuesOf('currency');\n  const allCurrencies = codes.map(code => ({\n    code,\n    name: new Intl.DisplayNames([lang], {type: 'currency'}).of(code),\n  }));\n\n  const primaryCurrencies = allCurrencies.filter(currency =>\n    primary.includes(currency.code),\n  );\n\n  const otherCurrencies = allCurrencies.filter(\n    currency => !primary.includes(currency.code),\n  );\n\n  return [...primaryCurrencies, ...otherCurrencies];\n});\n","import {BillingPeriodPresets} from '@common/admin/plans/crupdate-plan-page/billing-period-presets';\nimport {Price} from '@common/billing/price';\nimport {Product} from '@common/billing/product';\nimport {Button} from '@ui/buttons/button';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FormSelect, Select} from '@ui/forms/select/select';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {getCurrencyList} from '@ui/utils/intl/currencies';\nimport {Fragment, useState} from 'react';\nimport {useFormContext} from 'react-hook-form';\n\ninterface PriceFormProps {\n  index: number;\n  onRemovePrice: () => void;\n}\nexport function PriceForm({index, onRemovePrice}: PriceFormProps) {\n  const {trans} = useTrans();\n  const currencies = getCurrencyList();\n  const {watch, getValues} = useFormContext<Product>();\n  const isNewProduct = !watch('id');\n  const isNewPrice = watch(`prices.${index}.id`) == null;\n  const subscriberCount = watch(`prices.${index}.subscriptions_count`) || 0;\n\n  // select billing period preset based on price \"interval\" and \"interval_count\"\n  const [billingPeriodPreset, setBillingPeriodPreset] = useState(() => {\n    const interval = getValues(`prices.${index}.interval`);\n    const intervalCount = getValues(`prices.${index}.interval_count`);\n    const preset = BillingPeriodPresets.find(\n      p => p.key === `${interval}${intervalCount}`,\n    );\n    return preset ? preset.key : 'custom';\n  });\n\n  const allowPriceChanges = isNewProduct || isNewPrice || !subscriberCount;\n\n  return (\n    <Fragment>\n      {!allowPriceChanges && (\n        <p className=\"mb-20 max-w-500 text-sm text-muted\">\n          <Trans\n            message=\"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.\"\n            values={{count: subscriberCount}}\n          />\n        </p>\n      )}\n\n      <FormTextField\n        required\n        disabled={!allowPriceChanges}\n        label={<Trans message=\"Amount\" />}\n        type=\"number\"\n        min={0.1}\n        step={0.01}\n        name={`prices.${index}.amount`}\n        className=\"mb-20\"\n      />\n      <FormSelect\n        required\n        disabled={!allowPriceChanges}\n        label={<Trans message=\"Currency\" />}\n        name={`prices.${index}.currency`}\n        items={currencies}\n        showSearchField\n        searchPlaceholder={trans(message('Search currencies'))}\n        selectionMode=\"single\"\n        className=\"mb-20\"\n      >\n        {item => (\n          <Item\n            value={item.code}\n            key={item.code}\n          >{`${item.code}: ${item.name}`}</Item>\n        )}\n      </FormSelect>\n      <BillingPeriodSelect\n        disabled={!allowPriceChanges}\n        index={index}\n        value={billingPeriodPreset}\n        onValueChange={setBillingPeriodPreset}\n      />\n      {billingPeriodPreset === 'custom' && (\n        <CustomBillingPeriodField disabled={!allowPriceChanges} index={index} />\n      )}\n      <div className=\"text-right\">\n        <Button\n          size=\"xs\"\n          variant=\"outline\"\n          color=\"danger\"\n          disabled={!allowPriceChanges}\n          onClick={() => {\n            onRemovePrice();\n          }}\n        >\n          <Trans message=\"Delete price\" />\n        </Button>\n      </div>\n    </Fragment>\n  );\n}\n\ninterface BillingPeriodSelectProps {\n  index: number;\n  value: string;\n  onValueChange: (value: string) => void;\n  disabled: boolean;\n}\nfunction BillingPeriodSelect({\n  index,\n  value,\n  onValueChange,\n  disabled,\n}: BillingPeriodSelectProps) {\n  const {setValue: setFormValue} = useFormContext<Product>();\n\n  return (\n    <Select\n      label={<Trans message=\"Billing period\" />}\n      disabled={disabled}\n      className=\"mb-20\"\n      selectionMode=\"single\"\n      selectedValue={value}\n      onSelectionChange={value => {\n        onValueChange(value as string);\n        if (value === 'custom') {\n        } else {\n          const preset = BillingPeriodPresets.find(p => p.key === value);\n          if (preset) {\n            setFormValue(\n              `prices.${index}.interval`,\n              preset.interval as Price['interval'],\n            );\n            setFormValue(\n              `prices.${index}.interval_count`,\n              preset.interval_count as number,\n            );\n          }\n        }\n      }}\n    >\n      {BillingPeriodPresets.map(preset => (\n        <Item key={preset.key} value={preset.key}>\n          <Trans {...preset.label} />\n        </Item>\n      ))}\n    </Select>\n  );\n}\n\ninterface CustomBillingPeriodFieldProps {\n  index: number;\n  disabled: boolean;\n}\nfunction CustomBillingPeriodField({\n  index,\n  disabled,\n}: CustomBillingPeriodFieldProps) {\n  const {watch} = useFormContext<Product>();\n  const interval = watch(`prices.${index}.interval`);\n  let maxIntervalCount: number;\n\n  if (interval === 'day') {\n    maxIntervalCount = 365;\n  } else if (interval === 'week') {\n    maxIntervalCount = 52;\n  } else {\n    maxIntervalCount = 12;\n  }\n\n  return (\n    <div className=\"flex w-min rounded border\">\n      <div className=\"flex items-center px-18 text-sm\">\n        <Trans message=\"Every\" />\n      </div>\n      <FormTextField\n        inputShadow=\"shadow-none\"\n        inputBorder=\"border-none\"\n        className=\"w-80 border-l border-r\"\n        name={`prices.${index}.interval_count`}\n        type=\"number\"\n        min={1}\n        max={maxIntervalCount}\n        disabled={disabled}\n        required\n      />\n      <FormSelect\n        inputShadow=\"shadow-none\"\n        inputBorder=\"border-none\"\n        name={`prices.${index}.interval`}\n        selectionMode=\"single\"\n        disabled={disabled}\n      >\n        <Item value=\"day\">\n          <Trans message=\"Days\" />\n        </Item>\n        <Item value=\"week\">\n          <Trans message=\"Weeks\" />\n        </Item>\n        <Item value=\"month\">\n          <Trans message=\"Months\" />\n        </Item>\n      </FormSelect>\n    </div>\n  );\n}\n","import {FormPermissionSelector} from '@common/auth/ui/permission-selector';\nimport {FormattedPrice} from '@common/billing/formatted-price';\nimport {Accordion, AccordionItem} from '@ui/accordion/accordion';\nimport {Button} from '@ui/buttons/button';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FormSelect} from '@ui/forms/select/select';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\nimport {AddIcon} from '@ui/icons/material/Add';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {Fragment, ReactNode} from 'react';\nimport {useFieldArray, useFormContext} from 'react-hook-form';\nimport {CreateProductPayload} from '../requests/use-create-product';\nimport {PriceForm} from './price-form';\n\nexport function CrupdatePlanForm() {\n  return (\n    <Fragment>\n      <FormTextField\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        className=\"mb-20\"\n        required\n        autoFocus\n      />\n      <FormTextField\n        name=\"description\"\n        label={<Trans message=\"Description\" />}\n        className=\"mb-20\"\n        inputElementType=\"textarea\"\n        rows={4}\n      />\n      <FormSelect\n        name=\"position\"\n        selectionMode=\"single\"\n        label={<Trans message=\"Position in pricing table\" />}\n        className=\"mb-20\"\n      >\n        <Item value={0}>\n          <Trans message=\"First\" />\n        </Item>\n        <Item value={1}>\n          <Trans message=\"Second\" />\n        </Item>\n        <Item value={2}>\n          <Trans message=\"Third\" />\n        </Item>\n        <Item value={3}>\n          <Trans message=\"Fourth\" />\n        </Item>\n        <Item value={4}>\n          <Trans message=\"Fifth\" />\n        </Item>\n      </FormSelect>\n      <FormSwitch\n        name=\"recommended\"\n        className=\"mb-20\"\n        description={\n          <Trans message=\"Plan will be displayed more prominently on pricing page.\" />\n        }\n      >\n        <Trans message=\"Recommend\" />\n      </FormSwitch>\n      <FormSwitch\n        name=\"hidden\"\n        className=\"mb-20\"\n        description={\n          <Trans message=\"Plan will not be shown on pricing or upgrade pages.\" />\n        }\n      >\n        <Trans message=\"Hidden\" />\n      </FormSwitch>\n      <FormSwitch\n        name=\"free\"\n        className=\"mb-20\"\n        description={\n          <Trans message=\"Will be assigned to all users, if they are not subscribed already.\" />\n        }\n      >\n        <Trans message=\"Free\" />\n      </FormSwitch>\n      <Header>\n        <Trans message=\"Feature list\" />\n      </Header>\n      <FeatureListForm />\n      <PricingListForm />\n      <Header>\n        <Trans message=\"Permissions\" />\n      </Header>\n      <FormPermissionSelector name=\"permissions\" />\n    </Fragment>\n  );\n}\n\ninterface HeaderProps {\n  children: ReactNode;\n}\nfunction Header({children}: HeaderProps) {\n  return <h2 className=\"mb-20 mt-40 text-base font-semibold\">{children}</h2>;\n}\n\nfunction FeatureListForm() {\n  const {fields, append, remove} = useFieldArray<CreateProductPayload>({\n    name: 'feature_list',\n  });\n  return (\n    <div>\n      {fields.map((field, index) => {\n        return (\n          <div key={field.id} className=\"mb-10 flex gap-10\">\n            <FormTextField\n              name={`feature_list.${index}.value`}\n              size=\"sm\"\n              className=\"flex-auto\"\n            />\n            <IconButton\n              size=\"sm\"\n              color=\"primary\"\n              className=\"flex-shrink-0\"\n              onClick={() => {\n                remove(index);\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </div>\n        );\n      })}\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        size=\"xs\"\n        onClick={() => {\n          append({value: ''});\n        }}\n      >\n        <Trans message=\"Add another line\" />\n      </Button>\n    </div>\n  );\n}\n\nfunction PricingListForm() {\n  const {\n    watch,\n    formState: {errors},\n  } = useFormContext<CreateProductPayload>();\n  const {fields, append, remove} = useFieldArray<\n    CreateProductPayload,\n    'prices',\n    'key'\n  >({\n    name: 'prices',\n    keyName: 'key',\n  });\n\n  // if plan is marked as free, hide pricing form\n  if (watch('free')) {\n    return null;\n  }\n\n  return (\n    <Fragment>\n      <Header>\n        <Trans message=\"Pricing\" />\n      </Header>\n      {errors.prices?.message && (\n        <div className=\"mb-20 text-sm text-danger\">{errors.prices.message}</div>\n      )}\n      <Accordion variant=\"outline\" className=\"mb-10\">\n        {fields.map((field, index) => (\n          <AccordionItem\n            label={<FormattedPrice price={field} />}\n            key={field.key}\n          >\n            <PriceForm\n              index={index}\n              onRemovePrice={() => {\n                remove(index);\n              }}\n            />\n          </AccordionItem>\n        ))}\n      </Accordion>\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        size=\"xs\"\n        onClick={() => {\n          append({\n            currency: 'USD',\n            amount: 1,\n            interval_count: 1,\n            interval: 'month',\n          });\n        }}\n      >\n        <Trans message=\"Add another price\" />\n      </Button>\n    </Fragment>\n  );\n}\n"],"names":["BillingPeriodPresets","message","primary","getCurrencyList","memoize","lang","allCurrencies","code","primaryCurrencies","currency","otherCurrencies","PriceForm","index","onRemovePrice","trans","useTrans","currencies","watch","getValues","useFormContext","isNewProduct","isNewPrice","subscriberCount","billingPeriodPreset","setBillingPeriodPreset","useState","interval","intervalCount","preset","p","allowPriceChanges","Fragment","jsx","Trans","FormTextField","FormSelect","item","Item","BillingPeriodSelect","CustomBillingPeriodField","Button","value","onValueChange","disabled","setFormValue","Select","maxIntervalCount","jsxs","CrupdatePlanForm","FormSwitch","Header","FeatureListForm","PricingListForm","FormPermissionSelector","children","fields","append","remove","useFieldArray","field","IconButton","CloseIcon","AddIcon","errors","_a","Accordion","AccordionItem","FormattedPrice"],"mappings":"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"}