{"version":3,"file":"timestamp-filters-C0zLPmIY.js","sources":["../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list-control.tsx","../../../common/foundation/resources/client/datatable/filters/filter-list/filter-list.tsx","../../../common/foundation/resources/client/datatable/filters/timestamp-filters.ts"],"sourcesContent":["import {Button} from '@ui/buttons/button';\nimport {Trans} from '@ui/i18n/trans';\nimport {KeyboardArrowDownIcon} from '@ui/icons/material/KeyboardArrowDown';\nimport clsx from 'clsx';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {BackendFilter, FilterControlType} from '../backend-filter';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.control.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'mr-8 border-r border-r-primary-light pr-8',\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import { Button } from '@ui/buttons/button';\nimport { Form } from '@ui/forms/form';\nimport { Trans } from '@ui/i18n/trans';\nimport { Dialog } from '@ui/overlays/dialog/dialog';\nimport { DialogBody } from '@ui/overlays/dialog/dialog-body';\nimport { useDialogContext } from '@ui/overlays/dialog/dialog-context';\nimport { DialogFooter } from '@ui/overlays/dialog/dialog-footer';\nimport { DialogHeader } from '@ui/overlays/dialog/dialog-header';\nimport { DialogTrigger } from '@ui/overlays/dialog/dialog-trigger';\nimport { ReactNode } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { FilterItemFormValue } from '../add-filter-dialog';\nimport { FilterListControlProps } from './filter-list-control';\nimport { FilterListTriggerButton } from './filter-list-trigger-button';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps,\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody className=\"max-h-288\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"mb-14 text-xs text-muted\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {ChipFieldFilterPanel} from '@common/datatable/filters/panels/chip-field-filter-panel';\nimport {useNormalizedModel} from '@common/ui/normalized-model/use-normalized-model';\nimport {Avatar} from '@ui/avatar/avatar';\nimport {DateRangePresets} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {AbsoluteDateRange} from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FormattedDateTimeRange} from '@ui/i18n/formatted-date-time-range';\nimport {FormattedNumber} from '@ui/i18n/formatted-number';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {Skeleton} from '@ui/skeleton/skeleton';\nimport {NormalizedModel} from '@ui/types/normalized-model';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {\n  BackendFilter,\n  CustomFilterControl,\n  DatePickerFilterControl,\n  FilterBooleanToggleControl,\n  FilterChipFieldControl,\n  FilterControl,\n  FilterControlType,\n  FilterNumberInputControl,\n  FilterOperator,\n  FilterSelectControl,\n  FilterSelectModelControl,\n  FilterTextInputControl,\n} from '../backend-filter';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {DateRangeFilterPanel} from '../panels/date-range-filter-panel';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\n\nexport interface FilterListControlProps<T = unknown, E = FilterControl> {\n  filter: BackendFilter<E>;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any, any>) {\n  switch (props.filter.control.type) {\n    case FilterControlType.DateRangePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select:\n      return <SelectControl {...props} />;\n    case FilterControlType.ChipField:\n      return <ChipFieldControl {...props} />;\n    case FilterControlType.Input:\n      return <InputControl {...props} />;\n    case FilterControlType.SelectModel:\n      return <SelectModelControl {...props} />;\n    case FilterControlType.Custom:\n      const Control = (props.filter.control as CustomFilterControl).listItem;\n      return <Control {...props} />;\n    default:\n      return null;\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<\n    Required<AbsoluteDateRange>,\n    DatePickerFilterControl\n  >,\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateRangeFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<\n  FilterBooleanToggleControl['defaultValue'],\n  FilterBooleanToggleControl\n>) {\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: filter.control.defaultValue});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(\n  props: FilterListControlProps<Key, FilterSelectControl>,\n) {\n  const {filter, value} = props;\n  const option = filter.control.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        option ? (\n          typeof option.label === 'string' ? (\n            option.label\n          ) : (\n            <Trans {...option.label} />\n          )\n        ) : null\n      }\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction ChipFieldControl(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  const label = props.filter.control.autocompleteEndpoint ? (\n    props.value.map(v => (v as unknown as NormalizedModel).name).join(', ')\n  ) : (\n    <MultipleValues {...props} />\n  );\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<ChipFieldFilterPanel filter={props.filter} />}\n    />\n  );\n}\n\nfunction MultipleValues(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  const {trans} = useTrans();\n  const {filter, value} = props;\n\n  const options = value.map(v =>\n    filter.control.options?.find(o => o.key === v),\n  );\n  const maxShownCount = 3;\n  const notShownCount = value.length - maxShownCount;\n\n  // translate names, add commas and limit to 3\n  const names = (\n    <Fragment>\n      {options\n        .filter(Boolean)\n        .slice(0, maxShownCount)\n        .map((o, i) => {\n          let name = '';\n          if (i !== 0) {\n            name += ', ';\n          }\n          name += typeof o!.label === 'string' ? o!.label : trans(o!.label);\n          return name;\n        })}\n    </Fragment>\n  );\n\n  // indicate that there are some names not shown\n  return notShownCount > 0 ? (\n    <Trans\n      message=\":names + :count more\"\n      values={{names: names, count: notShownCount}}\n    />\n  ) : (\n    names\n  );\n}\n\nfunction InputControl(\n  props: FilterListControlProps<\n    string,\n    FilterTextInputControl | FilterNumberInputControl\n  >,\n) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  const formattedValue =\n    filter.control.inputType === 'number' ? (\n      <FormattedNumber value={value as any} />\n    ) : (\n      value\n    );\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {formattedValue}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(\n  props: FilterListControlProps<string, FilterSelectModelControl>,\n) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(\n    filter.control.endpoint\n      ? `${filter.control.endpoint}/${value}`\n      : `normalized-models/${filter.control.model}/${value}`,\n    undefined,\n    {enabled: !!value},\n  );\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar\n        size=\"xs\"\n        src={data?.model.image}\n        label={data?.model.name}\n        className=\"mr-6\"\n      />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n  wrap?: boolean;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n  wrap,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters,\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div\n      className={clsx(\n        'flex flex-shrink-0 items-center gap-6',\n        className,\n        wrap ? 'flex-wrap' : 'overflow-x-auto',\n      )}\n    >\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key);\n\n        if (!filter) return null;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key} className=\"flex items-center\">\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey != null ? field.valueKey : field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import {\n  DateRangePreset,\n  DateRangePresets,\n} from '@ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {dateRangeToAbsoluteRange} from '@ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {message} from '@ui/i18n/message';\nimport {PartialWithRequired} from '@ui/utils/ts/partial-with-required';\nimport {\n  BackendFilter,\n  DatePickerFilterControl,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\n\nexport function timestampFilter(\n  options: PartialWithRequired<\n    BackendFilter<DatePickerFilterControl>,\n    'key' | 'label'\n  >,\n): BackendFilter<DatePickerFilterControl> {\n  return {\n    ...options,\n    defaultOperator: FilterOperator.between,\n    control: {\n      type: FilterControlType.DateRangePicker,\n      defaultValue:\n        options.control?.defaultValue ||\n        dateRangeToAbsoluteRange(\n          (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue(),\n        ),\n    },\n  };\n}\n\nexport function createdAtFilter(\n  options?: Partial<BackendFilter<DatePickerFilterControl>>,\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'created_at',\n    label: message('Date created'),\n    ...options,\n  });\n}\n\nexport function updatedAtFilter(\n  options?: Partial<BackendFilter<DatePickerFilterControl>>,\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'updated_at',\n    label: message('Last updated'),\n    ...options,\n  });\n}\n"],"names":["FilterListTriggerButton","forwardRef","props","ref","isInactive","filter","domProps","jsx","InactiveFilterButton","ActiveFilterButton","Button","KeyboardArrowDownIcon","Trans","children","isBoolean","FilterControlType","jsxs","clsx","FilterListItemDialogTrigger","onValueChange","label","DialogTrigger","value","FilterListControlDialog","panel","operator","form","useForm","close","formId","useDialogContext","Dialog","DialogHeader","DialogBody","Form","formValue","DialogFooter","FilterListControl","DatePickerControl","BooleanToggleControl","SelectControl","ChipFieldControl","InputControl","SelectModelControl","Control","valueLabel","DateRangePresets","FormattedDateTimeRange","DateRangeFilterPanel","option","o","SelectFilterPanel","v","MultipleValues","ChipFieldFilterPanel","trans","useTrans","options","_a","maxShownCount","notShownCount","names","Fragment","i","name","operatorLabel","FilterOperatorNames","formattedValue","FormattedNumber","InputFilterPanel","isLoading","data","useNormalizedModel","skeleton","Skeleton","modelPreview","Avatar","NormalizedModelFilterPanel","FilterList","filters","pinnedFilters","className","wrap","decodedFilters","remove","replaceAll","useBackendFilterUrlParams","field","index","f","handleValueChange","payload","newFilters","IconButton","CloseIcon","timestampFilter","FilterOperator","dateRangeToAbsoluteRange","createdAtFilter","message","updatedAtFilter"],"mappings":"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"}