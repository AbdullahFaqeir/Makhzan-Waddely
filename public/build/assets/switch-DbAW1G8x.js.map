{"version":3,"file":"switch-DbAW1G8x.js","sources":["../../../common/foundation/resources/client/ui/library/forms/toggle/switch.tsx"],"sourcesContent":["import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '@ui/focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n  iconRight?: ReactNode;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      iconRight,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex select-none items-center\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            aria-checked={domProps.checked}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark',\n              invalid && 'checked:border-danger checked:bg-danger',\n              'relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary',\n              'before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'cursor-not-allowed opacity-80',\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled',\n              )}\n            >\n              {children}\n            </span>\n          )}\n          {iconRight}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange: e => {\n      if (e.target.value && e.target.value !== 'on') {\n        onChange(e.target.checked ? e.target.value : false);\n      } else {\n        onChange(e);\n      }\n    },\n    onBlur,\n    checked: !!value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n"],"names":["Switch","React","props","ref","children","size","description","className","invalid","autoFocus","errorMessage","iconRight","domProps","inputRef","useObjectRef","useAutoFocus","style","getSizeClassName","fieldClassNames","getInputFieldClassNames","descriptionId","useId","clsx","jsxs","jsx","FormSwitch","onChange","onBlur","value","error","useController","formProps","e","mergeProps"],"mappings":"qGAkBO,MAAMA,EAASC,EAAM,WAC1B,CAACC,EAAOC,IAAQ,CACd,KAAM,CACJ,SAAAC,EACA,KAAAC,EAAO,KACP,YAAAC,EACA,UAAAC,EACA,QAAAC,EACA,UAAAC,EACA,aAAAC,EACA,UAAAC,EACA,GAAGC,CAAA,EACDV,EAEEW,EAAWC,EAAaX,CAAG,EACjCY,EAAa,CAAC,UAAAN,CAAA,EAAYI,CAAQ,EAElC,MAAMG,EAAQC,EAAiBZ,CAAI,EAC7Ba,EAAkBC,EAAwBjB,CAAK,EAE/CkB,EAAgBC,EAAAA,MAAA,EAEtB,cACG,MAAA,CAAI,UAAWC,EAAKf,EAAW,SAAS,EACvC,SAAA,CAAAgB,EAAAA,KAAC,QAAA,CAAM,UAAU,gCACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACE,GAAGZ,EACJ,KAAK,WACL,KAAK,SACL,eAAcJ,GAAW,OACzB,mBAAkBF,EAAcc,EAAgB,OAChD,IAAKP,EACL,eAAcD,EAAS,QACvB,UAAWU,EACTN,EACA,CAACR,GACC,0GACFA,GAAW,0CACX,8MACA,6HACA,8BACA,qBACAN,EAAM,UAAY,+BAAA,CACpB,CAAA,EAEDE,GACCoB,EAAAA,IAAC,OAAA,CACC,UAAWF,EACTJ,EAAgB,KAAK,KACrB,QACAV,GAAW,cACXN,EAAM,UAAY,eAAA,EAGnB,SAAAE,CAAA,CAAA,EAGJO,CAAA,EACH,EACCL,GAAe,CAACI,GACfc,MAAC,MAAA,CAAI,GAAIJ,EAAe,UAAWF,EAAgB,YAChD,SAAAZ,CAAA,CACH,EAEDI,SACE,MAAA,CAAI,GAAIU,EAAe,UAAWF,EAAgB,MAChD,SAAAR,CAAA,CACH,CAAA,EAEJ,CAEJ,CACF,EAKO,SAASe,EAAWvB,EAAwB,CACjD,KAAM,CACJ,MAAO,CAAC,SAAAwB,EAAU,OAAAC,EAAQ,MAAAC,EAAQ,GAAO,IAAAzB,CAAA,EACzC,WAAY,CAAC,QAAAK,EAAS,MAAAqB,CAAA,CAAK,EACzBC,EAAc,CAChB,KAAM5B,EAAM,IAAA,CACb,EAEK6B,EAAkC,CACtC,SAAUC,GAAK,CACTA,EAAE,OAAO,OAASA,EAAE,OAAO,QAAU,KACvCN,EAASM,EAAE,OAAO,QAAUA,EAAE,OAAO,MAAQ,EAAK,EAElDN,EAASM,CAAC,CAEd,EACA,OAAAL,EACA,QAAS,CAAC,CAACC,EACX,QAAApB,EACA,aAAcqB,GAAA,YAAAA,EAAO,QACrB,KAAM3B,EAAM,IAAA,EAGd,aAAQF,EAAA,CAAO,IAAAG,EAAW,GAAG8B,EAAW/B,EAAO6B,CAAS,EAAG,CAC7D,CAEA,SAASd,EAAiBZ,EAAyB,CACjD,OAAQA,EAAA,CACN,IAAK,KACH,MAAO,kEACT,IAAK,KACH,MAAO,kEACT,IAAK,KACH,MAAO,kEACT,IAAK,KACH,MAAO,kEACT,QACE,MAAO,iEAAA,CAEb"}