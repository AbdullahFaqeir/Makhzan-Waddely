{"version":3,"file":"uploading-settings-ClRnevqQ.js","sources":["../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/backends/backends.ts","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/credential-forms/dropbox-form.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/credential-forms/ftp-form.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/credential-forms/s3-form.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/credential-forms/sftp-form.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/credential-forms/webdav-form.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/backends/backend-dialog-fields.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/backends/use-validate-backend-credentials.ts","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/backends/create-backend-dialog.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/backends/update-backend-dialog.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/backends/backends-section.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/max-server-upload-size.ts","../../../common/foundation/resources/client/admin/settings/layout/json-chip-field.tsx","../../../common/foundation/resources/client/uploads/components/file-size-field.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/upload-types-section.tsx","../../../common/foundation/resources/client/admin/settings/pages/uploading-settings/uploading-settings.tsx"],"sourcesContent":["import {message} from '@ui/i18n/message';\n\nexport const supportedBackends = [\n  {\n    type: 'local',\n    label: message('Local disk'),\n  },\n  {\n    type: 's3',\n    label: message('Amazon S3'),\n  },\n  {\n    type: 's3_compatible',\n    label: message('S3 API compatible provider'),\n  },\n  {\n    type: 'backblaze',\n    label: message('Backblaze'),\n  },\n  {\n    type: 'webdav',\n    label: message('WebDAV'),\n  },\n  {\n    type: 'ftp',\n    label: message('FTP'),\n  },\n  {\n    type: 'sftp',\n    label: message('SFTP'),\n  },\n  {\n    type: 'digitalocean',\n    label: message('DigitalOcean spaces'),\n  },\n];\n\ntype BackendType = (typeof supportedBackends)[number]['type'];\n\nexport type BackendFormValue = {\n  name: string;\n  type: BackendType;\n  root?: string;\n  domain?: string;\n  config: Record<BackendType, Record<string, string | number>>;\n};\n","import {apiClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useMutation} from '@tanstack/react-query';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@ui/i18n/trans';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {Fragment} from 'react';\nimport {useForm, useFormContext} from 'react-hook-form';\n\ntype Props = {\n  isInvalid?: boolean;\n  formPrefix: string;\n};\nexport function DropboxForm({isInvalid, formPrefix}: Props) {\n  const {watch, setValue} = useFormContext();\n  const appKey = watch(`credentials.${formPrefix}.app_key`);\n  const appSecret = watch(`credentials.${formPrefix}.app_secret`);\n\n  return (\n    <Fragment>\n      <FormTextField\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name={`credentials.${formPrefix}.app_key`}\n        label={<Trans message=\"Dropbox application key\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name={`credentials.${formPrefix}.app_secret`}\n        label={<Trans message=\"Dropbox application secret\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name={`credentials.${formPrefix}.refresh_token`}\n        label={<Trans message=\"Dropbox refresh token\" />}\n        required\n      />\n      <DialogTrigger\n        type=\"modal\"\n        onClose={refreshToken => {\n          if (refreshToken) {\n            setValue(`credentials.${formPrefix}.refresh_token`, refreshToken, {\n              shouldDirty: true,\n            });\n          }\n        }}\n      >\n        <Button\n          variant=\"outline\"\n          color=\"primary\"\n          size=\"xs\"\n          disabled={!appKey || !appSecret}\n        >\n          <Trans message=\"Get dropbox refresh token\" />\n        </Button>\n        <DropboxRefreshTokenDialog appKey={appKey!} appSecret={appSecret!} />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface DropboxRefreshTokenDialogProps {\n  appKey: string;\n  appSecret: string;\n}\nfunction DropboxRefreshTokenDialog({\n  appKey,\n  appSecret,\n}: DropboxRefreshTokenDialogProps) {\n  const form = useForm<{accessCode: string}>();\n  const {formId, close} = useDialogContext();\n  const generateRefreshToken = useGenerateDropboxRefreshToken();\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Connect dropbox account\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={data => {\n            generateRefreshToken.mutate(\n              {\n                app_key: appKey,\n                app_secret: appSecret,\n                access_code: data.accessCode,\n              },\n              {\n                onSuccess: response => {\n                  close(response.refreshToken);\n                },\n              },\n            );\n          }}\n        >\n          <div className=\"mb-20 border-b pb-20\">\n            <div className=\"mb-10 text-sm text-muted\">\n              <Trans message=\"Click the 'get access code' button to get dropbox access code, then paste it into the field below.\" />\n            </div>\n            <Button\n              variant=\"outline\"\n              color=\"primary\"\n              size=\"xs\"\n              elementType=\"a\"\n              target=\"_blank\"\n              href={`https://www.dropbox.com/oauth2/authorize?client_id=${appKey}&token_access_type=offline&response_type=code`}\n            >\n              <Trans message=\"Get access code\" />\n            </Button>\n          </div>\n          <FormTextField\n            name=\"accessCode\"\n            label={<Trans message=\"Dropbox access code\" />}\n            required\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          form={formId}\n          type=\"submit\"\n          disabled={!appKey || !appSecret || generateRefreshToken.isPending}\n        >\n          <Trans message=\"Connect\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction useGenerateDropboxRefreshToken() {\n  return useMutation({\n    mutationFn: (payload: {\n      app_key: string;\n      app_secret: string;\n      access_code: string;\n    }) =>\n      apiClient\n        .post<{\n          refreshToken: string;\n        }>('settings/uploading/dropbox-refresh-token', payload)\n        .then(r => r.data),\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","import {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\n\ntype Props = {\n  isInvalid?: boolean;\n  formPrefix: string;\n};\nexport function FtpForm({isInvalid, formPrefix}: Props) {\n  return (\n    <div>\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.host`}\n        label={<Trans message=\"FTP hostname\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.username`}\n        label={<Trans message=\"FTP username\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.password`}\n        label={<Trans message=\"FTP password\" />}\n        type=\"password\"\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.port`}\n        label={<Trans message=\"FTP port\" />}\n        type=\"number\"\n        min={0}\n        placeholder=\"21\"\n      />\n      <FormSwitch\n        invalid={isInvalid}\n        name={`config.${formPrefix}.passive`}\n        className=\"mb-10\"\n      >\n        <Trans message=\"Passive\" />\n      </FormSwitch>\n      <FormSwitch invalid={isInvalid} name={`config.${formPrefix}.ssl`}>\n        <Trans message=\"SSL\" />\n      </FormSwitch>\n    </div>\n  );\n}\n","import {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\n\ntype S3FormProps = {\n  isInvalid?: boolean;\n  formPrefix: string;\n  showEndpointField?: boolean;\n};\nexport function S3Form({\n  isInvalid,\n  formPrefix,\n  showEndpointField,\n}: S3FormProps) {\n  return (\n    <div>\n      {showEndpointField && (\n        <FormTextField\n          size=\"sm\"\n          className=\"mb-20\"\n          invalid={isInvalid}\n          name={`config.${formPrefix}.endpoint`}\n          label={<Trans message=\"Endpoint\" />}\n        />\n      )}\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name={`config.${formPrefix}.key`}\n        label={<Trans message=\"Access key\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name={`config.${formPrefix}.secret`}\n        label={<Trans message=\"Secret key\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name={`config.${formPrefix}.region`}\n        label={<Trans message=\"Region\" />}\n        placeholder=\"us-east-1\"\n      />\n      <FormTextField\n        size=\"sm\"\n        className=\"mb-20\"\n        invalid={isInvalid}\n        name={`config.${formPrefix}.bucket`}\n        label={<Trans message=\"Bucket\" />}\n        required\n      />\n      <FormSwitch\n        size=\"sm\"\n        name={`config.${formPrefix}.direct_upload`}\n        description={\n          <Trans message=\"Upload files directly from user's browser to cloud storage, bypassing your server. This improves upload speeds and reduces server bandwidth usage.\" />\n        }\n      >\n        <Trans message=\"Enable direct upload\" />\n      </FormSwitch>\n      {showEndpointField && (\n        <FormSwitch\n          className=\"mt-20\"\n          size=\"sm\"\n          name={`config.${formPrefix}.use_path_style_endpoint`}\n          description={\n            <Trans message=\"Use 'domain.com/bucket/file.jpg' url style instead of 'bucket.domain.com/file.jpg'\" />\n          }\n        >\n          <Trans message=\"Use path style endpoint\" />\n        </FormSwitch>\n      )}\n    </div>\n  );\n}\n","import {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\n\ntype Props = {\n  isInvalid?: boolean;\n  formPrefix: string;\n};\nexport function SftpForm({isInvalid, formPrefix}: Props) {\n  const {trans} = useTrans();\n  return (\n    <div>\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.host`}\n        label={<Trans message=\"SFTP hostname\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.username`}\n        label={<Trans message=\"SFTP username\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        type=\"password\"\n        name={`config.${formPrefix}.password`}\n        label={<Trans message=\"SFTP password\" />}\n        placeholder={trans(\n          message('Optional, if using key-based authentication'),\n        )}\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.port`}\n        label={<Trans message=\"SFTP port\" />}\n        type=\"number\"\n        min={0}\n        placeholder=\"22\"\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.root`}\n        label={<Trans message=\"Root path\" />}\n        placeholder=\"/\"\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.privateKey`}\n        label={<Trans message=\"Private key path\" />}\n        placeholder={trans(message('Optional'))}\n        descriptionPosition=\"top\"\n        description={\n          <Trans message=\"Absolute path to private key file for key-based authentication\" />\n        }\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`config.${formPrefix}.passphrase`}\n        label={<Trans message=\"Passphrase\" />}\n        placeholder={trans(message('Optional'))}\n        description={<Trans message=\"Passphrase for encrypted private key\" />}\n        descriptionPosition=\"top\"\n        type=\"password\"\n      />\n    </div>\n  );\n}\n","import {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@ui/i18n/trans';\n\ntype Props = {\n  isInvalid?: boolean;\n  formPrefix: string;\n};\nexport function WebdavForm({isInvalid, formPrefix}: Props) {\n  return (\n    <div>\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`credentials.${formPrefix}.baseUri`}\n        label={<Trans message=\"WebDAV URL\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`credentials.${formPrefix}.username`}\n        label={<Trans message=\"WebDAV username\" />}\n        required\n      />\n      <FormTextField\n        invalid={isInvalid}\n        size=\"sm\"\n        className=\"mb-20\"\n        name={`credentials.${formPrefix}.password`}\n        label={<Trans message=\"WebDAV password\" />}\n        type=\"password\"\n        required\n      />\n    </div>\n  );\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {DocsLink} from '@common/admin/settings/layout/settings-links';\nimport {\n  BackendFormValue,\n  supportedBackends,\n} from '@common/admin/settings/pages/uploading-settings/backends/backends';\nimport {DropboxForm} from '@common/admin/settings/pages/uploading-settings/credential-forms/dropbox-form';\nimport {FtpForm} from '@common/admin/settings/pages/uploading-settings/credential-forms/ftp-form';\nimport {S3Form} from '@common/admin/settings/pages/uploading-settings/credential-forms/s3-form';\nimport {SftpForm} from '@common/admin/settings/pages/uploading-settings/credential-forms/sftp-form';\nimport {WebdavForm} from '@common/admin/settings/pages/uploading-settings/credential-forms/webdav-form';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FormSelect} from '@ui/forms/select/select';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {useFormContext, useWatch} from 'react-hook-form';\nimport {Fragment} from 'react/jsx-runtime';\n\nexport function BackendDialogFields() {\n  const {trans} = useTrans();\n  return (\n    <Fragment>\n      <FormTextField\n        size=\"sm\"\n        className=\"mb-20\"\n        name=\"name\"\n        label={<Trans message=\"Name\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        className=\"mb-20\"\n        name=\"root\"\n        label={<Trans message=\"Storage path\" />}\n        descriptionPosition=\"top\"\n        description={\n          <Trans message=\"Relative or absolute path where uploads should be stored. Leave empty to use default location.\" />\n        }\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        className=\"mb-20\"\n        type=\"url\"\n        name=\"domain\"\n        label={<Trans message=\"Custom domain\" />}\n        placeholder={trans(message('Optional'))}\n        descriptionPosition=\"top\"\n        description={\n          <Trans message=\"Custom domain or CDN url from which to serve files uploaded to this backend.\" />\n        }\n      />\n      <TypeSelect />\n      <Credentials />\n    </Fragment>\n  );\n}\n\nfunction TypeSelect() {\n  const {clearErrors} = useFormContext<BackendFormValue>();\n  return (\n    <FormSelect\n      size=\"sm\"\n      className=\"mb-20\"\n      name=\"type\"\n      label={<Trans message=\"Type\" />}\n      onSelectionChange={() => clearErrors()}\n      description={<TypeDocsUrl />}\n    >\n      {supportedBackends.map(backend => (\n        <Item key={backend.type} value={backend.type}>\n          <Trans {...backend.label} />\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n\nfunction TypeDocsUrl() {\n  const type = useWatch<BackendFormValue, 'type'>({\n    name: 'type',\n  });\n  let url = null;\n\n  if (type === 's3') {\n    url = AdminDocsUrls.settings.s3;\n  } else if (type === 'backblaze') {\n    url = AdminDocsUrls.settings.backblaze;\n  }\n\n  if (!url) return null;\n\n  return <DocsLink link={url} />;\n}\n\nexport function Credentials() {\n  const selectedType = useWatch<BackendFormValue, 'type'>({\n    name: 'type',\n  });\n\n  switch (selectedType) {\n    case 's3':\n    case 'digitalocean':\n    case 'backblaze':\n      return <S3Form formPrefix={selectedType} />;\n    case 's3_compatible':\n      return <S3Form formPrefix={selectedType} showEndpointField />;\n    case 'ftp':\n      return <FtpForm formPrefix={selectedType} />;\n    case 'sftp':\n      return <SftpForm formPrefix={selectedType} />;\n    case 'webdav':\n      return <WebdavForm formPrefix={selectedType} />;\n    case 'dropbox':\n      return <DropboxForm formPrefix={selectedType} />;\n    default:\n      return null;\n  }\n}\n","import {BackendFormValue} from '@common/admin/settings/pages/uploading-settings/backends/backends';\nimport {UploadingBackendSettings} from '@common/core/settings/base-backend-settings';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient} from '@common/http/query-client';\nimport {useMutation} from '@tanstack/react-query';\nimport {UseFormReturn} from 'react-hook-form';\n\nexport function useValidateBackendCredentials(\n  form: UseFormReturn<BackendFormValue>,\n) {\n  return useMutation({\n    mutationFn: (payload: UploadingBackendSettings) => {\n      return apiClient.put(\n        `settings/uploading/validate-backend-credentials`,\n        payload,\n      );\n    },\n    onError: r => onFormQueryError(r, form),\n  });\n}\n","import {BackendDialogFields} from '@common/admin/settings/pages/uploading-settings/backends/backend-dialog-fields';\nimport {BackendFormValue} from '@common/admin/settings/pages/uploading-settings/backends/backends';\nimport {useValidateBackendCredentials} from '@common/admin/settings/pages/uploading-settings/backends/use-validate-backend-credentials';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {Trans} from '@ui/i18n/trans';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {nanoid} from 'nanoid';\nimport {useForm} from 'react-hook-form';\n\nexport function CreateBackendDialog() {\n  const {formId, close} = useDialogContext();\n  const form = useForm<BackendFormValue>({\n    defaultValues: {\n      type: 'local',\n      root: '',\n      name: '',\n      config: {},\n    },\n  });\n\n  const validateBackend = useValidateBackendCredentials(form);\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Create backend\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          disableNativeValidation\n          id={formId}\n          form={form}\n          onSubmit={value => {\n            const payload = {\n              id: nanoid(10),\n              ...value,\n              config: value.config[value.type],\n            };\n            validateBackend.mutate(payload, {\n              onSuccess: () => close(payload),\n            });\n          }}\n        >\n          <BackendDialogFields />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"outline\" onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={validateBackend.isPending}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {BackendDialogFields} from '@common/admin/settings/pages/uploading-settings/backends/backend-dialog-fields';\nimport {BackendFormValue} from '@common/admin/settings/pages/uploading-settings/backends/backends';\nimport {useValidateBackendCredentials} from '@common/admin/settings/pages/uploading-settings/backends/use-validate-backend-credentials';\nimport {UploadingBackendSettings} from '@common/core/settings/base-backend-settings';\nimport {SectionHelper} from '@common/ui/other/section-helper';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {Trans} from '@ui/i18n/trans';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {useForm} from 'react-hook-form';\n\ntype Props = {\n  backend: UploadingBackendSettings;\n};\nexport function UpdateBackendDialog({backend}: Props) {\n  const {formId, close} = useDialogContext();\n  const form = useForm<BackendFormValue>({\n    defaultValues: {\n      type: backend.type,\n      name: backend.name,\n      root: backend.root,\n      domain: backend.domain,\n      config: backend.config\n        ? {\n            [backend.type]: backend.config,\n          }\n        : undefined,\n    },\n  });\n\n  const validateBackend = useValidateBackendCredentials(form);\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Update backend\" />\n      </DialogHeader>\n      <DialogBody>\n        <SectionHelper\n          className=\"mb-34\"\n          color=\"danger\"\n          description={\n            <Trans message=\"Changing type, path, host or bucket settings will make files previosuly uploaded to this backend unavailable. Consider creating a new backend instead.\" />\n          }\n        />\n        <Form\n          disableNativeValidation\n          id={formId}\n          form={form}\n          onBeforeSubmit={() => form.clearErrors()}\n          onSubmit={value => {\n            const payload: UploadingBackendSettings = {\n              ...value,\n              id: backend.id,\n              config: value.config?.[value.type],\n            };\n            validateBackend.mutate(payload, {\n              onSuccess: () => {\n                close(payload);\n              },\n            });\n          }}\n        >\n          <BackendDialogFields />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={validateBackend.isPending}\n        >\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {supportedBackends} from '@common/admin/settings/pages/uploading-settings/backends/backends';\nimport {CreateBackendDialog} from '@common/admin/settings/pages/uploading-settings/backends/create-backend-dialog';\nimport {UpdateBackendDialog} from '@common/admin/settings/pages/uploading-settings/backends/update-backend-dialog';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {UploadingBackendSettings} from '@common/core/settings/base-backend-settings';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {Table} from '@common/ui/tables/table';\nimport {Button} from '@ui/buttons/button';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FormattedBytes} from '@ui/i18n/formatted-bytes';\nimport {FormattedNumber} from '@ui/i18n/formatted-number';\nimport {Trans} from '@ui/i18n/trans';\nimport {AddIcon} from '@ui/icons/material/Add';\nimport {MoreHorizIcon} from '@ui/icons/material/MoreHoriz';\nimport {StorageIcon} from '@ui/icons/material/Storage';\nimport {Menu, MenuTrigger} from '@ui/menu/menu-trigger';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {openDialog} from '@ui/overlays/store/dialog-store';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {useFormContext, useWatch} from 'react-hook-form';\n\nconst storageBackendsColumns: ColumnConfig<UploadingBackendSettings>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    width: 'min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"Name\" />,\n    body: backend => <span className=\"font-semibold\">{backend.name}</span>,\n  },\n  {\n    key: 'type',\n    allowsSorting: true,\n    header: () => <Trans message=\"Type\" />,\n    body: backend => {\n      const label = supportedBackends.find(b => b.type === backend.type)?.label;\n      return label ? <Trans {...label} /> : backend.type;\n    },\n  },\n  {\n    key: 'fileCount',\n    allowsSorting: true,\n    header: () => <Trans message=\"Files\" />,\n    body: backend => <FileCountColumn backend={backend} />,\n  },\n  {\n    key: 'size',\n    allowsSorting: true,\n    header: () => <Trans message=\"Size\" />,\n    body: backend => <SizeColumn backend={backend} />,\n  },\n  {\n    key: 'actions',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"Actions\" />,\n    hideHeader: true,\n    body: backend => <ActionsColumn backend={backend} />,\n    width: 'w-36',\n  },\n];\n\ntype ColumnProps = {\n  backend: UploadingBackendSettings;\n};\n\nfunction SizeColumn({backend}: ColumnProps) {\n  const {data} = useAdminSettings();\n  const size = data.uploading.file_counts?.find(\n    f => f.backend_id === backend.id,\n  )?.total_size;\n  return size ? <FormattedBytes bytes={size} /> : '-';\n}\n\nfunction FileCountColumn({backend}: ColumnProps) {\n  const {data} = useAdminSettings();\n  const count = data.uploading.file_counts?.find(\n    f => f.backend_id === backend.id,\n  )?.file_count;\n  return count ? <FormattedNumber value={count} /> : '-';\n}\n\nfunction ActionsColumn({backend}: ColumnProps) {\n  const {setValue, getValues} = useFormContext<AdminSettings>();\n\n  const handleUpdateBackend = async () => {\n    const updatedBackend = await openDialog(UpdateBackendDialog, {\n      backend,\n    });\n    if (updatedBackend) {\n      const backends = (getValues('client.uploading.backends') ?? []).map(b =>\n        b.id === backend.id ? {...b, ...updatedBackend} : b,\n      );\n      setValue('client.uploading.backends', backends, {\n        shouldDirty: true,\n      });\n    }\n  };\n\n  const handleRemoveBackend = async () => {\n    const confirmed = await openDialog(RemoveBackendDialog, {backend});\n    if (confirmed) {\n      const backends = (getValues('client.uploading.backends') ?? []).filter(\n        b => b.id !== backend.id,\n      );\n      setValue('client.uploading.backends', backends, {\n        shouldDirty: true,\n      });\n    }\n  };\n\n  return (\n    <MenuTrigger>\n      <IconButton className=\"text-muted\" size=\"sm\">\n        <MoreHorizIcon />\n      </IconButton>\n      <Menu>\n        <Item value=\"edit\" onSelected={() => handleUpdateBackend()}>\n          <Trans message=\"Edit\" />\n        </Item>\n        <Item value=\"remove\" onSelected={() => handleRemoveBackend()}>\n          <Trans message=\"Remove\" />\n        </Item>\n      </Menu>\n    </MenuTrigger>\n  );\n}\n\nexport function BackendsSection() {\n  const {setValue, getValues} = useFormContext<AdminSettings>();\n  const backends =\n    useWatch<AdminSettings>({\n      name: 'client.uploading.backends',\n    }) ?? [];\n  return (\n    <div>\n      <div className=\"flex items-center gap-16 pl-8\">\n        <div className=\"flex size-32 items-center justify-center rounded-button bg-fg-base/6\">\n          <StorageIcon size=\"xs\" />\n        </div>\n        <div className=\"text-base font-semibold\">\n          <Trans message=\"Storage backends\" />\n        </div>\n      </div>\n      <div>\n        <div className=\"ml-24 h-24 w-2 bg-fg-base/6\"></div>\n        <div className=\"mb-12 overflow-hidden rounded-panel border-x border-t max-md:border-b\">\n          <Table\n            tableStyle=\"html\"\n            enableSelection={false}\n            columns={storageBackendsColumns}\n            data={backends}\n            cellHeight=\"h-44\"\n            headerCellHeight=\"h-36\"\n            headerRowBg=\"bg-fg-base/4\"\n          />\n        </div>\n        <DialogTrigger\n          type=\"modal\"\n          onClose={(value: UploadingBackendSettings | null) => {\n            if (value) {\n              const existing = getValues('client.uploading.backends') ?? [];\n              setValue('client.uploading.backends', [...existing, value], {\n                shouldDirty: true,\n              });\n            }\n          }}\n        >\n          <Button size=\"xs\" variant=\"outline\" startIcon={<AddIcon />}>\n            <Trans message=\"Add backend\" />\n          </Button>\n          <CreateBackendDialog />\n        </DialogTrigger>\n      </div>\n    </div>\n  );\n}\n\ntype RemoveBackendDialogProps = {\n  backend: UploadingBackendSettings;\n};\nfunction RemoveBackendDialog({backend}: RemoveBackendDialogProps) {\n  const {close} = useDialogContext();\n  const {base_url} = useSettings();\n  const {data} = useAdminSettings();\n  const isUsed = Object.entries(data.client.uploading?.types ?? {}).some(\n    ([_, type]) => type.backends.includes(backend.id),\n  );\n\n  if (isUsed) {\n    return (\n      <ConfirmationDialog\n        hideClose\n        title={<Trans message=\"Remove backend\" />}\n        body={\n          <Trans message=\"This backend is used by some upload types. Detach it first to remove.\" />\n        }\n        confirm={<Trans message=\"Got it\" />}\n        onConfirm={() => close(false)}\n      />\n    );\n  }\n\n  return (\n    <ConfirmationDialog\n      title={<Trans message=\"Remove backend\" />}\n      isDanger\n      body={\n        <div>\n          <p className=\"mb-8\">\n            <Trans message=\"Are you sure you want to remove this backend?\" />\n          </p>\n          <p className=\"mb-8\">\n            <Trans\n              message=\"This <b>will not</b> delete files uploaded using this backend, so you can re-attach it later at the same path.\"\n              values={{\n                b: parts => <strong>{parts}</strong>,\n              }}\n            />\n          </p>\n          <p>\n            <Trans\n              message=\"If you want to delete the files first, you can do it from the <a>files</a> page, using backend filter.\"\n              values={{\n                a: parts => (\n                  <a\n                    className=\"font-semibold underline\"\n                    target=\"_blank\"\n                    href={`${base_url}/admin/files`}\n                  >\n                    {parts}\n                  </a>\n                ),\n              }}\n            />\n          </p>\n        </div>\n      }\n      confirm={<Trans message=\"Remove\" />}\n    />\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient} from '@common/http/query-client';\n\nexport interface FetchMaxServerUploadSizeResponse extends BackendResponse {\n  maxSize: string;\n}\n\nfunction fetchMaxServerUploadSize(): Promise<FetchMaxServerUploadSizeResponse> {\n  return apiClient\n    .get('uploads/server-max-file-size')\n    .then(response => response.data);\n}\n\nexport function useMaxServerUploadSize() {\n  return useQuery({\n    queryKey: ['MaxServerUploadSize'],\n    queryFn: () => fetchMaxServerUploadSize(),\n  });\n}\n","import {mergeProps} from '@react-aria/utils';\nimport {\n  ChipField,\n  ChipValue,\n} from '@ui/forms/input-field/chip-field/chip-field';\nimport {FormChipFieldProps} from '@ui/forms/input-field/chip-field/form-chip-field';\nimport {useMemo} from 'react';\nimport {useController} from 'react-hook-form';\n\nexport function JsonChipField({children, ...props}: FormChipFieldProps<any>) {\n  const {\n    field: {onChange, onBlur, value = [], ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const arrayValue = useMemo(() => {\n    const mixedValue = value as string | string[];\n    return typeof mixedValue === 'string' ? JSON.parse(mixedValue) : mixedValue;\n  }, [value]);\n\n  const formProps: Partial<FormChipFieldProps<ChipValue>> = {\n    onChange,\n    onBlur,\n    value: arrayValue,\n    invalid,\n    errorMessage: error?.message,\n  };\n\n  return (\n    <ChipField valueKey=\"name\" ref={ref} {...mergeProps(formProps, props)}>\n      {children}\n    </ChipField>\n  );\n}\n","import {\n  FormTextField,\n  FormTextFieldProps,\n} from '@ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@ui/i18n/trans';\nimport React from 'react';\n\n// 99TB\nconst MaxValue = 108851651149824;\n\nexport const FormFileSizeField = React.forwardRef<\n  HTMLDivElement,\n  FormTextFieldProps\n>(({name, ...props}, ref) => {\n  return (\n    <FormTextField\n      name={name}\n      {...props}\n      ref={ref}\n      min={1}\n      max={MaxValue}\n      type=\"number\"\n      endAdornment={\n        <span className=\"mr-12 text-xs text-muted\">\n          <Trans message=\"Bytes\" />\n        </span>\n      }\n    />\n  );\n});\n","import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {JsonChipField} from '@common/admin/settings/layout/json-chip-field';\nimport {SettingsSectionHeader} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {\n  UploadingBackendSettings,\n  UploadingTypeSettings,\n} from '@common/core/settings/base-backend-settings';\nimport {FormFileSizeField} from '@common/uploads/components/file-size-field';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {FormChipField} from '@ui/forms/input-field/chip-field/form-chip-field';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {SettingsIcon} from '@ui/icons/material/Settings';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {Fragment} from 'react';\nimport {useForm, useFormContext, useWatch} from 'react-hook-form';\n\nexport function UploadTypesSection() {\n  const {data} = useAdminSettings();\n  const form = useFormContext<AdminSettings>();\n\n  const availableBackends =\n    useWatch<AdminSettings, 'client.uploading.backends'>({\n      name: 'client.uploading.backends',\n    }) ?? [];\n\n  return (\n    <Fragment>\n      <SettingsSectionHeader margin=\"mt-44 mb-12\" size=\"lg\">\n        <Trans message=\"Upload types\" />\n        <Trans message=\"Configure storage backends and file restrictions for different upload types across the site.\" />\n      </SettingsSectionHeader>\n      <div className=\"space-y-12\">\n        {Object.entries(data.uploading.types).map(([type, config]) => (\n          <DialogTrigger\n            type=\"modal\"\n            key={type}\n            onClose={value => {\n              if (value) {\n                form.setValue(`client.uploading.types.${type}`, value, {\n                  shouldValidate: true,\n                  shouldDirty: true,\n                });\n              }\n            }}\n          >\n            <div\n              role=\"button\"\n              tabIndex={0}\n              className=\"flex cursor-pointer items-center rounded-panel border p-16 transition-button hover:bg-hover\"\n            >\n              <div>\n                <div className=\"pb-2 text-sm font-semibold\">\n                  <Trans message={config.label} />\n                </div>\n                <div className=\"text-xs text-muted\">\n                  <Trans message={config.description} />\n                </div>\n              </div>\n              <SettingsIcon className=\"ml-auto text-muted\" size=\"sm\" />\n            </div>\n            <UploadTypeDialog\n              name={type}\n              availableBackends={availableBackends}\n            />\n          </DialogTrigger>\n        ))}\n      </div>\n    </Fragment>\n  );\n}\n\ntype UploadTypeDialogProps = {\n  name: string;\n  availableBackends: UploadingBackendSettings[];\n};\nfunction UploadTypeDialog({name, availableBackends}: UploadTypeDialogProps) {\n  const {formId, close} = useDialogContext();\n  const values = useWatch({\n    name: `client.uploading.types.${name}`,\n  });\n  const form = useForm<UploadingTypeSettings>({\n    defaultValues: values,\n  });\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Update upload type\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={value => close(value)}\n          className=\"space-y-20\"\n        >\n          <BackendsField availableBackends={availableBackends} />\n          <FormTextField\n            name={`root`}\n            label={<Trans message=\"Folder\" />}\n            descriptionPosition=\"top\"\n            description={\n              <Trans message=\"Where in the backend should the uploads be stored. Leave empty to use default folder.\" />\n            }\n          />\n          <MaxUploadSizeField />\n          <AllowedFileTypesField />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button type=\"submit\" variant=\"flat\" color=\"primary\" form={formId}>\n          <Trans message=\"Update\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\nfunction BackendsField({\n  availableBackends,\n}: {\n  availableBackends: UploadingBackendSettings[];\n}) {\n  return (\n    <FormChipField\n      required\n      label={<Trans message=\"Storage backends\" />}\n      name={`backends`}\n      suggestions={availableBackends}\n      valueKey=\"id\"\n      displayWith={v => availableBackends?.find(b => b.id === v.id)?.name}\n      description={\n        <Trans message=\"Select in which backend(s) these uploads should be stored.\" />\n      }\n    >\n      {backend => (\n        <Item key={backend.id} value={backend.id}>\n          {backend.name}\n        </Item>\n      )}\n    </FormChipField>\n  );\n}\n\nfunction MaxUploadSizeField() {\n  return (\n    <FormFileSizeField\n      min={1}\n      descriptionPosition=\"top\"\n      label={<Trans message=\"Maximum file size\" />}\n      name={`max_file_size`}\n      description={\n        <Trans message=\"Size (in bytes) for a single file user can upload.\" />\n      }\n    />\n  );\n}\n\nexport function AllowedFileTypesField() {\n  const {trans} = useTrans();\n  return (\n    <JsonChipField\n      name=\"accept\"\n      placeholder={trans(message('Select or enter a type...'))}\n      label={<Trans message=\"Allowed file types\" />}\n      descriptionPosition=\"top\"\n      allowCustomValue\n      description={\n        <Trans message=\"Extension, mime type or file type. Leave empty to use defaults.\" />\n      }\n    >\n      <Item value=\"image\">\n        <Trans message=\"Image\" />\n      </Item>\n      <Item value=\"video\">\n        <Trans message=\"Video\" />\n      </Item>\n      <Item value=\"audio\">\n        <Trans message=\"Audio\" />\n      </Item>\n      <Item value=\".png\">\n        <Trans message=\"PNG\" />\n      </Item>\n      <Item value=\".jpeg\">\n        <Trans message=\"JPG\" />\n      </Item>\n      <Item value=\".gif\">\n        <Trans message=\"GIF\" />\n      </Item>\n      <Item value=\".mp3\">\n        <Trans message=\"MP3\" />\n      </Item>\n      <Item value=\".mp4\">\n        <Trans message=\"MP4\" />\n      </Item>\n    </JsonChipField>\n  );\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {SettingsErrorGroup} from '@common/admin/settings/layout/settings-error-group';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {\n  SettingsPanel,\n  SettingsSectionHeader,\n} from '@common/admin/settings/layout/settings-panel';\nimport {BackendsSection} from '@common/admin/settings/pages/uploading-settings/backends/backends-section';\nimport {useMaxServerUploadSize} from '@common/admin/settings/pages/uploading-settings/max-server-upload-size';\nimport {UploadTypesSection} from '@common/admin/settings/pages/uploading-settings/upload-types-section';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {SectionHelper} from '@common/ui/other/section-helper';\nimport {FormFileSizeField} from '@common/uploads/components/file-size-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {FormSelect} from '@ui/forms/select/select';\nimport {Trans} from '@ui/i18n/trans';\nimport {useForm} from 'react-hook-form';\n\nexport function Component() {\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      client: {\n        uploading: data.client.uploading ?? {},\n      },\n      server: {\n        static_file_delivery: data.server.static_file_delivery ?? '',\n      },\n    },\n  });\n\n  return (\n    <AdminSettingsLayout\n      form={form}\n      title={<Trans message=\"Uploading\" />}\n      docsLink={AdminDocsUrls.settings.uploading}\n    >\n      <BackendsSection />\n      <UploadTypesSection />\n      <GlobalSettingsPanel />\n    </AdminSettingsLayout>\n  );\n}\n\nfunction GlobalSettingsPanel() {\n  return (\n    <div>\n      <SettingsSectionHeader margin=\"mt-44 mb-12\" size=\"lg\">\n        <Trans message=\"Global settings\" />\n        <Trans message=\"Settings that will apply to all upload types and backends.\" />\n      </SettingsSectionHeader>\n      <FileDeliveryPanel />\n      <ChunkSizePanel />\n    </div>\n  );\n}\n\nfunction FileDeliveryPanel() {\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"File preview optimization (local backend only)\" />}\n      description={\n        <Trans message=\"Integrate with X-Sendfile or X-Accel on the server to improve file preview performance.\" />\n      }\n    >\n      <SettingsErrorGroup\n        name=\"static_delivery_group\"\n        separatorBottom={false}\n        separatorTop={false}\n      >\n        {isInvalid => (\n          <FormSelect\n            invalid={isInvalid}\n            size=\"sm\"\n            name=\"server.static_file_delivery\"\n          >\n            <Item value=\"\">\n              <Trans message=\"None\" />\n            </Item>\n            <Item value=\"xsendfile\">\n              <Trans message=\"X-Sendfile (Apache)\" />\n            </Item>\n            <Item value=\"xaccel\">\n              <Trans message=\"X-Accel (Nginx)\" />\n            </Item>\n          </FormSelect>\n        )}\n      </SettingsErrorGroup>\n    </SettingsPanel>\n  );\n}\n\nfunction ChunkSizePanel() {\n  const {data} = useMaxServerUploadSize();\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Chunk Size\" />}\n      description={\n        <Trans message=\"Upload larger files in specified size chunks to improve upload speed and allow resumable uploads.\" />\n      }\n    >\n      <FormFileSizeField size=\"sm\" name=\"client.uploading.chunk_size\" />\n      <SectionHelper\n        className=\"mt-12\"\n        color=\"warning\"\n        size=\"sm\"\n        description={\n          <Trans\n            message=\"Maximum upload size on your server currently is set to <b>:size</b>\"\n            values={{size: data?.maxSize, b: chunks => <b>{chunks}</b>}}\n          />\n        }\n      />\n    </SettingsPanel>\n  );\n}\n"],"names":["supportedBackends","message","DropboxForm","isInvalid","formPrefix","watch","setValue","useFormContext","appKey","appSecret","Fragment","jsx","FormTextField","Trans","jsxs","DialogTrigger","refreshToken","Button","DropboxRefreshTokenDialog","form","useForm","formId","close","useDialogContext","generateRefreshToken","useGenerateDropboxRefreshToken","Dialog","DialogHeader","DialogBody","Form","data","response","DialogFooter","useMutation","payload","apiClient","r","err","showHttpErrorToast","FtpForm","FormSwitch","S3Form","showEndpointField","SftpForm","trans","useTrans","WebdavForm","BackendDialogFields","TypeSelect","Credentials","clearErrors","FormSelect","TypeDocsUrl","backend","Item","type","useWatch","url","AdminDocsUrls","DocsLink","selectedType","useValidateBackendCredentials","onFormQueryError","CreateBackendDialog","validateBackend","value","nanoid","UpdateBackendDialog","SectionHelper","_a","storageBackendsColumns","label","b","FileCountColumn","SizeColumn","ActionsColumn","useAdminSettings","size","_b","f","FormattedBytes","count","FormattedNumber","getValues","handleUpdateBackend","updatedBackend","openDialog","backends","handleRemoveBackend","RemoveBackendDialog","MenuTrigger","IconButton","MoreHorizIcon","Menu","BackendsSection","StorageIcon","Table","existing","AddIcon","base_url","useSettings","_","ConfirmationDialog","parts","fetchMaxServerUploadSize","useMaxServerUploadSize","useQuery","JsonChipField","children","props","onChange","onBlur","ref","invalid","error","useController","arrayValue","useMemo","mixedValue","formProps","ChipField","mergeProps","MaxValue","FormFileSizeField","React","name","UploadTypesSection","availableBackends","SettingsSectionHeader","config","SettingsIcon","UploadTypeDialog","values","BackendsField","MaxUploadSizeField","AllowedFileTypesField","FormChipField","v","Component","AdminSettingsLayout","GlobalSettingsPanel","FileDeliveryPanel","ChunkSizePanel","SettingsPanel","SettingsErrorGroup","chunks"],"mappings":"szDAEO,MAAMA,EAAoB,CAC/B,CACE,KAAM,QACN,MAAOC,EAAQ,YAAY,CAAA,EAE7B,CACE,KAAM,KACN,MAAOA,EAAQ,WAAW,CAAA,EAE5B,CACE,KAAM,gBACN,MAAOA,EAAQ,4BAA4B,CAAA,EAE7C,CACE,KAAM,YACN,MAAOA,EAAQ,WAAW,CAAA,EAE5B,CACE,KAAM,SACN,MAAOA,EAAQ,QAAQ,CAAA,EAEzB,CACE,KAAM,MACN,MAAOA,EAAQ,KAAK,CAAA,EAEtB,CACE,KAAM,OACN,MAAOA,EAAQ,MAAM,CAAA,EAEvB,CACE,KAAM,eACN,MAAOA,EAAQ,qBAAqB,CAAA,CAExC,ECfO,SAASC,GAAY,CAAC,UAAAC,EAAW,WAAAC,GAAoB,CAC1D,KAAM,CAAC,MAAAC,EAAO,SAAAC,CAAA,EAAYC,EAAA,EACpBC,EAASH,EAAM,eAAeD,CAAU,UAAU,EAClDK,EAAYJ,EAAM,eAAeD,CAAU,aAAa,EAE9D,cACGM,WAAA,CACC,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,UAAU,QACV,KAAM,eAAeC,CAAU,WAC/B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,yBAAA,CAA0B,EAChD,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,UAAU,QACV,KAAM,eAAeC,CAAU,cAC/B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,4BAAA,CAA6B,EACnD,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,UAAU,QACV,KAAM,eAAeC,CAAU,iBAC/B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,uBAAA,CAAwB,EAC9C,SAAQ,EAAA,CAAA,EAEVC,EAAAA,KAACC,EAAA,CACC,KAAK,QACL,QAASC,GAAgB,CACnBA,GACFV,EAAS,eAAeF,CAAU,iBAAkBY,EAAc,CAChE,YAAa,EAAA,CACd,CAEL,EAEA,SAAA,CAAAL,EAAAA,IAACM,EAAA,CACC,QAAQ,UACR,MAAM,UACN,KAAK,KACL,SAAU,CAACT,GAAU,CAACC,EAEtB,SAAAE,EAAAA,IAACE,EAAA,CAAM,QAAQ,2BAAA,CAA4B,CAAA,CAAA,EAE7CF,EAAAA,IAACO,GAAA,CAA0B,OAAAV,EAAiB,UAAAC,CAAA,CAAuB,CAAA,CAAA,CAAA,CACrE,EACF,CAEJ,CAMA,SAASS,GAA0B,CACjC,OAAAV,EACA,UAAAC,CACF,EAAmC,CACjC,MAAMU,EAAOC,EAAA,EACP,CAAC,OAAAC,EAAQ,MAAAC,CAAA,EAASC,EAAA,EAClBC,EAAuBC,GAAA,EAC7B,cACGC,EAAA,CACC,SAAA,CAAAf,MAACgB,EAAA,CACC,SAAAhB,EAAAA,IAACE,EAAA,CAAM,QAAQ,0BAA0B,EAC3C,QACCe,EAAA,CACC,SAAAd,EAAAA,KAACe,EAAA,CACC,GAAIR,EACJ,KAAAF,EACA,SAAUW,GAAQ,CAChBN,EAAqB,OACnB,CACE,QAAShB,EACT,WAAYC,EACZ,YAAaqB,EAAK,UAAA,EAEpB,CACE,UAAWC,GAAY,CACrBT,EAAMS,EAAS,YAAY,CAC7B,CAAA,CACF,CAEJ,EAEA,SAAA,CAAAjB,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAH,EAAAA,IAAC,OAAI,UAAU,2BACb,eAACE,EAAA,CAAM,QAAQ,qGAAqG,CAAA,CACtH,EACAF,EAAAA,IAACM,EAAA,CACC,QAAQ,UACR,MAAM,UACN,KAAK,KACL,YAAY,IACZ,OAAO,SACP,KAAM,sDAAsDT,CAAM,gDAElE,SAAAG,EAAAA,IAACE,EAAA,CAAM,QAAQ,iBAAA,CAAkB,CAAA,CAAA,CACnC,EACF,EACAF,EAAAA,IAACC,EAAA,CACC,KAAK,aACL,MAAOD,EAAAA,IAACE,EAAA,CAAM,QAAQ,qBAAA,CAAsB,EAC5C,SAAQ,EAAA,CAAA,CACV,CAAA,CAAA,EAEJ,SACCmB,EAAA,CACC,SAAA,CAAArB,EAAAA,IAACM,EAAA,CACC,QAAS,IAAM,CACbK,EAAA,CACF,EAEA,SAAAX,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAAA,EAE1BF,EAAAA,IAACM,EAAA,CACC,QAAQ,OACR,MAAM,UACN,KAAMI,EACN,KAAK,SACL,SAAU,CAACb,GAAU,CAACC,GAAae,EAAqB,UAExD,SAAAb,EAAAA,IAACE,EAAA,CAAM,QAAQ,SAAA,CAAU,CAAA,CAAA,CAC3B,CAAA,CACF,CAAA,EACF,CAEJ,CAEA,SAASY,IAAiC,CACxC,OAAOQ,EAAY,CACjB,WAAaC,GAKXC,EACG,KAEE,2CAA4CD,CAAO,EACrD,KAAKE,GAAKA,EAAE,IAAI,EACrB,QAASC,GAAOC,EAAmBD,CAAG,CAAA,CACvC,CACH,CC7JO,SAASE,GAAQ,CAAC,UAAApC,EAAW,WAAAC,GAAoB,CACtD,cACG,MAAA,CACC,SAAA,CAAAO,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,QAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,cAAA,CAAe,EACrC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,YAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,cAAA,CAAe,EACrC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,YAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,cAAA,CAAe,EACrC,KAAK,WACL,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,QAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,UAAA,CAAW,EACjC,KAAK,SACL,IAAK,EACL,YAAY,IAAA,CAAA,EAEdF,EAAAA,IAAC6B,EAAA,CACC,QAASrC,EACT,KAAM,UAAUC,CAAU,WAC1B,UAAU,QAEV,SAAAO,EAAAA,IAACE,EAAA,CAAM,QAAQ,SAAA,CAAU,CAAA,CAAA,EAE3BF,EAAAA,IAAC6B,EAAA,CAAW,QAASrC,EAAW,KAAM,UAAUC,CAAU,OACxD,SAAAO,MAACE,EAAA,CAAM,QAAQ,KAAA,CAAM,CAAA,CACvB,CAAA,EACF,CAEJ,CCjDO,SAAS4B,EAAO,CACrB,UAAAtC,EACA,WAAAC,EACA,kBAAAsC,CACF,EAAgB,CACd,cACG,MAAA,CACE,SAAA,CAAAA,GACC/B,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,UAAU,QACV,QAAST,EACT,KAAM,UAAUC,CAAU,YAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,UAAA,CAAW,CAAA,CAAA,EAGrCF,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,QAAST,EACT,UAAU,QACV,KAAM,UAAUC,CAAU,OAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,YAAA,CAAa,EACnC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,QAAST,EACT,UAAU,QACV,KAAM,UAAUC,CAAU,UAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,YAAA,CAAa,EACnC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,QAAST,EACT,UAAU,QACV,KAAM,UAAUC,CAAU,UAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,EAC/B,YAAY,WAAA,CAAA,EAEdF,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,UAAU,QACV,QAAST,EACT,KAAM,UAAUC,CAAU,UAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,EAC/B,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAAC6B,EAAA,CACC,KAAK,KACL,KAAM,UAAUpC,CAAU,iBAC1B,YACEO,EAAAA,IAACE,EAAA,CAAM,QAAQ,oJAAA,CAAqJ,EAGtK,SAAAF,EAAAA,IAACE,EAAA,CAAM,QAAQ,sBAAA,CAAuB,CAAA,CAAA,EAEvC6B,GACC/B,EAAAA,IAAC6B,EAAA,CACC,UAAU,QACV,KAAK,KACL,KAAM,UAAUpC,CAAU,2BAC1B,YACEO,EAAAA,IAACE,EAAA,CAAM,QAAQ,oFAAA,CAAqF,EAGtG,SAAAF,EAAAA,IAACE,EAAA,CAAM,QAAQ,yBAAA,CAA0B,CAAA,CAAA,CAC3C,EAEJ,CAEJ,CCvEO,SAAS8B,GAAS,CAAC,UAAAxC,EAAW,WAAAC,GAAoB,CACvD,KAAM,CAAC,MAAAwC,CAAA,EAASC,EAAA,EAChB,cACG,MAAA,CACC,SAAA,CAAAlC,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,QAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,eAAA,CAAgB,EACtC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,YAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,eAAA,CAAgB,EACtC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAK,WACL,KAAM,UAAUC,CAAU,YAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,eAAA,CAAgB,EACtC,YAAa+B,EACX3C,EAAQ,6CAA6C,CAAA,CACvD,CAAA,EAEFU,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,QAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,WAAA,CAAY,EAClC,KAAK,SACL,IAAK,EACL,YAAY,IAAA,CAAA,EAEdF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,QAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,WAAA,CAAY,EAClC,YAAY,GAAA,CAAA,EAEdF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,cAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,kBAAA,CAAmB,EACzC,YAAa+B,EAAM3C,EAAQ,UAAU,CAAC,EACtC,oBAAoB,MACpB,YACEU,EAAAA,IAACE,EAAA,CAAM,QAAQ,gEAAA,CAAiE,CAAA,CAAA,EAGpFF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,UAAUC,CAAU,cAC1B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,YAAA,CAAa,EACnC,YAAa+B,EAAM3C,EAAQ,UAAU,CAAC,EACtC,YAAaU,EAAAA,IAACE,EAAA,CAAM,QAAQ,sCAAA,CAAuC,EACnE,oBAAoB,MACpB,KAAK,UAAA,CAAA,CACP,EACF,CAEJ,CC5EO,SAASiC,GAAW,CAAC,UAAA3C,EAAW,WAAAC,GAAoB,CACzD,cACG,MAAA,CACC,SAAA,CAAAO,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,eAAeC,CAAU,WAC/B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,YAAA,CAAa,EACnC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,eAAeC,CAAU,YAC/B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,iBAAA,CAAkB,EACxC,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,QAAST,EACT,KAAK,KACL,UAAU,QACV,KAAM,eAAeC,CAAU,YAC/B,MAAOO,EAAAA,IAACE,EAAA,CAAM,QAAQ,iBAAA,CAAkB,EACxC,KAAK,WACL,SAAQ,EAAA,CAAA,CACV,EACF,CAEJ,CCjBO,SAASkC,GAAsB,CACpC,KAAM,CAAC,MAAAH,CAAA,EAASC,EAAA,EAChB,cACGnC,WAAA,CACC,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,UAAU,QACV,KAAK,OACL,MAAOD,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,EAC7B,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,UAAU,QACV,KAAK,OACL,MAAOD,EAAAA,IAACE,EAAA,CAAM,QAAQ,cAAA,CAAe,EACrC,oBAAoB,MACpB,YACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,gGAAA,CAAiG,EAElH,SAAQ,EAAA,CAAA,EAEVF,EAAAA,IAACC,EAAA,CACC,KAAK,KACL,UAAU,QACV,KAAK,MACL,KAAK,SACL,MAAOD,EAAAA,IAACE,EAAA,CAAM,QAAQ,eAAA,CAAgB,EACtC,YAAa+B,EAAM3C,EAAQ,UAAU,CAAC,EACtC,oBAAoB,MACpB,YACEU,EAAAA,IAACE,EAAA,CAAM,QAAQ,8EAAA,CAA+E,CAAA,CAAA,QAGjGmC,GAAA,EAAW,QACXC,GAAA,CAAA,CAAY,CAAA,EACf,CAEJ,CAEA,SAASD,IAAa,CACpB,KAAM,CAAC,YAAAE,CAAA,EAAe3C,EAAA,EACtB,OACEI,EAAAA,IAACwC,EAAA,CACC,KAAK,KACL,UAAU,QACV,KAAK,OACL,MAAOxC,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,EAC7B,kBAAmB,IAAMqC,EAAA,EACzB,kBAAcE,GAAA,EAAY,EAEzB,WAAkB,IAAIC,GACrB1C,EAAAA,IAAC2C,EAAA,CAAwB,MAAOD,EAAQ,KACtC,SAAA1C,EAAAA,IAACE,EAAA,CAAO,GAAGwC,EAAQ,MAAO,CAAA,EADjBA,EAAQ,IAEnB,CACD,CAAA,CAAA,CAGP,CAEA,SAASD,IAAc,CACrB,MAAMG,EAAOC,EAAmC,CAC9C,KAAM,MAAA,CACP,EACD,IAAIC,EAAM,KAQV,OANIF,IAAS,KACXE,EAAMC,EAAc,SAAS,GACpBH,IAAS,cAClBE,EAAMC,EAAc,SAAS,WAG1BD,EAEE9C,EAAAA,IAACgD,GAAA,CAAS,KAAMF,CAAA,CAAK,EAFX,IAGnB,CAEO,SAASR,IAAc,CAC5B,MAAMW,EAAeJ,EAAmC,CACtD,KAAM,MAAA,CACP,EAED,OAAQI,EAAA,CACN,IAAK,KACL,IAAK,eACL,IAAK,YACH,OAAOjD,EAAAA,IAAC8B,EAAA,CAAO,WAAYmB,CAAA,CAAc,EAC3C,IAAK,gBACH,OAAOjD,EAAAA,IAAC8B,EAAA,CAAO,WAAYmB,EAAc,kBAAiB,GAAC,EAC7D,IAAK,MACH,OAAOjD,EAAAA,IAAC4B,GAAA,CAAQ,WAAYqB,CAAA,CAAc,EAC5C,IAAK,OACH,OAAOjD,EAAAA,IAACgC,GAAA,CAAS,WAAYiB,CAAA,CAAc,EAC7C,IAAK,SACH,OAAOjD,EAAAA,IAACmC,GAAA,CAAW,WAAYc,CAAA,CAAc,EAC/C,IAAK,UACH,OAAOjD,EAAAA,IAACT,GAAA,CAAY,WAAY0D,CAAA,CAAc,EAChD,QACE,OAAO,IAAA,CAEb,CCjHO,SAASC,EACd1C,EACA,CACA,OAAOc,EAAY,CACjB,WAAaC,GACJC,EAAU,IACf,kDACAD,CAAA,EAGJ,QAASE,GAAK0B,EAAiB1B,EAAGjB,CAAI,CAAA,CACvC,CACH,CCLO,SAAS4C,IAAsB,CACpC,KAAM,CAAC,OAAA1C,EAAQ,MAAAC,CAAA,EAASC,EAAA,EAClBJ,EAAOC,EAA0B,CACrC,cAAe,CACb,KAAM,QACN,KAAM,GACN,KAAM,GACN,OAAQ,CAAA,CAAC,CACX,CACD,EAEK4C,EAAkBH,EAA8B1C,CAAI,EAE1D,OACEL,EAAAA,KAACY,EAAA,CAAO,KAAK,KACX,SAAA,CAAAf,MAACgB,EAAA,CACC,SAAAhB,EAAAA,IAACE,EAAA,CAAM,QAAQ,iBAAiB,EAClC,QACCe,EAAA,CACC,SAAAjB,EAAAA,IAACkB,EAAA,CACC,wBAAuB,GACvB,GAAIR,EACJ,KAAAF,EACA,SAAU8C,GAAS,CACjB,MAAM/B,EAAU,CACd,GAAIgC,EAAO,EAAE,EACb,GAAGD,EACH,OAAQA,EAAM,OAAOA,EAAM,IAAI,CAAA,EAEjCD,EAAgB,OAAO9B,EAAS,CAC9B,UAAW,IAAMZ,EAAMY,CAAO,CAAA,CAC/B,CACH,EAEA,eAACa,EAAA,CAAA,CAAoB,CAAA,CAAA,EAEzB,SACCf,EAAA,CACC,SAAA,CAAArB,EAAAA,IAACM,EAAA,CAAO,QAAQ,UAAU,QAAS,IAAMK,EAAA,EACvC,SAAAX,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAC1B,EACAF,EAAAA,IAACM,EAAA,CACC,QAAQ,OACR,MAAM,UACN,KAAK,SACL,KAAMI,EACN,SAAU2C,EAAgB,UAE1B,SAAArD,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAAA,CAC1B,CAAA,CACF,CAAA,EACF,CAEJ,CCjDO,SAASsD,GAAoB,CAAC,QAAAd,GAAiB,CACpD,KAAM,CAAC,OAAAhC,EAAQ,MAAAC,CAAA,EAASC,EAAA,EAClBJ,EAAOC,EAA0B,CACrC,cAAe,CACb,KAAMiC,EAAQ,KACd,KAAMA,EAAQ,KACd,KAAMA,EAAQ,KACd,OAAQA,EAAQ,OAChB,OAAQA,EAAQ,OACZ,CACE,CAACA,EAAQ,IAAI,EAAGA,EAAQ,MAAA,EAE1B,MAAA,CACN,CACD,EAEKW,EAAkBH,EAA8B1C,CAAI,EAE1D,OACEL,EAAAA,KAACY,EAAA,CAAO,KAAK,KACX,SAAA,CAAAf,MAACgB,EAAA,CACC,SAAAhB,EAAAA,IAACE,EAAA,CAAM,QAAQ,iBAAiB,EAClC,SACCe,EAAA,CACC,SAAA,CAAAjB,EAAAA,IAACyD,EAAA,CACC,UAAU,QACV,MAAM,SACN,YACEzD,EAAAA,IAACE,EAAA,CAAM,QAAQ,wJAAA,CAAyJ,CAAA,CAAA,EAG5KF,EAAAA,IAACkB,EAAA,CACC,wBAAuB,GACvB,GAAIR,EACJ,KAAAF,EACA,eAAgB,IAAMA,EAAK,YAAA,EAC3B,SAAU8C,GAAS,OACjB,MAAM/B,EAAoC,CACxC,GAAG+B,EACH,GAAIZ,EAAQ,GACZ,QAAQgB,EAAAJ,EAAM,SAAN,YAAAI,EAAeJ,EAAM,KAAI,EAEnCD,EAAgB,OAAO9B,EAAS,CAC9B,UAAW,IAAM,CACfZ,EAAMY,CAAO,CACf,CAAA,CACD,CACH,EAEA,eAACa,EAAA,CAAA,CAAoB,CAAA,CAAA,CACvB,EACF,SACCf,EAAA,CACC,SAAA,CAAArB,EAAAA,IAACM,EAAA,CAAO,QAAS,IAAMK,EAAA,EACrB,SAAAX,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAC1B,EACAF,EAAAA,IAACM,EAAA,CACC,QAAQ,OACR,MAAM,UACN,KAAK,SACL,KAAMI,EACN,SAAU2C,EAAgB,UAE1B,SAAArD,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAAA,CAC1B,CAAA,CACF,CAAA,EACF,CAEJ,CC7DA,MAAMyD,GAAmE,CACvE,CACE,IAAK,OACL,cAAe,GACf,MAAO,YACP,cAAe,MACf,OAAQ,IAAM3D,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,EACpC,KAAMwC,GAAW1C,EAAAA,IAAC,QAAK,UAAU,gBAAiB,WAAQ,IAAA,CAAK,CAAA,EAEjE,CACE,IAAK,OACL,cAAe,GACf,OAAQ,IAAMA,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,EACpC,KAAMwC,GAAW,OACf,MAAMkB,GAAQF,EAAArE,EAAkB,KAAKwE,GAAKA,EAAE,OAASnB,EAAQ,IAAI,IAAnD,YAAAgB,EAAsD,MACpE,OAAOE,EAAQ5D,EAAAA,IAACE,EAAA,CAAO,GAAG0D,CAAA,CAAO,EAAKlB,EAAQ,IAChD,CAAA,EAEF,CACE,IAAK,YACL,cAAe,GACf,OAAQ,IAAM1C,EAAAA,IAACE,EAAA,CAAM,QAAQ,OAAA,CAAQ,EACrC,KAAMwC,GAAW1C,EAAAA,IAAC8D,GAAA,CAAgB,QAAApB,CAAA,CAAkB,CAAA,EAEtD,CACE,IAAK,OACL,cAAe,GACf,OAAQ,IAAM1C,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,EACpC,KAAMwC,GAAW1C,EAAAA,IAAC+D,GAAA,CAAW,QAAArB,CAAA,CAAkB,CAAA,EAEjD,CACE,IAAK,UACL,cAAe,MACf,OAAQ,IAAM1C,EAAAA,IAACE,EAAA,CAAM,QAAQ,SAAA,CAAU,EACvC,WAAY,GACZ,KAAMwC,GAAW1C,EAAAA,IAACgE,GAAA,CAAc,QAAAtB,CAAA,CAAkB,EAClD,MAAO,MAAA,CAEX,EAMA,SAASqB,GAAW,CAAC,QAAArB,GAAuB,SAC1C,KAAM,CAAC,KAAAvB,CAAA,EAAQ8C,EAAA,EACTC,GAAOC,GAAAT,EAAAvC,EAAK,UAAU,cAAf,YAAAuC,EAA4B,KACvCU,GAAKA,EAAE,aAAe1B,EAAQ,MADnB,YAAAyB,EAEV,WACH,OAAOD,EAAOlE,EAAAA,IAACqE,GAAA,CAAe,MAAOH,EAAM,EAAK,GAClD,CAEA,SAASJ,GAAgB,CAAC,QAAApB,GAAuB,SAC/C,KAAM,CAAC,KAAAvB,CAAA,EAAQ8C,EAAA,EACTK,GAAQH,GAAAT,EAAAvC,EAAK,UAAU,cAAf,YAAAuC,EAA4B,KACxCU,GAAKA,EAAE,aAAe1B,EAAQ,MADlB,YAAAyB,EAEX,WACH,OAAOG,EAAQtE,EAAAA,IAACuE,GAAA,CAAgB,MAAOD,EAAO,EAAK,GACrD,CAEA,SAASN,GAAc,CAAC,QAAAtB,GAAuB,CAC7C,KAAM,CAAC,SAAA/C,EAAU,UAAA6E,CAAA,EAAa5E,EAAA,EAExB6E,EAAsB,SAAY,CACtC,MAAMC,EAAiB,MAAMC,EAAWnB,GAAqB,CAC3D,QAAAd,CAAA,CACD,EACD,GAAIgC,EAAgB,CAClB,MAAME,GAAYJ,EAAU,2BAA2B,GAAK,CAAA,GAAI,IAAIX,GAClEA,EAAE,KAAOnB,EAAQ,GAAK,CAAC,GAAGmB,EAAG,GAAGa,GAAkBb,CAAA,EAEpDlE,EAAS,4BAA6BiF,EAAU,CAC9C,YAAa,EAAA,CACd,CACH,CACF,EAEMC,EAAsB,SAAY,CAEtC,GADkB,MAAMF,EAAWG,GAAqB,CAAC,QAAApC,EAAQ,EAClD,CACb,MAAMkC,GAAYJ,EAAU,2BAA2B,GAAK,CAAA,GAAI,OAC9DX,GAAKA,EAAE,KAAOnB,EAAQ,EAAA,EAExB/C,EAAS,4BAA6BiF,EAAU,CAC9C,YAAa,EAAA,CACd,CACH,CACF,EAEA,cACGG,EAAA,CACC,SAAA,CAAA/E,EAAAA,IAACgF,GAAW,UAAU,aAAa,KAAK,KACtC,SAAAhF,EAAAA,IAACiF,KAAc,CAAA,CACjB,SACCC,EAAA,CACC,SAAA,CAAAlF,EAAAA,IAAC2C,EAAA,CAAK,MAAM,OAAO,WAAY,IAAM8B,EAAA,EACnC,SAAAzE,EAAAA,IAACE,EAAA,CAAM,QAAQ,MAAA,CAAO,CAAA,CACxB,EACAF,EAAAA,IAAC2C,EAAA,CAAK,MAAM,SAAS,WAAY,IAAMkC,EAAA,EACrC,SAAA7E,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAC1B,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CAEO,SAASiF,IAAkB,CAChC,KAAM,CAAC,SAAAxF,EAAU,UAAA6E,CAAA,EAAa5E,EAAA,EACxBgF,EACJ/B,EAAwB,CACtB,KAAM,2BAAA,CACP,GAAK,CAAA,EACR,cACG,MAAA,CACC,SAAA,CAAA1C,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAACoF,GAAA,CAAY,KAAK,KAAK,CAAA,CACzB,EACApF,EAAAA,IAAC,OAAI,UAAU,0BACb,eAACE,EAAA,CAAM,QAAQ,mBAAmB,CAAA,CACpC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAAA,CAA8B,EAC7CA,EAAAA,IAAC,MAAA,CAAI,UAAU,wEACb,SAAAA,EAAAA,IAACqF,GAAA,CACC,WAAW,OACX,gBAAiB,GACjB,QAAS1B,GACT,KAAMiB,EACN,WAAW,OACX,iBAAiB,OACjB,YAAY,cAAA,CAAA,EAEhB,EACAzE,EAAAA,KAACC,EAAA,CACC,KAAK,QACL,QAAUkD,GAA2C,CACnD,GAAIA,EAAO,CACT,MAAMgC,EAAWd,EAAU,2BAA2B,GAAK,CAAA,EAC3D7E,EAAS,4BAA6B,CAAC,GAAG2F,EAAUhC,CAAK,EAAG,CAC1D,YAAa,EAAA,CACd,CACH,CACF,EAEA,SAAA,CAAAtD,EAAAA,IAACM,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,UAAWN,EAAAA,IAACuF,GAAA,EAAQ,EACtD,SAAAvF,MAACE,EAAA,CAAM,QAAQ,cAAc,EAC/B,QACCkD,GAAA,CAAA,CAAoB,CAAA,CAAA,CAAA,CACvB,CAAA,CACF,CAAA,EACF,CAEJ,CAKA,SAAS0B,GAAoB,CAAC,QAAApC,GAAoC,OAChE,KAAM,CAAC,MAAA/B,CAAA,EAASC,EAAA,EACV,CAAC,SAAA4E,CAAA,EAAYC,EAAA,EACb,CAAC,KAAAtE,CAAA,EAAQ8C,EAAA,EAKf,OAJe,OAAO,UAAQP,EAAAvC,EAAK,OAAO,YAAZ,YAAAuC,EAAuB,QAAS,CAAA,CAAE,EAAE,KAChE,CAAC,CAACgC,EAAG9C,CAAI,IAAMA,EAAK,SAAS,SAASF,EAAQ,EAAE,CAAA,EAK9C1C,EAAAA,IAAC2F,EAAA,CACC,UAAS,GACT,MAAO3F,EAAAA,IAACE,EAAA,CAAM,QAAQ,gBAAA,CAAiB,EACvC,KACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,uEAAA,CAAwE,EAEzF,QAASF,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,EACjC,UAAW,IAAMS,EAAM,EAAK,CAAA,CAAA,EAMhCX,EAAAA,IAAC2F,EAAA,CACC,MAAO3F,EAAAA,IAACE,EAAA,CAAM,QAAQ,gBAAA,CAAiB,EACvC,SAAQ,GACR,YACG,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAE,UAAU,OACX,eAACE,EAAA,CAAM,QAAQ,gDAAgD,CAAA,CACjE,EACAF,EAAAA,IAAC,IAAA,CAAE,UAAU,OACX,SAAAA,EAAAA,IAACE,EAAA,CACC,QAAQ,iHACR,OAAQ,CACN,EAAG0F,GAAS5F,EAAAA,IAAC,SAAA,CAAQ,SAAA4F,CAAA,CAAM,CAAA,CAC7B,CAAA,EAEJ,QACC,IAAA,CACC,SAAA5F,EAAAA,IAACE,EAAA,CACC,QAAQ,yGACR,OAAQ,CACN,EAAG0F,GACD5F,EAAAA,IAAC,IAAA,CACC,UAAU,0BACV,OAAO,SACP,KAAM,GAAGwF,CAAQ,eAEhB,SAAAI,CAAA,CAAA,CACH,CAEJ,CAAA,CACF,CACF,CAAA,EACF,EAEF,QAAS5F,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAAA,CAGvC,CC5OA,SAAS2F,IAAsE,CAC7E,OAAOrE,EACJ,IAAI,8BAA8B,EAClC,KAAKJ,GAAYA,EAAS,IAAI,CACnC,CAEO,SAAS0E,IAAyB,CACvC,OAAOC,EAAS,CACd,SAAU,CAAC,qBAAqB,EAChC,QAAS,IAAMF,GAAA,CAAyB,CACzC,CACH,CCVO,SAASG,GAAc,CAAC,SAAAC,EAAU,GAAGC,GAAiC,CAC3E,KAAM,CACJ,MAAO,CAAC,SAAAC,EAAU,OAAAC,EAAQ,MAAA9C,EAAQ,CAAA,EAAI,IAAA+C,CAAA,EACtC,WAAY,CAAC,QAAAC,EAAS,MAAAC,CAAA,CAAK,EACzBC,EAAc,CAChB,KAAMN,EAAM,IAAA,CACb,EAEKO,EAAaC,EAAAA,QAAQ,IAAM,CAC/B,MAAMC,EAAarD,EACnB,OAAO,OAAOqD,GAAe,SAAW,KAAK,MAAMA,CAAU,EAAIA,CACnE,EAAG,CAACrD,CAAK,CAAC,EAEJsD,EAAoD,CACxD,SAAAT,EACA,OAAAC,EACA,MAAOK,EACP,QAAAH,EACA,aAAcC,GAAA,YAAAA,EAAO,OAAA,EAGvB,OACEvG,MAAC6G,GAAA,CAAU,SAAS,OAAO,IAAAR,EAAW,GAAGS,GAAWF,EAAWV,CAAK,EACjE,SAAAD,CAAA,CACH,CAEJ,CC3BA,MAAMc,GAAW,eAEJC,EAAoBC,GAAM,WAGrC,CAAC,CAAC,KAAAC,EAAM,GAAGhB,CAAA,EAAQG,IAEjBrG,EAAAA,IAACC,EAAA,CACC,KAAAiH,EACC,GAAGhB,EACJ,IAAAG,EACA,IAAK,EACL,IAAKU,GACL,KAAK,SACL,mBACG,OAAA,CAAK,UAAU,2BACd,SAAA/G,EAAAA,IAACE,EAAA,CAAM,QAAQ,OAAA,CAAQ,CAAA,CACzB,CAAA,CAAA,CAIP,ECFM,SAASiH,IAAqB,CACnC,KAAM,CAAC,KAAAhG,CAAA,EAAQ8C,EAAA,EACTzD,EAAOZ,EAAA,EAEPwH,EACJvE,EAAqD,CACnD,KAAM,2BAAA,CACP,GAAK,CAAA,EAER,cACG9C,WAAA,CACC,SAAA,CAAAI,EAAAA,KAACkH,EAAA,CAAsB,OAAO,cAAc,KAAK,KAC/C,SAAA,CAAArH,EAAAA,IAACE,EAAA,CAAM,QAAQ,cAAA,CAAe,EAC9BF,EAAAA,IAACE,EAAA,CAAM,QAAQ,8FAAA,CAA+F,CAAA,EAChH,EACAF,EAAAA,IAAC,MAAA,CAAI,UAAU,aACZ,gBAAO,QAAQmB,EAAK,UAAU,KAAK,EAAE,IAAI,CAAC,CAACyB,EAAM0E,CAAM,IACtDnH,EAAAA,KAACC,EAAA,CACC,KAAK,QAEL,QAASkD,GAAS,CACZA,GACF9C,EAAK,SAAS,0BAA0BoC,CAAI,GAAIU,EAAO,CACrD,eAAgB,GAChB,YAAa,EAAA,CACd,CAEL,EAEA,SAAA,CAAAnD,EAAAA,KAAC,MAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,8FAEV,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,MAAA,CAAI,UAAU,6BACb,SAAAA,EAAAA,IAACE,GAAM,QAASoH,EAAO,MAAO,CAAA,CAChC,EACAtH,EAAAA,IAAC,OAAI,UAAU,qBACb,eAACE,EAAA,CAAM,QAASoH,EAAO,WAAA,CAAa,CAAA,CACtC,CAAA,EACF,EACAtH,EAAAA,IAACuH,GAAA,CAAa,UAAU,qBAAqB,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,EAEzDvH,EAAAA,IAACwH,GAAA,CACC,KAAM5E,EACN,kBAAAwE,CAAA,CAAA,CACF,CAAA,EA5BKxE,CAAA,CA8BR,CAAA,CACH,CAAA,EACF,CAEJ,CAMA,SAAS4E,GAAiB,CAAC,KAAAN,EAAM,kBAAAE,GAA2C,CAC1E,KAAM,CAAC,OAAA1G,EAAQ,MAAAC,CAAA,EAASC,EAAA,EAClB6G,EAAS5E,EAAS,CACtB,KAAM,0BAA0BqE,CAAI,EAAA,CACrC,EACK1G,EAAOC,EAA+B,CAC1C,cAAegH,CAAA,CAChB,EACD,OACEtH,EAAAA,KAACY,EAAA,CAAO,KAAK,KACX,SAAA,CAAAf,MAACgB,EAAA,CACC,SAAAhB,EAAAA,IAACE,EAAA,CAAM,QAAQ,qBAAqB,EACtC,QACCe,EAAA,CACC,SAAAd,EAAAA,KAACe,EAAA,CACC,KAAAV,EACA,GAAIE,EACJ,SAAU4C,GAAS3C,EAAM2C,CAAK,EAC9B,UAAU,aAEV,SAAA,CAAAtD,MAAC0H,IAAc,kBAAAN,EAAsC,EACrDpH,EAAAA,IAACC,EAAA,CACC,KAAM,OACN,MAAOD,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,EAC/B,oBAAoB,MACpB,YACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,uFAAA,CAAwF,CAAA,CAAA,QAG1GyH,GAAA,EAAmB,QACnBC,GAAA,CAAA,CAAsB,CAAA,CAAA,CAAA,EAE3B,SACCvG,EAAA,CACC,SAAA,CAAArB,EAAAA,IAACM,EAAA,CAAO,QAAS,IAAMK,EAAA,EACrB,SAAAX,EAAAA,IAACE,EAAA,CAAM,QAAQ,QAAA,CAAS,CAAA,CAC1B,EACAF,EAAAA,IAACM,EAAA,CAAO,KAAK,SAAS,QAAQ,OAAO,MAAM,UAAU,KAAMI,EACzD,SAAAV,EAAAA,IAACE,EAAA,CAAM,QAAQ,SAAS,CAAA,CAC1B,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CAEA,SAASwH,GAAc,CACrB,kBAAAN,CACF,EAEG,CACD,OACEpH,EAAAA,IAAC6H,GAAA,CACC,SAAQ,GACR,MAAO7H,EAAAA,IAACE,EAAA,CAAM,QAAQ,kBAAA,CAAmB,EACzC,KAAM,WACN,YAAakH,EACb,SAAS,KACT,sBAAkB,OAAA1D,EAAA0D,GAAA,YAAAA,EAAmB,QAAUvD,EAAE,KAAOiE,EAAE,MAAxC,YAAApE,EAA6C,MAC/D,YACE1D,EAAAA,IAACE,EAAA,CAAM,QAAQ,4DAAA,CAA6D,EAG7E,SAAAwC,SACEC,EAAA,CAAsB,MAAOD,EAAQ,GACnC,SAAAA,EAAQ,IAAA,EADAA,EAAQ,EAEnB,CAAA,CAAA,CAIR,CAEA,SAASiF,IAAqB,CAC5B,OACE3H,EAAAA,IAACgH,EAAA,CACC,IAAK,EACL,oBAAoB,MACpB,MAAOhH,EAAAA,IAACE,EAAA,CAAM,QAAQ,mBAAA,CAAoB,EAC1C,KAAM,gBACN,YACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,oDAAA,CAAqD,CAAA,CAAA,CAI5E,CAEO,SAAS0H,IAAwB,CACtC,KAAM,CAAC,MAAA3F,CAAA,EAASC,EAAA,EAChB,OACE/B,EAAAA,KAAC6F,GAAA,CACC,KAAK,SACL,YAAa/D,EAAM3C,EAAQ,2BAA2B,CAAC,EACvD,MAAOU,EAAAA,IAACE,EAAA,CAAM,QAAQ,oBAAA,CAAqB,EAC3C,oBAAoB,MACpB,iBAAgB,GAChB,YACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,iEAAA,CAAkE,EAGnF,SAAA,CAAAF,EAAAA,IAAC2C,GAAK,MAAM,QACV,eAACzC,EAAA,CAAM,QAAQ,QAAQ,CAAA,CACzB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,QACV,eAACzC,EAAA,CAAM,QAAQ,QAAQ,CAAA,CACzB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,QACV,eAACzC,EAAA,CAAM,QAAQ,QAAQ,CAAA,CACzB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,OACV,eAACzC,EAAA,CAAM,QAAQ,MAAM,CAAA,CACvB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,QACV,eAACzC,EAAA,CAAM,QAAQ,MAAM,CAAA,CACvB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,OACV,eAACzC,EAAA,CAAM,QAAQ,MAAM,CAAA,CACvB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,OACV,eAACzC,EAAA,CAAM,QAAQ,MAAM,CAAA,CACvB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,OACV,eAACzC,EAAA,CAAM,QAAQ,MAAM,CAAA,CACvB,CAAA,CAAA,CAAA,CAGN,CC/LO,SAAS6H,IAAY,CAC1B,KAAM,CAAC,KAAA5G,CAAA,EAAQ8C,EAAA,EACTzD,EAAOC,EAAuB,CAClC,cAAe,CACb,OAAQ,CACN,UAAWU,EAAK,OAAO,WAAa,CAAA,CAAC,EAEvC,OAAQ,CACN,qBAAsBA,EAAK,OAAO,sBAAwB,EAAA,CAC5D,CACF,CACD,EAED,OACEhB,EAAAA,KAAC6H,GAAA,CACC,KAAAxH,EACA,MAAOR,EAAAA,IAACE,EAAA,CAAM,QAAQ,WAAA,CAAY,EAClC,SAAU6C,EAAc,SAAS,UAEjC,SAAA,CAAA/C,EAAAA,IAACmF,GAAA,EAAgB,QAChBgC,GAAA,EAAmB,QACnBc,GAAA,CAAA,CAAoB,CAAA,CAAA,CAAA,CAG3B,CAEA,SAASA,IAAsB,CAC7B,cACG,MAAA,CACC,SAAA,CAAA9H,EAAAA,KAACkH,EAAA,CAAsB,OAAO,cAAc,KAAK,KAC/C,SAAA,CAAArH,EAAAA,IAACE,EAAA,CAAM,QAAQ,iBAAA,CAAkB,EACjCF,EAAAA,IAACE,EAAA,CAAM,QAAQ,4DAAA,CAA6D,CAAA,EAC9E,QACCgI,GAAA,EAAkB,QAClBC,GAAA,CAAA,CAAe,CAAA,EAClB,CAEJ,CAEA,SAASD,IAAoB,CAC3B,OACElI,EAAAA,IAACoI,EAAA,CACC,UAAU,QACV,MAAOpI,EAAAA,IAACE,EAAA,CAAM,QAAQ,gDAAA,CAAiD,EACvE,YACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,yFAAA,CAA0F,EAG3G,SAAAF,EAAAA,IAACqI,GAAA,CACC,KAAK,wBACL,gBAAiB,GACjB,aAAc,GAEb,SAAA7I,GACCW,EAAAA,KAACqC,EAAA,CACC,QAAShD,EACT,KAAK,KACL,KAAK,8BAEL,SAAA,CAAAQ,EAAAA,IAAC2C,GAAK,MAAM,GACV,eAACzC,EAAA,CAAM,QAAQ,OAAO,CAAA,CACxB,EACAF,EAAAA,IAAC2C,GAAK,MAAM,YACV,eAACzC,EAAA,CAAM,QAAQ,sBAAsB,CAAA,CACvC,EACAF,EAAAA,IAAC2C,GAAK,MAAM,SACV,eAACzC,EAAA,CAAM,QAAQ,kBAAkB,CAAA,CACnC,CAAA,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAGN,CAEA,SAASiI,IAAiB,CACxB,KAAM,CAAC,KAAAhH,CAAA,EAAQ2E,GAAA,EACf,OACE3F,EAAAA,KAACiI,EAAA,CACC,UAAU,QACV,MAAOpI,EAAAA,IAACE,EAAA,CAAM,QAAQ,YAAA,CAAa,EACnC,YACEF,EAAAA,IAACE,EAAA,CAAM,QAAQ,mGAAA,CAAoG,EAGrH,SAAA,CAAAF,EAAAA,IAACgH,EAAA,CAAkB,KAAK,KAAK,KAAK,8BAA8B,EAChEhH,EAAAA,IAACyD,EAAA,CACC,UAAU,QACV,MAAM,UACN,KAAK,KACL,YACEzD,EAAAA,IAACE,EAAA,CACC,QAAQ,sEACR,OAAQ,CAAC,KAAMiB,GAAA,YAAAA,EAAM,QAAS,EAAGmH,GAAUtI,EAAAA,IAAC,IAAA,CAAG,SAAAsI,CAAA,CAAO,CAAA,CAAI,CAAA,CAC5D,CAAA,CAEJ,CAAA,CAAA,CAGN"}