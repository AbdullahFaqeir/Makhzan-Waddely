{"version":3,"file":"dashboard-layout-C1S9XKdL.js","sources":["../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-content.tsx","../../../common/foundation/resources/client/ui/library/utils/hooks/use-block-body-overflow.ts","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-layout.tsx"],"sourcesContent":["import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n  isScrollable?: boolean;\n  stableScrollbar?: boolean;\n}\nexport function DashboardContent({\n  children,\n  isScrollable = true,\n  stableScrollbar = true,\n}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      isScrollable && 'overflow-y-auto',\n      isScrollable && stableScrollbar && 'stable-scrollbar',\n      'dashboard-grid-content',\n      'has-[.dashboard-stable-scrollbar]:stable-scrollbar',\n    ),\n  });\n}\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow(disable: boolean = false) {\n  useEffect(() => {\n    if (disable) {\n      document.documentElement.classList.remove('no-page-overflow');\n    } else {\n      document.documentElement.classList.add('no-page-overflow');\n    }\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, [disable]);\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {Underlay} from '@ui/overlays/underlay';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '@ui/utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '@ui/utils/hooks/use-block-body-overflow';\nimport {useMediaQuery} from '@ui/utils/hooks/use-media-query';\nimport {usePrevious} from '@ui/utils/hooks/use-previous';\nimport clsx from 'clsx';\nimport {AnimatePresence} from 'framer-motion';\nimport {ComponentPropsWithoutRef, useCallback, useEffect, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  compactByDefault?: boolean;\n  initialRightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n  height?: string;\n  gridClassName?: string;\n  blockBodyOverflow?: boolean;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  compactByDefault,\n  initialRightSidenavStatus,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  height = 'h-screen',\n  className,\n  gridClassName = 'dashboard-grid',\n  blockBodyOverflow = true,\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow(!blockBodyOverflow);\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    if (!name) return compactByDefault ?? false;\n\n    const stored = getFromLocalStorage(`${name}.sidenav.compact`);\n    if (stored != null) {\n      return stored;\n    }\n\n    return compactByDefault ?? false;\n  }, [name, compactByDefault]);\n\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange,\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    if (isMobile) {\n      return 'closed';\n    }\n    if (initialRightSidenavStatus != null) {\n      return initialRightSidenavStatus;\n    }\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open',\n    );\n    if (userSelected != null) {\n      return userSelected;\n    }\n    return initialRightSidenavStatus || 'closed';\n  }, [isMobile, name, initialRightSidenavStatus]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange,\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name],\n  );\n\n  const previousIsMobile = usePrevious(isMobile);\n  useEffect(() => {\n    if (isMobile === previousIsMobile) return;\n\n    if (!isMobile) {\n      setLeftSidenavStatus(defaultLeftSidenavStatus);\n      setRightSidenavStatus(rightSidenavStatusDefault);\n    } else {\n      setLeftSidenavStatus('closed');\n      setRightSidenavStatus('closed');\n    }\n  }, [\n    isMobile,\n    defaultLeftSidenavStatus,\n    rightSidenavStatusDefault,\n    previousIsMobile,\n    setLeftSidenavStatus,\n    setRightSidenavStatus,\n  ]);\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className={clsx(\n          'relative isolate',\n          isMobile && 'dashboard-mobile-mode',\n          gridClassName,\n          className,\n          height,\n        )}\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n"],"names":["DashboardContent","children","isScrollable","stableScrollbar","cloneElement","clsx","useBlockBodyOverflow","disable","useEffect","DashboardLayout","leftSidenav","onLeftSidenavChange","rightSidenav","compactByDefault","initialRightSidenavStatus","onRightSidenavChange","name","leftSidenavCanBeCompact","height","className","gridClassName","blockBodyOverflow","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","stored","getFromLocalStorage","leftSidenavStatus","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","rightSidenavStatus","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","previousIsMobile","usePrevious","shouldShowUnderlay","jsx","DashboardLayoutContext","jsxs","AnimatePresence","Underlay"],"mappings":"4MAQO,SAASA,EAAiB,CAC/B,SAAAC,EACA,aAAAC,EAAe,GACf,gBAAAC,EAAkB,EACpB,EAA0B,CACxB,OAAOC,EAAAA,aAAaH,EAAU,CAC5B,UAAWI,EACTJ,EAAS,MAAM,UACfC,GAAgB,kBAChBA,GAAgBC,GAAmB,mBACnC,yBACA,oDAAA,CACF,CACD,CACH,CCpBO,SAASG,EAAqBC,EAAmB,GAAO,CAC7DC,EAAAA,UAAU,KACJD,EACF,SAAS,gBAAgB,UAAU,OAAO,kBAAkB,EAE5D,SAAS,gBAAgB,UAAU,IAAI,kBAAkB,EAEpD,IAAM,CACX,SAAS,gBAAgB,UAAU,OAAO,kBAAkB,CAC9D,GACC,CAACA,CAAO,CAAC,CACd,CCiBO,SAASE,EAAgB,CAC9B,SAAAR,EACA,kBAAmBS,EACnB,oBAAAC,EACA,mBAAoBC,EACpB,iBAAAC,EACA,0BAAAC,EACA,qBAAAC,EACA,KAAAC,EACA,wBAAAC,EACA,OAAAC,EAAS,WACT,UAAAC,EACA,cAAAC,EAAgB,iBAChB,kBAAAC,EAAoB,GACpB,GAAGC,CACL,EAAyB,CACvBhB,EAAqB,CAACe,CAAiB,EACvC,MAAME,EAAWC,EAAc,qBAAqB,EAa9CC,EAXyBC,EAAAA,QAAQ,IAAM,CAC3C,GAAI,CAACV,EAAM,OAAOH,GAAoB,GAEtC,MAAMc,EAASC,EAAoB,GAAGZ,CAAI,kBAAkB,EAC5D,OAAIW,GAIGd,GAAoB,EAC7B,EAAG,CAACG,EAAMH,CAAgB,CAAC,EAE+B,UAAY,OAChE,CAACgB,EAAmBC,CAAoB,EAAIC,EAChDrB,EACAa,EAAW,SAAWE,EACtBd,CAAA,EAGIqB,EAA4BN,EAAAA,QAAQ,IAAM,CAC9C,GAAIH,EACF,MAAO,SAET,GAAIT,GAA6B,KAC/B,OAAOA,EAET,MAAMmB,EAAeL,EACnB,GAAGZ,CAAI,0BACP,MAAA,EAEF,OAAIiB,IAGGnB,GAA6B,SACtC,EAAG,CAACS,EAAUP,EAAMF,CAAyB,CAAC,EACxC,CAACoB,EAAoBC,CAAsB,EAAIJ,EACnDnB,EACAoB,EACAjB,CAAA,EAEIqB,EAAwBC,EAAAA,YAC3BC,GAAmC,CAClCH,EAAuBG,CAAM,EAC7BC,EAAkB,GAAGvB,CAAI,0BAA2BsB,CAAM,CAC5D,EACA,CAACH,EAAwBnB,CAAI,CAAA,EAGzBwB,EAAmBC,EAAYlB,CAAQ,EAC7Cf,EAAAA,UAAU,IAAM,CACVe,IAAaiB,IAEZjB,GAIHO,EAAqB,QAAQ,EAC7BM,EAAsB,QAAQ,IAJ9BN,EAAqBL,CAAwB,EAC7CW,EAAsBJ,CAAyB,GAKnD,EAAG,CACDT,EACAE,EACAO,EACAQ,EACAV,EACAM,CAAA,CACD,EAED,MAAMM,EACJnB,IAAaM,IAAsB,QAAUK,IAAuB,QAEtE,OACES,EAAAA,IAACC,EAAuB,SAAvB,CACC,MAAO,CACL,kBAAAf,EACA,qBAAAC,EACA,mBAAAI,EACA,sBAAAE,EACA,wBAAAnB,EACA,KAAAD,EACA,aAAcO,CAAA,EAGhB,SAAAsB,EAAAA,KAAC,MAAA,CACE,GAAGvB,EACJ,UAAWjB,EACT,mBACAkB,GAAY,wBACZH,EACAD,EACAD,CAAA,EAGD,SAAA,CAAAjB,EACD0C,EAAAA,IAACG,GACE,SAAAJ,GACCC,EAAAA,IAACI,EAAA,CACC,SAAS,QAET,QAAS,IAAM,CACbjB,EAAqB,QAAQ,EAC7BM,EAAsB,QAAQ,CAChC,CAAA,EAJI,oBAAA,CAKN,CAEJ,CAAA,CAAA,CAAA,CACF,CAAA,CAGN"}