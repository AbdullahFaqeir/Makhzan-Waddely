import{aF as y,l as F,b5 as k,ap as w,ar as P,bo as S,k as R,g as j,b4 as _,aC as E,a3 as L,j as e,bp as A,T as s,a2 as I,ao as T,a4 as u,B as q,aJ as B,x as M,L as U,b3 as D}from"./main-BdzhGpqn.js";import{G,A as O}from"./auth-layout-6A-DzfTC.js";import{u as z,C as J}from"./use-captcha-B4_kQ1KM.js";import{L as b}from"./external-link-BX7ebgFF.js";import{F as Q}from"./checkbox-B6q4SJqi.js";import{S as V}from"./social-auth-section-CEdmvKGj.js";import"./CheckBoxOutlineBlank-DvnJQjlB.js";import"./use-social-login-BZkWBzp4.js";import"./use-all-social-logins-disabled-Cl0og6gM.js";import"./envato-Bf0_i_G0.js";import"./google-CssrBl3X.js";import"./dialog-footer-DL2JkwrZ.js";function H(a){const t=y(),{getRedirectUri:i}=F(),{inviteId:o}=k();return w({mutationFn:r=>K({invite_id:o,...r}),onSuccess:r=>{S(r.bootstrapData),r.status==="needs_email_verification"?t("/"):t(i(),{replace:!0})},onError:r=>P(r,a)})}function K(a){return R.post("auth/register",a).then(t=>t.data)}function me({inviteType:a,fields:t}){const{branding:i,registration:o,social:r}=j(),{captchaToken:l,captchaEnabled:g,resetCaptcha:f}=z("register"),{pathname:v}=_(),[p]=E(),n=v.includes("workspace")||!!a,C=p.get("redirectFrom")==="pricing",d=p.get("email")||void 0,x=L({defaultValues:{email:d}}),h=H(x);if(o!=null&&o.disable&&!n)return e.jsx(A,{to:"/login",replace:!0});let m=e.jsx(s,{message:"Create a new account"});n?m=e.jsx(s,{values:{siteName:i==null?void 0:i.site_name},message:"To join your team on :siteName, create an account"}):C&&(m=e.jsx(s,{message:"First, let's create your account"}));const N=e.jsx(s,{values:{a:c=>e.jsx(U,{className:b,to:"/login",children:c})},message:"Already have an account? <a>Sign in.</a>"});return e.jsx(G,{children:e.jsxs(O,{heading:m,message:N,children:[e.jsx(I,{children:e.jsx(s,{message:"Register"})}),e.jsxs(T,{form:x,onSubmit:async c=>{if(g&&!l){B.danger(M("Please solve the captcha challenge."));return}h.mutate({...c,captcha_token:l,invite_type:a},{onError:()=>f()})},children:[e.jsx(u,{className:"mb-32",name:"email",type:"email",disabled:!!d,label:e.jsx(s,{message:"Email"}),required:!0}),e.jsx(u,{className:"mb-32",name:"password",type:"password",label:e.jsx(s,{message:"Password"}),required:!0}),e.jsx(u,{className:"mb-32",name:"password_confirmation",type:"password",label:e.jsx(s,{message:"Confirm password"}),required:!0}),t,g&&e.jsx(J,{className:"mb-32"}),e.jsx(W,{}),e.jsx(q,{className:"block w-full",type:"submit",variant:"flat",color:"primary",size:"md",disabled:h.isPending,children:e.jsx(s,{message:"Create account"})}),e.jsx(V,{isUsingInvite:n,dividerMessage:r!=null&&r.compact_buttons?e.jsx(s,{message:"Or sign up with"}):e.jsx(s,{message:"OR"})})]})]})})}function W(){const{registration:a}=j();return a!=null&&a.policies?e.jsx("div",{className:"mb-32",children:a.policies.map(t=>e.jsx(Q,{name:t.id,className:"mb-4 block",required:!0,children:e.jsx(s,{message:"I accept the :name",values:{name:e.jsx(D,{unstyled:!0,className:()=>b,item:t})}})},t.id))}):null}export{me as RegisterPage};
