{"version":3,"file":"confirm-plan-renewal-page-hp0P9vo5.js","sources":["../../../common/foundation/resources/client/billing/billing-page/confirm-plan-renewal-page.tsx"],"sourcesContent":["import {billingQueries} from '@common/billing/billing-queries';\nimport {useQuery} from '@tanstack/react-query';\nimport {Breadcrumb} from '@ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@ui/breadcrumbs/breadcrumb-item';\nimport {Button} from '@ui/buttons/button';\nimport {FormattedDate} from '@ui/i18n/formatted-date';\nimport {Trans} from '@ui/i18n/trans';\nimport {Fragment} from 'react';\nimport {Link} from 'react-router';\nimport {useNavigate} from '../../ui/navigation/use-navigate';\nimport {FormattedPrice} from '../formatted-price';\nimport {BillingPlanPanel} from './billing-plan-panel';\nimport {useResumeSubscription} from './requests/use-resume-subscription';\nimport {invalidateBillingUserQuery, useBillingUser} from './use-billing-user';\n\nconst previousUrl = '/billing';\n\nexport function Component() {\n  const navigate = useNavigate();\n  const query = useQuery(billingQueries.products.index());\n  const {subscription} = useBillingUser();\n  const resumeSubscription = useResumeSubscription();\n\n  const product = subscription?.product;\n  const price = subscription?.price;\n\n  if (!query.data) {\n    return null;\n  }\n\n  if (!subscription || !product || !price) {\n    navigate(previousUrl);\n    return null;\n  }\n\n  const endDate = (\n    <span className=\"whitespace-nowrap\">\n      <FormattedDate date={subscription.ends_at} preset=\"long\" />;\n    </span>\n  );\n\n  const handleResumeSubscription = () => {\n    resumeSubscription.mutate(\n      {\n        subscriptionId: subscription.id,\n      },\n      {\n        onSuccess: () => {\n          invalidateBillingUserQuery();\n          navigate('/billing');\n        },\n      },\n    );\n  };\n\n  return (\n    <Fragment>\n      <Breadcrumb>\n        <BreadcrumbItem isLink onSelected={() => navigate(previousUrl)}>\n          <Trans message=\"Billing\" />\n        </BreadcrumbItem>\n        <BreadcrumbItem>\n          <Trans message=\"Renew\" />\n        </BreadcrumbItem>\n      </Breadcrumb>\n      <h1 className=\"my-32 text-3xl font-bold md:my-64\">\n        <Trans message=\"Renew your plan\" />\n      </h1>\n      <BillingPlanPanel title={<Trans message=\"Current plan\" />}>\n        <div className=\"max-w-[464px]\">\n          <div className=\"text-xl font-bold\">{product.name}</div>\n          <FormattedPrice price={price} className=\"text-lg\" />\n          <div className=\"mb-48 mt-12 border-b pb-24 text-base\">\n            <Trans\n              message=\"This plan will no longer be canceled. It will renew on :date\"\n              values={{date: endDate}}\n            />\n          </div>\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            size=\"md\"\n            className=\"mb-16 w-full\"\n            onClick={handleResumeSubscription}\n            disabled={resumeSubscription.isPending}\n          >\n            <Trans message=\"Renew plan\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            className=\"w-full\"\n            to={previousUrl}\n            elementType={Link}\n          >\n            <Trans message=\"Go back\" />\n          </Button>\n          <div className=\"mt-12 text-xs text-muted\">\n            <Trans message=\"By renewing your plan, you agree to our terms of service and privacy policy.\" />\n          </div>\n        </div>\n      </BillingPlanPanel>\n    </Fragment>\n  );\n}\n"],"names":["previousUrl","Component","navigate","useNavigate","query","useQuery","billingQueries","subscription","useBillingUser","resumeSubscription","useResumeSubscription","product","price","endDate","jsxs","jsx","FormattedDate","handleResumeSubscription","invalidateBillingUserQuery","Fragment","Breadcrumb","BreadcrumbItem","Trans","BillingPlanPanel","FormattedPrice","Button","Link"],"mappings":"glBAeA,MAAMA,EAAc,WAEb,SAASC,GAAY,CAC1B,MAAMC,EAAWC,EAAA,EACXC,EAAQC,EAASC,EAAe,SAAS,OAAO,EAChD,CAAC,aAAAC,CAAA,EAAgBC,EAAA,EACjBC,EAAqBC,EAAA,EAErBC,EAAUJ,GAAA,YAAAA,EAAc,QACxBK,EAAQL,GAAA,YAAAA,EAAc,MAE5B,GAAI,CAACH,EAAM,KACT,OAAO,KAGT,GAAI,CAACG,GAAgB,CAACI,GAAW,CAACC,EAChC,OAAAV,EAASF,CAAW,EACb,KAGT,MAAMa,EACJC,EAAAA,KAAC,OAAA,CAAK,UAAU,oBACd,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAc,KAAMT,EAAa,QAAS,OAAO,OAAO,EAAE,GAAA,EAC7D,EAGIU,EAA2B,IAAM,CACrCR,EAAmB,OACjB,CACE,eAAgBF,EAAa,EAAA,EAE/B,CACE,UAAW,IAAM,CACfW,EAAA,EACAhB,EAAS,UAAU,CACrB,CAAA,CACF,CAEJ,EAEA,cACGiB,WAAA,CACC,SAAA,CAAAL,OAACM,EAAA,CACC,SAAA,CAAAL,EAAAA,IAACM,EAAA,CAAe,OAAM,GAAC,WAAY,IAAMnB,EAASF,CAAW,EAC3D,SAAAe,EAAAA,IAACO,EAAA,CAAM,QAAQ,SAAA,CAAU,EAC3B,QACCD,EAAA,CACC,SAAAN,EAAAA,IAACO,EAAA,CAAM,QAAQ,QAAQ,CAAA,CACzB,CAAA,EACF,EACAP,EAAAA,IAAC,MAAG,UAAU,oCACZ,eAACO,EAAA,CAAM,QAAQ,kBAAkB,CAAA,CACnC,EACAP,EAAAA,IAACQ,EAAA,CAAiB,MAAOR,EAAAA,IAACO,EAAA,CAAM,QAAQ,cAAA,CAAe,EACrD,SAAAR,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oBAAqB,SAAAJ,EAAQ,KAAK,EACjDI,EAAAA,IAACS,EAAA,CAAe,MAAAZ,EAAc,UAAU,SAAA,CAAU,EAClDG,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACb,SAAAA,EAAAA,IAACO,EAAA,CACC,QAAQ,+DACR,OAAQ,CAAC,KAAMT,CAAA,CAAO,CAAA,EAE1B,EACAE,EAAAA,IAACU,EAAA,CACC,QAAQ,OACR,MAAM,UACN,KAAK,KACL,UAAU,eACV,QAASR,EACT,SAAUR,EAAmB,UAE7B,SAAAM,EAAAA,IAACO,EAAA,CAAM,QAAQ,YAAA,CAAa,CAAA,CAAA,EAE9BP,EAAAA,IAACU,EAAA,CACC,QAAQ,UACR,UAAU,SACV,GAAIzB,EACJ,YAAa0B,EAEb,SAAAX,EAAAA,IAACO,EAAA,CAAM,QAAQ,SAAA,CAAU,CAAA,CAAA,EAE3BP,EAAAA,IAAC,OAAI,UAAU,2BACb,eAACO,EAAA,CAAM,QAAQ,+EAA+E,CAAA,CAChG,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ"}