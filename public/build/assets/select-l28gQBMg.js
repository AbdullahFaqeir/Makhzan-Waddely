import{r as h,w as Y,cf as ee,j as e,P as se,b0 as ne,cg as te,aj as ae,af as oe,ch as le,T as ie,ci as re,bZ as ce,c as L,ab as ue,cj as de,ck as fe,cl as me,b_ as he,ay as pe,S as xe}from"./main-BdzhGpqn.js";function ge({isLoading:s,icon:o,size:f}){const a=h.useRef(null),{trans:p}=Y(),[c,u]=h.useState(!1),{state:{isOpen:x,inputValue:t}}=ee(),i=h.useRef(t);return h.useEffect(()=>{s&&!c?(a.current===null&&(a.current=setTimeout(()=>{u(!0)},500)),t!==i.current&&(clearTimeout(a.current),a.current=setTimeout(()=>{u(!0)},500))):s||(u(!1),clearTimeout(a.current),a.current=null),i.current=t},[s,c,t]),c&&(x||s)?e.jsx(se,{"aria-label":p({message:"Loading"}),size:"w-24 h-24",isIndeterminate:!0}):o||e.jsx(ne,{size:f})}function be(s){const o=le(),{hideCaret:f,placeholder:a=e.jsx(ie,{message:"Select an option..."}),selectedValue:p,onItemSelected:c,onOpenChange:u,onInputValueChange:x,onSelectionChange:t,selectionMode:i="single",minWidth:g="min-w-128",children:we,searchPlaceholder:D,showEmptyMessage:M,showSearchField:d,defaultInputValue:Ce,defaultSelectedValue:je,inputValue:Ie,isLoading:I,isAsync:ve,valueClassName:k,floatingWidth:O=o?"auto":"matchTrigger",ref:P,showCheckmark:R,inputRadius:z,appearance:A,...v}=s,w=re({...s,selectionMode:i,showCheckmark:R,clearInputOnItemSelection:!0,showEmptyMessage:M||d,floatingWidth:O,role:"listbox",virtualFocus:d},P),{state:{selectedValues:C,isOpen:r,setIsOpen:E,activeIndex:y,setSelectedIndex:$,inputValue:q,setInputValue:B},collections:S,focusItem:W,listboxId:F,reference:Z,refs:b,listContent:N,onInputChange:_}=w,{fieldProps:T,inputProps:G}=ce({...v,focusRef:b.reference});let j=e.jsx("span",{className:"text-main/50",children:a});if(i==="multiple"){const n=C.map(l=>{var m;return(m=S.collection.get(l))==null?void 0:m.element.props.children}).filter(Boolean);n.length>0&&(j=e.jsx("span",{className:"flex items-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:n.map((l,m)=>e.jsxs(h.Fragment,{children:[e.jsx("div",{className:"block",children:l}),m<n.length-1?e.jsx("span",{className:"mr-4 block",children:","}):null]},m))}))}else if(i==="single"){const n=S.collection.get(C[0]);n&&(j=e.jsxs("span",{className:"flex items-center gap-10",children:[n.element.props.startIcon,e.jsx("span",{className:L("overflow-hidden overflow-ellipsis whitespace-nowrap",k),children:n.element.props.children})]}))}const V=ue({...s,inputRadius:z||(A==="dropdown"?"rounded-button":"rounded-input"),endAdornment:!0}),{handleTriggerKeyDown:H,handleListboxKeyboardNavigation:J,handleListboxSearchFieldKeydown:Q}=me(w),{findMatchingItem:K}=de(),U=n=>{if(!r)return;const l=K(n,N,y);l!=null&&W("increment",l)},X=n=>{if(r)return;const l=K(n,N,y);l!=null&&$(l)};return e.jsx(fe,{listbox:w,onKeyDownCapture:d?void 0:U,onKeyDown:J,onClose:d?()=>B(""):void 0,isLoading:I,searchField:d&&e.jsx(pe,{size:s.size==="xs"||s.size==="sm"?"xs":"sm",placeholder:D,startAdornment:e.jsx(xe,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":r?"true":"false","aria-haspopup":"listbox","aria-controls":r?F:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:q,onChange:_,onKeyDown:n=>{Q(n)}}),children:e.jsxs(he,{fieldClassNames:V,...T,endAdornment:!f&&e.jsx(ge,{isLoading:I,size:s.size}),children:[e.jsx("button",{...G,type:"button","aria-expanded":r?"true":"false","aria-haspopup":"listbox","aria-controls":r?F:void 0,ref:Z,onKeyDown:H,onKeyDownCapture:d?void 0:X,disabled:v.disabled,onClick:()=>{E(!r)},className:L(V.input,!T.unstyled&&g),children:j}),e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute bottom-0 left-0 w-full opacity-0",children:e.jsx("label",{children:e.jsx("input",{tabIndex:-1,required:s.required,name:s.name,value:C[0],onChange:()=>{},onFocus:()=>{b.reference.current&&"focus"in b.reference.current&&b.reference.current.focus()}})})})]})})}function Se({children:s,...o}){const f=te(o),{field:{onChange:a,onBlur:p,value:c=null,ref:u},fieldState:{invalid:x,error:t}}=ae({name:o.name,rules:f}),i={onSelectionChange:a,onBlur:p,selectedValue:c,invalid:x,errorMessage:t==null?void 0:t.message,name:o.name},g=o.errorMessage||(t==null?void 0:t.message);return e.jsx(be,{ref:u,...oe(i,o,{errorMessage:g}),children:s})}export{ge as C,Se as F,be as S};
