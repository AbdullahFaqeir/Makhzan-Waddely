import{r as m,ad as S,bT as P,bS as O,bI as R,w as F,aj as z,bJ as $,j as t,af as B,c as E,D as A,M,R as H,B as k,T as v}from"./main-BdzhGpqn.js";import{u as I}from"./use-current-date-time-CnLDai64.js";import{u as L}from"./use-date-formatter-BlrPWK68.js";import{D as N}from"./DateRange-DT2RCJ3g.js";import{D as Z}from"./dialog-footer-DL2JkwrZ.js";import{u as J,t as U,D as V,a as q,C as G}from"./use-base-date-picker-state-DYteqbZD.js";function K(a){const o=I(),[e,f]=m.useState(!a.value&&!a.defaultValue),s=a.onChange,[n,i]=S(a.value||o,a.defaultValue||o,r=>{f(!1),s==null||s(r)}),{min:d,max:l,granularity:b,timezone:g,calendarIsOpen:D,setCalendarIsOpen:c,closeDialogOnSelection:p}=J(n,a),h=m.useCallback(()=>{f(!0),i(o),s==null||s(null),c(!1)},[o,i,s,c]),[u,x]=m.useState(()=>[P(n)]),C=m.useCallback(r=>{d&&r.compare(d)<0?r=d:l&&r.compare(l)>0&&(r=l);const j=n?n.set(r):U(r,g);i(j),x([P(j)]),f(!1)},[i,d,l,n,g]),T=m.useCallback(r=>!e&&O(n,r),[n,e]),y=m.useCallback(r=>({onClick:()=>{C==null||C(r),p&&(c==null||c(!1))}}),[C,c,p]);return{selectedValue:n,setSelectedValue:i,calendarIsOpen:D,setCalendarIsOpen:c,dayIsActive:T,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:y,calendarDates:u,setCalendarDates:x,isPlaceholder:e,clear:h,setIsPlaceholder:f,min:d,max:l,granularity:b,timezone:g,closeDialogOnSelection:p}}function Q({showCalendarFooter:a,...o}){const e=K(o),f=m.useRef(null),s=I(),n=a&&t.jsx(Z,{padding:"px-14 pb-14",startAction:t.jsx(k,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:t.jsx(v,{message:"Clear"})}),children:t.jsx(k,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(s),e.setCalendarIsOpen(!1)},children:t.jsx(v,{message:"Today"})})}),i=t.jsx(A,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:f,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:t.jsxs(M,{size:"auto",children:[t.jsx(H,{className:"flex items-start gap-40",padding:a?"px-24 pt-20 pb-10":null,children:t.jsx(G,{state:e,visibleMonths:1})}),n]})}),d={onClick:l=>{l.stopPropagation(),l.preventDefault(),W(l)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return t.jsxs(m.Fragment,{children:[t.jsx(V,{ref:f,wrapperProps:d,endAdornment:t.jsx(N,{className:E(o.disabled&&"text-disabled")}),...o,children:t.jsx(q,{segmentProps:d,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),i]})}function te(a){const{min:o,max:e}=a,f=R(),s=a.timezone||f,{trans:n}=F(),{format:i}=L({timeZone:s}),{field:{onChange:d,onBlur:l,value:b=null,ref:g},fieldState:{invalid:D,error:c}}=z({name:a.name,rules:{validate:u=>{if(!u)return;const x=$(u,s);if(o&&x.compare(o)<0)return n({message:"Enter a date after :date",values:{date:i(u)}});if(e&&x.compare(e)>0)return n({message:"Enter a date before :date",values:{date:i(u)}})}}}),p=b?$(b,s):null,h={onChange:u=>{d(u&&u.toAbsoluteString())},onBlur:l,value:p,invalid:D,errorMessage:c==null?void 0:c.message,inputRef:g};return t.jsx(Q,{...B(h,a)})}function W(a){return["hour","minute","dayPeriod"].includes(a.currentTarget.ariaLabel||"")}export{te as F};
