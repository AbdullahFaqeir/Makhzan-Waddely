{"version":3,"file":"use-filter-2rON0JC0.js","sources":["../../../common/foundation/resources/client/ui/library/i18n/use-filter.ts"],"sourcesContent":["import {useCollator} from '@ui/i18n/use-collator';\nimport {useMemo} from 'react';\n\ninterface Filter {\n  /** Returns whether a string starts with a given substring. */\n  startsWith(string: string, substring: string): boolean;\n  /** Returns whether a string ends with a given substring. */\n  endsWith(string: string, substring: string): boolean;\n  /** Returns whether a string contains a given substring. */\n  contains(string: string, substring: string): boolean;\n}\n\nexport function useFilter(options?: Intl.CollatorOptions): Filter {\n  const collator = useCollator({\n    usage: 'search',\n    ...options,\n  });\n\n  return useMemo(() => {\n    return {\n      startsWith(string, substring) {\n        if (substring.length === 0) {\n          return true;\n        }\n\n        string = string.normalize('NFC');\n        substring = substring.normalize('NFC');\n        return (\n          collator.compare(string.slice(0, substring.length), substring) === 0\n        );\n      },\n      endsWith(string, substring) {\n        if (substring.length === 0) {\n          return true;\n        }\n\n        string = string.normalize('NFC');\n        substring = substring.normalize('NFC');\n        return (\n          collator.compare(string.slice(-substring.length), substring) === 0\n        );\n      },\n      contains(string, substring) {\n        if (substring.length === 0) {\n          return true;\n        }\n\n        string = string.normalize('NFC');\n        substring = substring.normalize('NFC');\n\n        let scan = 0;\n        const sliceLen = substring.length;\n        for (; scan + sliceLen <= string.length; scan++) {\n          const slice = string.slice(scan, scan + sliceLen);\n          if (collator.compare(substring, slice) === 0) {\n            return true;\n          }\n        }\n\n        return false;\n      },\n    };\n  }, [collator]);\n}\n"],"names":["useFilter","options","collator","useCollator","useMemo","string","substring","scan","sliceLen","slice"],"mappings":"+CAYO,SAASA,EAAUC,EAAwC,CAChE,MAAMC,EAAWC,EAAY,CAC3B,MAAO,SACP,GAAGF,CAAA,CACJ,EAED,OAAOG,EAAAA,QAAQ,KACN,CACL,WAAWC,EAAQC,EAAW,CAC5B,OAAIA,EAAU,SAAW,EAChB,IAGTD,EAASA,EAAO,UAAU,KAAK,EAC/BC,EAAYA,EAAU,UAAU,KAAK,EAEnCJ,EAAS,QAAQG,EAAO,MAAM,EAAGC,EAAU,MAAM,EAAGA,CAAS,IAAM,EAEvE,EACA,SAASD,EAAQC,EAAW,CAC1B,OAAIA,EAAU,SAAW,EAChB,IAGTD,EAASA,EAAO,UAAU,KAAK,EAC/BC,EAAYA,EAAU,UAAU,KAAK,EAEnCJ,EAAS,QAAQG,EAAO,MAAM,CAACC,EAAU,MAAM,EAAGA,CAAS,IAAM,EAErE,EACA,SAASD,EAAQC,EAAW,CAC1B,GAAIA,EAAU,SAAW,EACvB,MAAO,GAGTD,EAASA,EAAO,UAAU,KAAK,EAC/BC,EAAYA,EAAU,UAAU,KAAK,EAErC,IAAIC,EAAO,EACX,MAAMC,EAAWF,EAAU,OAC3B,KAAOC,EAAOC,GAAYH,EAAO,OAAQE,IAAQ,CAC/C,MAAME,EAAQJ,EAAO,MAAME,EAAMA,EAAOC,CAAQ,EAChD,GAAIN,EAAS,QAAQI,EAAWG,CAAK,IAAM,EACzC,MAAO,EAEX,CAEA,MAAO,EACT,CAAA,GAED,CAACP,CAAQ,CAAC,CACf"}