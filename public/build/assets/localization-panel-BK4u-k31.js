import{ap as j,ar as f,aq as b,k as S,aJ as F,x as p,w as h,j as e,bl as L,a6 as d,Z as x,bC as T,r as y,a3 as z,cF as C,ao as v,T as i,B as A}from"./main-BdzhGpqn.js";import{A as E,a as I}from"./account-settings-sidenav-DvoxIF6E.js";import"./combobox-BSHBFZKL.js";import{F as g}from"./select-l28gQBMg.js";import{g as P}from"./countries-BJ4WnA-N.js";function M(n,t){return j({mutationFn:a=>S.put(`users/${n}`,a).then(o=>o.data),onSuccess:()=>{F(p("Updated account details"))},onError:a=>t?f(a,t):b(a)})}function Z({name:n,size:t,timezones:a,label:o,...r}){const{trans:l}=h();return e.jsx(g,{selectionMode:"single",name:n,size:t,label:o,showSearchField:!0,searchPlaceholder:l(p("Search timezones")),...r,children:Object.entries(a).map(([u,m])=>e.jsx(L,{label:u,children:m.map(c=>e.jsx(d,{value:c,children:c},c))},u))})}const $=x(()=>Intl.supportedValuesOf("timeZone")),w=x(()=>{const n=$(),t={};for(const a of n){const[o,r]=a.split("/");t[o]||(t[o]=[]),t[o].push(a)}return t});function k({user:n}){const t=T(s=>s.data.i18n.locales),a=y.useId(),{trans:o}=h(),r=z({defaultValues:{language:n.language||"",country:n.country||"",timezone:n.timezone||"UTC"}}),l=M(n.id,r),u=C(),m=P(),c=w();return e.jsx(E,{id:I.LocationAndLanguage,title:e.jsx(i,{message:"Date, time and language"}),actions:e.jsx(A,{type:"submit",variant:"flat",color:"primary",form:a,disabled:l.isPending||!r.formState.isValid,children:e.jsx(i,{message:"Save"})}),children:e.jsxs(v,{form:r,onSubmit:s=>{l.mutate(s),u.mutate({locale:s.language})},id:a,children:[e.jsx(g,{className:"mb-24",selectionMode:"single",name:"language",label:e.jsx(i,{message:"Language"}),children:t.map(s=>e.jsx(d,{value:s.language,children:s.name},s.language))}),e.jsx(g,{className:"mb-24",selectionMode:"single",name:"country",label:e.jsx(i,{message:"Country"}),showSearchField:!0,searchPlaceholder:o(p("Search countries")),children:m.map(s=>e.jsx(d,{value:s.code,children:s.name},s.code))}),e.jsx(Z,{label:e.jsx(i,{message:"Timezone"}),name:"timezone",timezones:c})]})})}export{k as L,M as u};
