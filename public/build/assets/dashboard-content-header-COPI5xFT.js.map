{"version":3,"file":"dashboard-content-header-COPI5xFT.js","sources":["../../../node_modules/@tanstack/query-core/build/modern/infiniteQueryObserver.js","../../../node_modules/@tanstack/react-query/build/modern/useInfiniteQuery.js","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-navbar.tsx","../../../resources/client/drive/drive-page/add-files.svg","../../../resources/client/drive/drive-page/time-management.svg","../../../resources/client/drive/drive-page/file-searching.svg","../../../resources/client/drive/drive-page/throw-away.svg","../../../resources/client/drive/drive-page/loving-it.svg","../../../resources/client/drive/shareable-link/shareable-link-page/folder-preview/share.svg","../../../resources/client/drive/drive-page/drive-page.tsx","../../../resources/client/drive/drive-store.ts","../../../resources/client/drive/entry-actions/get-public-access-link.ts","../../../resources/client/drive/files/queries/use-add-star-to-entries.ts","../../../resources/client/drive/files/queries/use-delete-entries.ts","../../../resources/client/drive/files/queries/use-duplicate-entries.ts","../../../resources/client/drive/files/queries/use-remove-star-from-entries.ts","../../../resources/client/drive/files/queries/use-restore-entries.ts","../../../resources/client/drive/share-dialog/queries/use-unshare-entries.ts","../../../resources/client/drive/shareable-link/queries/create-shareable-link.ts","../../../resources/client/drive/entry-actions/use-entry-actions.ts","../../../resources/client/drive/layout/sidebar/storage-summary/storage-summary.ts","../../../resources/client/drive/uploading/use-drive-upload-queue.ts","../../../resources/client/drive/entry-actions/use-drive-page-actions.ts","../../../resources/client/drive/entry-actions/entry-action-menu-trigger.tsx","../../../resources/client/drive/file-view/file-grid/base-file-grid-item.tsx","../../../resources/client/drive/file-view/file-table/file-table-columns.tsx","../../../resources/client/drive/layout/sorting/available-sorts.ts","../../../resources/client/drive/layout/sorting/entries-sort-button.tsx","../../../resources/client/drive/files/queries/use-folder-path.ts","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-content-header.tsx"],"sourcesContent":["// src/infiniteQueryObserver.ts\nimport { QueryObserver } from \"./queryObserver.js\";\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n} from \"./infiniteQueryBehavior.js\";\nvar InfiniteQueryObserver = class extends QueryObserver {\n  constructor(client, options) {\n    super(client, options);\n  }\n  bindMethods() {\n    super.bindMethods();\n    this.fetchNextPage = this.fetchNextPage.bind(this);\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this);\n  }\n  setOptions(options) {\n    super.setOptions({\n      ...options,\n      behavior: infiniteQueryBehavior()\n    });\n  }\n  getOptimisticResult(options) {\n    options.behavior = infiniteQueryBehavior();\n    return super.getOptimisticResult(options);\n  }\n  fetchNextPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"forward\" }\n      }\n    });\n  }\n  fetchPreviousPage(options) {\n    return this.fetch({\n      ...options,\n      meta: {\n        fetchMore: { direction: \"backward\" }\n      }\n    });\n  }\n  createResult(query, options) {\n    const { state } = query;\n    const parentResult = super.createResult(query, options);\n    const { isFetching, isRefetching, isError, isRefetchError } = parentResult;\n    const fetchDirection = state.fetchMeta?.fetchMore?.direction;\n    const isFetchNextPageError = isError && fetchDirection === \"forward\";\n    const isFetchingNextPage = isFetching && fetchDirection === \"forward\";\n    const isFetchPreviousPageError = isError && fetchDirection === \"backward\";\n    const isFetchingPreviousPage = isFetching && fetchDirection === \"backward\";\n    const result = {\n      ...parentResult,\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(options, state.data),\n      hasPreviousPage: hasPreviousPage(options, state.data),\n      isFetchNextPageError,\n      isFetchingNextPage,\n      isFetchPreviousPageError,\n      isFetchingPreviousPage,\n      isRefetchError: isRefetchError && !isFetchNextPageError && !isFetchPreviousPageError,\n      isRefetching: isRefetching && !isFetchingNextPage && !isFetchingPreviousPage\n    };\n    return result;\n  }\n};\nexport {\n  InfiniteQueryObserver\n};\n//# sourceMappingURL=infiniteQueryObserver.js.map","\"use client\";\n\n// src/useInfiniteQuery.ts\nimport { InfiniteQueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useInfiniteQuery(options, queryClient) {\n  return useBaseQuery(\n    options,\n    InfiniteQueryObserver,\n    queryClient\n  );\n}\nexport {\n  useInfiniteQuery\n};\n//# sourceMappingURL=useInfiniteQuery.js.map","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '@ui/utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@ui/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","export default \"__VITE_ASSET__B0b4Fjio__\"","export default \"__VITE_ASSET__8tIiWDrd__\"","export default \"__VITE_ASSET__2eGncLGZ__\"","export default \"__VITE_ASSET__BrALUwUX__\"","export default \"__VITE_ASSET___WoDMA1l__\"","export default \"__VITE_ASSET__r_AvuaEm__\"","import type {DriveFolder} from '@app/drive/files/drive-entry';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport addFilesSvg from '@app/drive/drive-page/add-files.svg';\nimport timeManagement from '@app/drive/drive-page/time-management.svg';\nimport fileSearching from '@app/drive/drive-page/file-searching.svg';\nimport throwAwaySvg from '@app/drive/drive-page/throw-away.svg';\nimport lovingItSvg from '@app/drive/drive-page/loving-it.svg';\nimport shareSvg from '@app/drive/shareable-link/shareable-link-page/folder-preview/share.svg';\nimport {DriveSortDescriptor} from '@app/drive/drive-store';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\nimport {BootstrapData} from '@ui/bootstrap-data/bootstrap-data';\n\ninterface NoContentMessage {\n  title: MessageDescriptor;\n  description: MessageDescriptor;\n  image: string;\n}\n\nexport interface DrivePage {\n  uniqueId: string;\n  name: string;\n  label: MessageDescriptor | string;\n  path: string;\n  hasActions?: boolean;\n  canUpload?: boolean;\n  disableSort?: boolean;\n  sortDescriptor: DriveSortDescriptor;\n  queryParams?: Record<string, string | number | boolean>;\n  folder?: DriveFolder;\n  isFolderPage?: boolean;\n  noContentMessage: (isSearchingOrFiltering: boolean) => NoContentMessage;\n}\n\nconst defaultSortDescriptor: DriveSortDescriptor = {\n  orderBy: 'updated_at',\n  orderDir: 'desc',\n};\n\nexport function makeFolderPage(folder: DriveFolder): DrivePage {\n  return {\n    ...makePartialFolderPage(folder.hash),\n    canUpload:\n      folder.permissions['files.create'] || folder.permissions['files.update'],\n    label: folder.name,\n    folder,\n  };\n}\n\nexport function makePartialFolderPage(hash: string): DrivePage {\n  return {\n    name: 'folder',\n    uniqueId: hash,\n    label: '',\n    path: getPathForFolder(hash),\n    hasActions: true,\n    canUpload: false,\n    sortDescriptor: defaultSortDescriptor,\n    isFolderPage: true,\n    noContentMessage: () => ({\n      title: message('Drop files or folders here'),\n      description: message('Or use the \"Upload\" button'),\n      image: addFilesSvg,\n    }),\n  };\n}\n\nexport function getPathForFolder(hash: string): string {\n  if (hash === '0') {\n    return '/drive';\n  }\n  return `/drive/folders/${hash}`;\n}\n\n// bootstrap data will always be available at this point\ninterface BootstrapDataWithRootFolder extends BootstrapData {\n  rootFolder: DriveFolder;\n}\nconst rootFolder = (getBootstrapData() as BootstrapDataWithRootFolder)\n  .rootFolder;\nexport const RootFolderPage = {\n  ...makeFolderPage(rootFolder),\n  name: 'home',\n} as Required<DrivePage>;\n\nexport const RecentPage: DrivePage = {\n  name: 'recent',\n  uniqueId: 'recent',\n  label: message('Recent'),\n  path: '/drive/recent',\n  disableSort: true,\n  sortDescriptor: {\n    orderBy: 'created_at',\n    orderDir: 'desc',\n  },\n  queryParams: {\n    recentOnly: true,\n  },\n  noContentMessage: () => ({\n    title: message('No recent entries'),\n    description: message('You have not uploaded any files or folders yet'),\n    image: timeManagement,\n  }),\n};\n\nexport const SearchPage: DrivePage = {\n  name: 'search',\n  uniqueId: 'search',\n  label: message('Search results'),\n  path: '/drive/search',\n  sortDescriptor: defaultSortDescriptor,\n  noContentMessage: isSearchingOrFiltering => {\n    if (isSearchingOrFiltering) {\n      return {\n        title: message('No matching results'),\n        description: message('Try changing your search query or filters'),\n        image: fileSearching,\n      };\n    }\n    return {\n      title: message('Begin typing or select a filter to search'),\n      description: message('Search for files, folders and other content'),\n      image: fileSearching,\n    };\n  },\n};\n\nexport const SharesPage: DrivePage = {\n  name: 'sharedWithMe',\n  uniqueId: 'sharedWithMe',\n  label: message('Shared'),\n  path: '/drive/shares',\n  sortDescriptor: defaultSortDescriptor,\n  queryParams: {\n    sharedOnly: true,\n  },\n  noContentMessage: () => ({\n    title: message('Shared with me'),\n    description: message('Files and folders other people have shared with you'),\n    image: shareSvg,\n  }),\n};\n\nexport const TrashPage: DrivePage = {\n  name: 'trash',\n  uniqueId: 'trash',\n  label: message('Trash'),\n  path: '/drive/trash',\n  sortDescriptor: defaultSortDescriptor,\n  hasActions: true,\n  queryParams: {\n    deletedOnly: true,\n  },\n  noContentMessage: () => ({\n    title: message('Trash is empty'),\n    description: message(\n      'There are no files or folders in your trash currently',\n    ),\n    image: throwAwaySvg,\n  }),\n};\n\nexport const StarredPage: DrivePage = {\n  name: 'starred',\n  uniqueId: 'starred',\n  label: message('Starred'),\n  path: '/drive/starred',\n  sortDescriptor: defaultSortDescriptor,\n  queryParams: {\n    starredOnly: true,\n  },\n  noContentMessage: () => ({\n    title: message('Nothing is starred'),\n    description: message(\n      'Add stars to files and folders that you want to easily find later',\n    ),\n    image: lovingItSvg,\n  }),\n};\n\nexport const DRIVE_PAGES = [\n  RootFolderPage,\n  RecentPage,\n  SearchPage,\n  SharesPage,\n  TrashPage,\n  StarredPage,\n];\n","import type {DrivePage} from '@app/drive/drive-page/drive-page';\nimport {DriveEntry} from '@app/drive/files/drive-entry';\nimport {\n  SortColumn,\n  SortDirection,\n} from '@app/drive/layout/sorting/available-sorts';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '@ui/utils/hooks/local-storage';\nimport {enableMapSet} from 'immer';\nimport {Key} from 'react';\nimport {create} from 'zustand';\nimport {immer} from 'zustand/middleware/immer';\n\nconst stableArray: DriveEntry[] = [];\nenableMapSet();\n\nexport type DriveDialog =\n  | 'rename'\n  | 'newFolder'\n  | 'preview'\n  | 'share'\n  | 'moveTo'\n  | 'confirmAndDeleteForever'\n  | 'trashFolderBlock';\n\nexport interface ActiveActionDialog {\n  name: DriveDialog;\n  entries: DriveEntry[];\n}\n\nexport interface DriveSortDescriptor {\n  orderBy?: SortColumn;\n  orderDir?: SortDirection;\n}\n\ninterface State {\n  uploadQueueIsOpen: boolean;\n  selectedEntries: Set<number>;\n  sidebarExpandedKeys: Key[];\n  activePage?: DrivePage;\n  activeActionDialog?: {\n    name: DriveDialog;\n    entries: DriveEntry[];\n  } | null;\n  entriesBeingDragged: number[];\n  viewMode: 'grid' | 'list';\n  sortDescriptor: DriveSortDescriptor;\n  contextMenuData: {x: number; y: number; entry?: DriveEntry} | null;\n}\n\ninterface Actions {\n  setUploadQueueIsOpen: (isOpen: boolean) => void;\n  setSidebarExpandedKeys: (keys: Key[]) => void;\n  expandSidebarItem: (key: Key) => void;\n  collapseSidebarItem: (key: Key) => void;\n  toggleSidebarItem: (key: Key) => void;\n  setActivePage: (page: DrivePage) => void;\n  setActiveActionDialog: (\n    name: DriveDialog | null,\n    entries?: DriveEntry[],\n  ) => void;\n  setViewMode: (mode: 'grid' | 'list') => void;\n  setSortDescriptor: (value: DriveSortDescriptor) => void;\n  setContextMenuData: (\n    position: {x: number; y: number; entry?: DriveEntry} | null,\n  ) => void;\n  setEntriesBeingDragged: (value: number[]) => void;\n  selectEntries: (\n    entries: (number | undefined | null)[],\n    merge?: boolean,\n  ) => void;\n  deselectEntries: (entries: number[] | 'all') => void;\n  reset: () => void;\n}\n\nconst initialState: State = {\n  uploadQueueIsOpen: false,\n  contextMenuData: null,\n  selectedEntries: new Set(),\n  entriesBeingDragged: [],\n  activeActionDialog: null,\n  sidebarExpandedKeys: [],\n  viewMode:\n    getFromLocalStorage<'list' | 'grid'>(\n      'drive.viewMode',\n      getBootstrapData().settings?.drive?.default_view,\n    ) || 'grid',\n  sortDescriptor: {\n    orderBy: 'updated_at',\n    orderDir: 'desc',\n  },\n};\n\nexport const useDriveStore = create<State & Actions>()(\n  immer((set, get) => ({\n    ...initialState,\n    setUploadQueueIsOpen: isOpen => {\n      set(state => {\n        state.uploadQueueIsOpen = isOpen;\n      });\n    },\n    setContextMenuData: data => {\n      set(state => {\n        state.contextMenuData = data;\n      });\n    },\n    setSortDescriptor: value => {\n      set(state => {\n        const activePageId = get().activePage?.uniqueId;\n        if (activePageId) {\n          setInLocalStorage('selectedSorting', {\n            ...getStoredSorting(),\n            [activePageId]: value,\n          });\n        }\n        state.sortDescriptor = value;\n      });\n    },\n    setActivePage: value => {\n      set(state => {\n        state.activePage = value;\n        const storedDescriptor = getStoredSorting()[value.uniqueId];\n        state.sortDescriptor = storedDescriptor\n          ? storedDescriptor\n          : value.sortDescriptor;\n\n        // deselect entries when page changes\n        if (\n          value.uniqueId !== get().activePage?.uniqueId &&\n          state.selectedEntries.size\n        ) {\n          state.selectedEntries.clear();\n        }\n      });\n    },\n    setEntriesBeingDragged: value => {\n      set(state => {\n        state.entriesBeingDragged = value;\n      });\n    },\n    setActiveActionDialog: (name, entries = stableArray) => {\n      set(state => {\n        const current = get().activeActionDialog;\n        // prevent creating a new object, if neither name nor entries changed\n        if (current?.name !== name || current.entries !== entries) {\n          state.activeActionDialog = name ? {name, entries} : null;\n        }\n      });\n    },\n    setViewMode: mode => {\n      set(state => {\n        state.viewMode = mode;\n        setInLocalStorage('drive.viewMode', mode);\n      });\n    },\n    setSidebarExpandedKeys: value =>\n      set(state => {\n        state.sidebarExpandedKeys = value;\n      }),\n    expandSidebarItem: key =>\n      set(state => {\n        if (!state.sidebarExpandedKeys.includes(key)) {\n          state.sidebarExpandedKeys.push(key);\n        }\n      }),\n    collapseSidebarItem: key =>\n      set(state => {\n        const index = state.sidebarExpandedKeys.indexOf(key);\n        if (index > -1) {\n          state.sidebarExpandedKeys.splice(index, 1);\n        }\n      }),\n    toggleSidebarItem: key =>\n      set(state => {\n        if (state.sidebarExpandedKeys.includes(key)) {\n          state.expandSidebarItem(key);\n        } else {\n          state.collapseSidebarItem(key);\n        }\n      }),\n    selectEntries: (entries, merge) => {\n      set(state => {\n        if (!merge) {\n          state.selectedEntries.clear();\n        }\n        entries.forEach(e => e && state.selectedEntries.add(e));\n      });\n    },\n    deselectEntries: entries => {\n      set(state => {\n        if (!state.selectedEntries.size) return;\n        if (entries === 'all') {\n          state.selectedEntries = new Set();\n        } else {\n          entries.forEach(e => state.selectedEntries.delete(e));\n        }\n      });\n    },\n    reset: () => {\n      set(initialState);\n    },\n  })),\n);\n\nexport function driveState() {\n  return useDriveStore.getState();\n}\n\nexport function useActiveDialogEntry() {\n  const dialog = useDriveStore(s => s.activeActionDialog);\n  // this will only be used inside dialog, so entry will always be set in that case\n  return dialog?.entries[0]!;\n}\n\nfunction getStoredSorting(): Record<string, DriveSortDescriptor> {\n  return getFromLocalStorage('selectedSorting') || {};\n}\n","import {DriveEntry} from '@app/drive/files/drive-entry';\nimport {ShareableLink} from '@app/drive/shareable-link/shareable-link';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\n\nexport function getShareableLink(linkOrHash: ShareableLink | string) {\n  const baseUrl = getBootstrapData().settings.base_url;\n  return `${baseUrl}/drive/s/${typeof linkOrHash === 'string' ? linkOrHash : linkOrHash.hash}`;\n}\n\nexport function getDirectLink(link: ShareableLink, entry: DriveEntry) {\n  const baseUrl = getBootstrapData().settings.base_url;\n  return `${baseUrl}/d/${link.hash}/${entry.hash}.${entry.extension}`;\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {Tag} from '@common/tags/tag';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\n\ninterface Response extends BackendResponse {\n  tag: Tag;\n}\n\ninterface Payload {\n  entryIds: number[];\n}\n\nfunction addStarToEntries({entryIds}: Payload): Promise<Response> {\n  return apiClient\n    .post('file-entries/star', {entryIds})\n    .then(response => response.data);\n}\n\nexport function useAddStarToEntries() {\n  return useMutation({\n    mutationFn: (payload: Payload) => addStarToEntries(payload),\n    onSuccess: (data, {entryIds}) => {\n      queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n      toast(\n        message('Starred [one 1 item|other :count items]', {\n          values: {count: entryIds.length},\n        }),\n      );\n    },\n    onError: err => showHttpErrorToast(err, message('Could not star items')),\n  });\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {getAxiosErrorMessage} from '@common/http/get-axios-error-message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {toast} from '@ui/toast/toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  entryIds: number[];\n  emptyTrash?: boolean;\n  deleteForever?: boolean;\n}\n\nfunction deleteEntries(payload: Payload): Promise<Response> {\n  return apiClient\n    .post('file-entries/delete', payload)\n    .then(response => response.data);\n}\n\nexport function useDeleteEntries() {\n  return useMutation({\n    mutationFn: (payload: Payload) => {\n      toast.loading(getLoaderMessage(payload), {disableExitAnimation: true});\n      return deleteEntries(payload);\n    },\n    onSuccess: (r, {entryIds, emptyTrash, deleteForever}) => {\n      queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n      if (emptyTrash) {\n        toast(message('Emptied trash'), {disableEnterAnimation: true});\n      } else if (deleteForever) {\n        toast(\n          message('Permanently deleted [one 1 item|other :count items]', {\n            values: {count: entryIds.length},\n          }),\n          {disableEnterAnimation: true},\n        );\n      } else {\n        toast(\n          message('Moved [one 1 item|other :count items] to trash', {\n            values: {count: entryIds.length},\n          }),\n          {disableEnterAnimation: true},\n        );\n      }\n    },\n    onError: (err, {emptyTrash}) => {\n      const backendError = getAxiosErrorMessage(err);\n      if (backendError) {\n        toast.danger(backendError, {disableEnterAnimation: true});\n      } else if (emptyTrash) {\n        toast.danger('could not empty trash', {disableEnterAnimation: true});\n      } else {\n        toast.danger('Could not delete items', {disableEnterAnimation: true});\n      }\n    },\n  });\n}\n\nfunction getLoaderMessage(payload: Payload): MessageDescriptor {\n  if (payload.emptyTrash) {\n    return message('Emptying trash...');\n  } else if (payload.deleteForever) {\n    return message('Deleting files...');\n  } else {\n    return message('Moving to trash...');\n  }\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {DriveEntry} from '@app/drive/files/drive-entry';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\n\ninterface Response extends BackendResponse {\n  entries: DriveEntry[];\n}\n\ninterface Payload {\n  entryIds: number[];\n  destinationId?: number;\n}\n\nfunction duplicateEntries(payload: Payload): Promise<Response> {\n  return apiClient\n    .post('file-entries/duplicate', payload)\n    .then(response => response.data);\n}\n\nexport function useDuplicateEntries() {\n  return useMutation({\n    mutationFn: (payload: Payload) => {\n      toast.loading(\n        message('Duplicating [one 1 item|other :count items]...', {\n          values: {\n            count: payload.entryIds.length,\n          },\n        }),\n        {disableExitAnimation: true},\n      );\n      return duplicateEntries(payload);\n    },\n    onSuccess: (r, p) => {\n      queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n      toast(\n        message('Duplicated [one 1 item|other :count items]', {\n          values: {count: p.entryIds.length},\n        }),\n        {disableEnterAnimation: true},\n      );\n    },\n    onError: err =>\n      showHttpErrorToast(err, message('Could not duplicate items'), null, {\n        disableEnterAnimation: true,\n      }),\n  });\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {Tag} from '@common/tags/tag';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\n\ninterface Response extends BackendResponse {\n  tag: Tag;\n}\n\ninterface Payload {\n  entryIds: number[];\n}\n\nfunction removeStarFromEntries({entryIds}: Payload): Promise<Response> {\n  return apiClient\n    .post('file-entries/unstar', {entryIds})\n    .then(response => response.data);\n}\n\nexport function useRemoveStarFromEntries() {\n  return useMutation({\n    mutationFn: (payload: Payload) => removeStarFromEntries(payload),\n    onSuccess: (data, {entryIds}) => {\n      queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n      toast(\n        message('Removed star from [one 1 item|other :count items]', {\n          values: {count: entryIds.length},\n        }),\n      );\n    },\n    onError: err => showHttpErrorToast(err, message('Could not remove star')),\n  });\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  entryIds: number[];\n}\n\nexport function useRestoreEntries() {\n  return useMutation({\n    mutationFn: (payload: Payload) => restoreEntries(payload),\n    onSuccess: (r, p) => {\n      queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n      toast(\n        message('Restored [one 1 item|other :count items]', {\n          values: {count: p.entryIds.length},\n        }),\n      );\n    },\n    onError: err => showHttpErrorToast(err, message('Could not restore items')),\n  });\n}\n\nfunction restoreEntries(payload: Payload): Promise<Response> {\n  return apiClient\n    .post('file-entries/restore', payload)\n    .then(response => response.data);\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {DriveEntryUser} from '@app/drive/files/drive-entry';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useMutation} from '@tanstack/react-query';\n\ninterface Response extends BackendResponse {\n  users: DriveEntryUser[];\n}\n\ninterface Payload {\n  userId: number | 'me';\n  entryIds: number[];\n}\n\nexport function useUnshareEntries() {\n  return useMutation({\n    mutationFn: (payload: Payload) => unshareEntries(payload),\n    onSuccess: () => {\n      return queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n    },\n  });\n}\n\nfunction unshareEntries({entryIds, ...payload}: Payload): Promise<Response> {\n  return apiClient\n    .post(`file-entries/${entryIds.join(',')}/unshare`, payload)\n    .then(response => response.data);\n}\n","import {appQueries} from '@app/app-queries';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {FetchShareableLinkResponse} from './use-entry-shareable-link';\n\ninterface Payload {\n  entryId: number;\n  enableDirectLinks?: boolean;\n}\nexport function useCreateShareableLink() {\n  return useMutation({\n    mutationFn: (payload: Payload) => createShareableLink(payload),\n    onSuccess: (data, {entryId}) => {\n      queryClient.setQueryData<FetchShareableLinkResponse>(\n        appQueries.shareableLinks.getEntryShareableLink(entryId).queryKey,\n        data,\n      );\n    },\n    onError: err => showHttpErrorToast(err, message('Could not create link')),\n  });\n}\n\nfunction createShareableLink(\n  payload: Payload,\n): Promise<FetchShareableLinkResponse> {\n  if (!payload.entryId) {\n    return Promise.reject(new Error('Invalid entry id'));\n  }\n  return apiClient\n    .post(`file-entries/${payload.entryId}/shareable-link`, {\n      enableDirectLinks: payload.enableDirectLinks,\n    })\n    .then(response => response.data);\n}\n","import {SharesPage, TrashPage} from '@app/drive/drive-page/drive-page';\nimport {driveState, useDriveStore} from '@app/drive/drive-store';\nimport {EntryAction} from '@app/drive/entry-actions/entry-action';\nimport {\n  getDirectLink,\n  getShareableLink,\n} from '@app/drive/entry-actions/get-public-access-link';\nimport {DriveEntry} from '@app/drive/files/drive-entry';\nimport {useAddStarToEntries} from '@app/drive/files/queries/use-add-star-to-entries';\nimport {useDeleteEntries} from '@app/drive/files/queries/use-delete-entries';\nimport {useDuplicateEntries} from '@app/drive/files/queries/use-duplicate-entries';\nimport {useRemoveStarFromEntries} from '@app/drive/files/queries/use-remove-star-from-entries';\nimport {useRestoreEntries} from '@app/drive/files/queries/use-restore-entries';\nimport {useUnshareEntries} from '@app/drive/share-dialog/queries/use-unshare-entries';\nimport {useCreateShareableLink} from '@app/drive/shareable-link/queries/create-shareable-link';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {message} from '@ui/i18n/message';\nimport {ContentCopyIcon} from '@ui/icons/material/ContentCopy';\nimport {DeleteIcon} from '@ui/icons/material/Delete';\nimport {DriveFileMoveIcon} from '@ui/icons/material/DriveFileMove';\nimport {DriveFileRenameOutlineIcon} from '@ui/icons/material/DriveFileRenameOutline';\nimport {FileDownloadIcon} from '@ui/icons/material/FileDownload';\nimport {LinkIcon} from '@ui/icons/material/Link';\nimport {PersonAddIcon} from '@ui/icons/material/PersonAdd';\nimport {RemoveRedEyeIcon} from '@ui/icons/material/RemoveRedEye';\nimport {RestoreIcon} from '@ui/icons/material/Restore';\nimport {StarIcon} from '@ui/icons/material/Star';\nimport {StarOutlineIcon} from '@ui/icons/material/StarOutline';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {toast} from '@ui/toast/toast';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport copy from 'copy-to-clipboard';\n\nexport function useEntryActions(entries: DriveEntry[]): EntryAction[] {\n  const preview = usePreviewAction(entries);\n  const share = useShareAction(entries);\n  const copyLink = useCopyLinkAction(entries);\n  const addStar = useAddToStarredAction(entries);\n  const removeStar = useRemoveFromStarred(entries);\n  const moveTo = useMoveToAction(entries);\n  const rename = useRenameAction(entries);\n  const makeCopy = useMakeCopyAction(entries);\n  const download = useDownloadEntriesAction(entries);\n  const deleteAction = useDeleteEntriesAction(entries);\n  const removeSharedEntries = useRemoveSharedEntriesAction(entries);\n  const restoreEntries = useRestoreEntriesAction(entries);\n\n  return [\n    preview,\n    share,\n    copyLink,\n    addStar,\n    removeStar,\n    moveTo,\n    rename,\n    makeCopy,\n    download,\n    deleteAction,\n    removeSharedEntries,\n    restoreEntries,\n  ].filter(action => !!action) as EntryAction[];\n}\n\nexport function usePreviewAction(\n  entries: DriveEntry[],\n): EntryAction | undefined {\n  if (!entries.some(e => e.type !== 'folder')) return;\n  return {\n    label: message('Preview'),\n    icon: RemoveRedEyeIcon,\n    key: 'preview',\n    execute: () => {\n      driveState().setActiveActionDialog('preview', entries);\n    },\n  };\n}\n\nexport function useShareAction(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  if (\n    entries.length > 1 ||\n    !entries.every(e => e.permissions['files.update']) ||\n    activePage === TrashPage\n  )\n    return;\n\n  return {\n    label: message('Share'),\n    icon: PersonAddIcon,\n    key: 'share',\n    execute: () => {\n      driveState().setActiveActionDialog('share', entries);\n    },\n  };\n}\n\nfunction useCopyLinkAction(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  const {drive} = useSettings();\n  const createLink = useCreateShareableLink();\n  if (\n    entries.length > 1 ||\n    !entries.every(e => e.permissions['files.update']) ||\n    activePage === TrashPage\n  ) {\n    return;\n  }\n  return {\n    label: message('Copy link'),\n    icon: LinkIcon,\n    key: 'copyLink',\n    execute: async () => {\n      const isUsingDirectLinks =\n        drive?.copy_link_default === 'direct' && entries[0].type !== 'folder';\n      const r = await createLink.mutateAsync({\n        entryId: entries[0].id,\n        enableDirectLinks: isUsingDirectLinks,\n      });\n      if (r.link) {\n        const publicLink = isUsingDirectLinks\n          ? getDirectLink(r.link, entries[0])\n          : getShareableLink(r.link);\n        copy(publicLink);\n        toast(message('Link copied'), {\n          action: {\n            label: message('Manage access'),\n            onExecute: () => {\n              driveState().setActiveActionDialog('share', entries);\n            },\n          },\n        });\n      } else {\n        toast.danger(message('Could not create link'));\n      }\n    },\n  };\n}\n\nfunction useAddToStarredAction(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  const starEntries = useAddStarToEntries();\n  if (\n    entries.every(e => e.tags?.find(tag => tag.name === 'starred')) ||\n    !entries.every(e => e.permissions['files.update']) ||\n    activePage === TrashPage\n  ) {\n    return;\n  }\n  return {\n    label: message('Add to starred'),\n    icon: StarIcon,\n    key: 'addToStarred',\n    execute: () => {\n      starEntries.mutate({entryIds: entries.map(e => e.id)});\n      driveState().selectEntries([]);\n    },\n  };\n}\n\nfunction useRemoveFromStarred(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  const removeStar = useRemoveStarFromEntries();\n  if (\n    !entries.every(e => e.tags?.find(tag => tag.name === 'starred')) ||\n    activePage === TrashPage\n  )\n    return;\n  return {\n    label: message('Remove from starred'),\n    icon: StarOutlineIcon,\n    key: 'removeFromStarred',\n    execute: () => {\n      removeStar.mutate({entryIds: entries.map(e => e.id)});\n      driveState().selectEntries([]);\n    },\n  };\n}\n\nfunction useMoveToAction(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  if (\n    !entries.every(e => e.permissions['files.update']) ||\n    activePage === SharesPage ||\n    activePage === TrashPage\n  ) {\n    return;\n  }\n\n  return {\n    label: message('Move to'),\n    icon: DriveFileMoveIcon,\n    key: 'moveTo',\n    execute: () => {\n      driveState().setActiveActionDialog('moveTo', entries);\n    },\n  };\n}\n\nfunction useRenameAction(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  if (\n    entries.length > 1 ||\n    !entries.every(e => e.permissions['files.update']) ||\n    activePage === TrashPage\n  )\n    return;\n  return {\n    label: message('Rename'),\n    icon: DriveFileRenameOutlineIcon,\n    key: 'rename',\n    execute: () => {\n      driveState().setActiveActionDialog('rename', entries);\n    },\n  };\n}\n\nfunction useMakeCopyAction(entries: DriveEntry[]): EntryAction | undefined {\n  const activePage = useDriveStore(s => s.activePage);\n  const duplicateEntries = useDuplicateEntries();\n  if (\n    entries.length > 1 ||\n    !entries.every(e => e.permissions['files.update']) ||\n    activePage === TrashPage\n  ) {\n    return;\n  }\n  return {\n    label: message('Make a copy'),\n    icon: ContentCopyIcon,\n    key: 'makeCopy',\n    execute: () => {\n      duplicateEntries.mutate({\n        entryIds: entries.map(e => e.id),\n        destinationId: activePage?.folder?.id,\n      });\n      driveState().selectEntries([]);\n    },\n  };\n}\n\nfunction useDownloadEntriesAction(\n  entries: DriveEntry[],\n): EntryAction | undefined {\n  const {downloadUrl} = useFileEntryUrls(entries[0], {\n    downloadHashes: entries.map(e => e.hash),\n  });\n  if (!entries.every(e => e.permissions['files.download'])) return;\n  return {\n    label: message('Download'),\n    icon: FileDownloadIcon,\n    key: 'download',\n    execute: () => {\n      if (downloadUrl) {\n        downloadFileFromUrl(downloadUrl);\n      }\n      driveState().selectEntries([]);\n    },\n  };\n}\n\nexport function useDeleteEntriesAction(\n  entries: DriveEntry[],\n): EntryAction | undefined {\n  const deleteEntries = useDeleteEntries();\n  const activePage = useDriveStore(s => s.activePage);\n  if (\n    activePage === SharesPage ||\n    !entries.every(e => e.permissions['files.delete'])\n  )\n    return;\n  return {\n    label:\n      activePage === TrashPage ? message('Delete forever') : message('Remove'),\n    icon: DeleteIcon,\n    key: 'delete',\n    execute: () => {\n      if (activePage === TrashPage) {\n        driveState().setActiveActionDialog('confirmAndDeleteForever', entries);\n      } else {\n        deleteEntries.mutate({\n          entryIds: entries.map(e => e.id),\n          deleteForever: activePage === TrashPage,\n        });\n        driveState().selectEntries([]);\n      }\n    },\n  };\n}\n\nexport function useRestoreEntriesAction(\n  entries: DriveEntry[],\n): EntryAction | undefined {\n  const restoreEntries = useRestoreEntries();\n  const activePage = useDriveStore(s => s.activePage);\n  if (\n    activePage !== TrashPage ||\n    !entries.every(e => e.permissions['files.delete'])\n  )\n    return;\n  return {\n    label: message('Restore'),\n    icon: RestoreIcon,\n    key: 'restore',\n    execute: () => {\n      restoreEntries.mutate({\n        entryIds: entries.map(e => e.id),\n      });\n      driveState().selectEntries([]);\n    },\n  };\n}\n\nexport function useRemoveSharedEntriesAction(\n  entries: DriveEntry[],\n): EntryAction | undefined {\n  const unshareEntries = useUnshareEntries();\n  const activePage = useDriveStore(s => s.activePage);\n  if (activePage !== SharesPage) return;\n  return {\n    label: message('Remove'),\n    icon: DeleteIcon,\n    key: 'removeSharedEntry',\n    execute: () => {\n      unshareEntries.mutate(\n        {entryIds: entries.map(e => e.id), userId: 'me'},\n        {\n          onSuccess: (r, p) => {\n            toast(\n              message('Removed [one 1 item|other {count} items]', {\n                values: {count: p.entryIds.length},\n              }),\n            );\n          },\n          onError: err =>\n            showHttpErrorToast(err, message('Could not remove items')),\n        },\n      );\n      driveState().selectEntries([]);\n    },\n  };\n}\n","import {appQueries} from '@app/app-queries';\nimport {useQuery} from '@tanstack/react-query';\nimport {prettyBytes} from '@ui/utils/files/pretty-bytes';\n\nexport type FetchStorageSummaryResponse = {\n  used: number;\n  available: number;\n};\n\nexport function useStorageSummary() {\n  return useQuery({\n    ...appQueries.storageSummary.get(),\n    select: formatResponse,\n  });\n}\n\nfunction formatResponse(response: FetchStorageSummaryResponse) {\n  // null means that user has unlimited space available\n  const percentage =\n    response.available === null\n      ? 0\n      : (response.used * 100) / response.available;\n\n  return {\n    usedFormatted: prettyBytes(response.used, 2),\n    availableFormatted: prettyBytes(response.available, 0),\n    percentage,\n    used: response.used,\n    available: response.available,\n  };\n}\n","import {driveInvalidateKey} from '@app/app-queries';\nimport {driveState} from '@app/drive/drive-store';\nimport {useStorageSummary} from '@app/drive/layout/sidebar/storage-summary/storage-summary';\nimport {UploadType} from '@app/site-config';\nimport {queryClient} from '@common/http/query-client';\nimport {restrictionsFromConfig} from '@common/uploads/uploader/create-file-upload';\nimport {useFileUploadStore} from '@common/uploads/uploader/file-upload-provider';\nimport {getActiveWorkspaceId} from '@common/workspace/active-workspace-id';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\nimport {UploadedFile} from '@ui/utils/files/uploaded-file';\nimport {useCallback} from 'react';\n\ntype UploadFilesFnOptions = {\n  parentId?: number;\n};\n\nexport type UploadFilesFn = (\n  files: (File | UploadedFile)[] | FileList,\n  options?: UploadFilesFnOptions,\n) => void;\n\nexport function useDriveUploadQueue() {\n  const uploadMultiple = useFileUploadStore(s => s.uploadMultiple);\n  const {data: usage} = useStorageSummary();\n\n  const uploadFiles: UploadFilesFn = useCallback(\n    (files, {parentId} = {}) => {\n      files = [...files].map(file => {\n        return file instanceof UploadedFile ? file : new UploadedFile(file);\n      });\n\n      // check if this upload will not put user over their allowed storage space\n      if (usage) {\n        const sizeOfFiles = files.reduce((sum, file) => sum + file.size, 0);\n        const currentlyUsing = usage.used;\n        const availableSpace = usage.available;\n\n        if (sizeOfFiles + currentlyUsing > availableSpace) {\n          toast.danger(\n            message(\n              'You have exhausted your allowed space of :space. Delete some files or upgrade your plan.',\n              {values: {space: usage.availableFormatted}},\n            ),\n            {action: {action: '/pricing', label: message('Upgrade')}},\n          );\n          return;\n        }\n      }\n\n      const restrictions = restrictionsFromConfig({\n        uploadType: UploadType.waddely,\n      });\n\n      uploadMultiple(files, {\n        uploadType: UploadType.waddely,\n        metadata: {\n          parentId: parentId ?? driveState().activePage?.folder?.id ?? null,\n          workspaceId: getActiveWorkspaceId(),\n        },\n        restrictions,\n        onSuccess: () => {\n          queryClient.invalidateQueries({queryKey: driveInvalidateKey});\n        },\n      });\n      driveState().setUploadQueueIsOpen(true);\n    },\n    [uploadMultiple, usage],\n  );\n  return {uploadFiles};\n}\n","import {EntryAction} from '@app/drive/entry-actions/entry-action';\nimport {message} from '@ui/i18n/message';\nimport {driveState, useDriveStore} from '@app/drive/drive-store';\nimport {DrivePage, TrashPage} from '@app/drive/drive-page/drive-page';\nimport {CreateNewFolderIcon} from '@ui/icons/material/CreateNewFolder';\nimport {useDriveUploadQueue} from '@app/drive/uploading/use-drive-upload-queue';\nimport {FileUploadIcon} from '@ui/icons/material/FileUpload';\nimport {DriveFolderUploadIcon} from '@ui/icons/material/DriveFolderUpload';\nimport {useDeleteEntries} from '@app/drive/files/queries/use-delete-entries';\nimport {DeleteForeverIcon} from '@ui/icons/material/DeleteForever';\nimport {openUploadWindow} from '@ui/utils/files/open-upload-window';\n\nexport function useDrivePageActions(page: DrivePage): EntryAction[] {\n  const newFolder = useNewFolderAction(page);\n  const uploadFiles = useUploadFilesAction(page);\n  const uploadFolder = useUploadFolderAction(page);\n  const emptyTrash = useEmptyTrashAction(page);\n  return [newFolder, uploadFiles, uploadFolder, emptyTrash].filter(\n    action => !!action,\n  ) as EntryAction[];\n}\n\nfunction useNewFolderAction(page: DrivePage): EntryAction | undefined {\n  if (!page.folder || !page.folder.permissions['files.update']) return;\n  return {\n    label: message('New folder'),\n    icon: CreateNewFolderIcon,\n    key: 'newFolder',\n    execute: () => {\n      if (page.folder) {\n        driveState().setActiveActionDialog('newFolder', [page.folder]);\n      }\n    },\n  };\n}\n\nfunction useUploadFilesAction(page: DrivePage): EntryAction | undefined {\n  const {uploadFiles} = useDriveUploadQueue();\n  if (!page.folder || !page.folder.permissions['files.update']) return;\n  return {\n    label: message('Upload files'),\n    icon: FileUploadIcon,\n    key: 'uploadFiles',\n    execute: async () => {\n      uploadFiles(await openUploadWindow({multiple: true}));\n    },\n  };\n}\n\nfunction useUploadFolderAction(page: DrivePage): EntryAction | undefined {\n  const {uploadFiles} = useDriveUploadQueue();\n  if (!page.folder || !page.folder.permissions['files.update']) return;\n  return {\n    label: message('Upload folder'),\n    icon: DriveFolderUploadIcon,\n    key: 'uploadFolder',\n    execute: async () => {\n      uploadFiles(await openUploadWindow({directory: true}));\n    },\n  };\n}\n\nfunction useEmptyTrashAction(page: DrivePage): EntryAction | undefined {\n  const deleteEntries = useDeleteEntries();\n  const activePage = useDriveStore(s => s.activePage);\n  if (activePage !== TrashPage) return;\n  return {\n    label: message('Empty trash'),\n    icon: DeleteForeverIcon,\n    key: 'emptyTrash',\n    execute: () => {\n      deleteEntries.mutate({entryIds: [], emptyTrash: true});\n      driveState().selectEntries([]);\n    },\n  };\n}\n","import React, {createElement, ReactElement} from 'react';\nimport {Trans} from '@ui/i18n/trans';\nimport {DriveEntry} from '@app/drive/files/drive-entry';\nimport {useEntryActions} from '@app/drive/entry-actions/use-entry-actions';\nimport {EntryAction} from '@app/drive/entry-actions/entry-action';\nimport {DrivePage, RootFolderPage, TrashPage} from '@app/drive/drive-page/drive-page';\nimport {useDrivePageActions} from '@app/drive/entry-actions/use-drive-page-actions';\nimport {Menu, MenuItem, MenuTrigger} from '@ui/menu/menu-trigger';\n\ninterface Props {\n  children: ReactElement;\n  entries?: DriveEntry[];\n  page?: DrivePage;\n  showIfNoActions?: boolean;\n}\nexport function EntryActionMenuTrigger({\n  children,\n  entries,\n  page,\n  showIfNoActions,\n}: Props) {\n  if (page?.name === RootFolderPage.name) {\n    return (\n      <PageMenu page={RootFolderPage} showIfNoActions={showIfNoActions}>\n        {children}\n      </PageMenu>\n    );\n  }\n\n  if (page === TrashPage) {\n    return (\n      <PageMenu page={TrashPage} showIfNoActions={showIfNoActions}>\n        {children}\n      </PageMenu>\n    );\n  }\n\n  if (page?.folder) {\n    return (\n      <EntriesMenu entries={[page.folder]} showIfNoActions={showIfNoActions}>\n        {children}\n      </EntriesMenu>\n    );\n  }\n\n  if (entries?.length) {\n    return (\n      <EntriesMenu entries={entries} showIfNoActions={showIfNoActions}>\n        {children}\n      </EntriesMenu>\n    );\n  }\n\n  return null;\n}\n\ninterface EntriesContextMenuProps extends Omit<BaseMenuProps, 'actions'> {\n  entries: DriveEntry[];\n}\nfunction EntriesMenu({\n  entries,\n  children,\n  showIfNoActions,\n}: EntriesContextMenuProps) {\n  const actions = useEntryActions(entries);\n  return (\n    <BaseMenu actions={actions} showIfNoActions={showIfNoActions}>\n      {children}\n    </BaseMenu>\n  );\n}\n\ninterface PageContextMenuProps extends Omit<BaseMenuProps, 'actions'> {\n  page: DrivePage;\n  showIfNoActions?: boolean;\n}\nfunction PageMenu({page, children, showIfNoActions}: PageContextMenuProps) {\n  const actions = useDrivePageActions(page);\n  return (\n    <BaseMenu actions={actions} showIfNoActions={showIfNoActions}>\n      {children}\n    </BaseMenu>\n  );\n}\n\ninterface BaseMenuProps {\n  actions: EntryAction[];\n  children: ReactElement;\n  showIfNoActions?: boolean;\n}\nfunction BaseMenu({actions, children, showIfNoActions}: BaseMenuProps) {\n  if (!actions.length && !showIfNoActions) {\n    return null;\n  }\n  return (\n    <MenuTrigger>\n      {children}\n      <Menu>\n        {actions.map(action => {\n          return (\n            <MenuItem\n              onSelected={() => {\n                action.execute();\n              }}\n              key={action.key}\n              value={action.key}\n              startIcon={createElement(action.icon)}\n            >\n              <Trans {...action.label} />\n            </MenuItem>\n          );\n        })}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {FileThumbnail} from '@common/uploads/components/file-type-icon/file-thumbnail';\nimport clsx from 'clsx';\nimport React, {ComponentPropsWithoutRef, ReactNode} from 'react';\nimport {DriveEntry} from '@app/drive/files/drive-entry';\n\ninterface BaseFileGridItemProps extends ComponentPropsWithoutRef<'div'> {\n  entry: DriveEntry;\n  className?: string;\n  isSelected?: boolean;\n  isMobileMode?: boolean;\n  footerAdornment?: ReactNode;\n}\n\nexport const BaseFileGridItem = React.forwardRef<\n  HTMLDivElement,\n  BaseFileGridItemProps\n>(\n  (\n    {entry, className, isSelected, isMobileMode, footerAdornment, ...domProps},\n    ref,\n  ) => {\n    return (\n      <div\n        {...domProps}\n        ref={ref}\n        className={clsx(\n          'grid-item flex aspect-square select-none flex-col overflow-hidden rounded-panel border shadow-sm outline-none transition-shadow-opacity dark:bg-alt',\n          isSelected && 'border-primary',\n          className,\n        )}\n      >\n        <div className=\"relative min-h-0 flex-auto\">\n          <FileThumbnail\n            className=\"h-full w-full\"\n            iconClassName=\"block w-70 h-70 absolute m-auto inset-0\"\n            file={entry}\n          />\n        </div>\n        <Footer\n          entry={entry}\n          isSelected={isSelected}\n          isMobile={isMobileMode}\n          adornment={footerAdornment}\n        />\n      </div>\n    );\n  },\n);\n\ninterface FooterProps {\n  entry: DriveEntry;\n  isSelected?: boolean;\n  isMobile?: boolean;\n  adornment?: ReactNode;\n}\nfunction Footer({entry, isSelected, isMobile, adornment}: FooterProps) {\n  return (\n    <div\n      className={clsx(\n        'flex h-48 flex-shrink-0 items-center text-sm',\n        isMobile ? 'justify-between gap-10 pl-18 pr-2' : 'justify-center px-16',\n        isSelected && 'bg-primary-light/20',\n      )}\n    >\n      <div className=\"min-w-0 overflow-hidden overflow-ellipsis whitespace-nowrap\">\n        {entry.name}\n      </div>\n      {adornment}\n    </div>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {DriveEntry} from '@app/drive/files/drive-entry';\nimport {Trans} from '@ui/i18n/trans';\nimport {FormattedDate} from '@ui/i18n/formatted-date';\nimport React, {useContext} from 'react';\nimport memoize from 'nano-memoize';\nimport {TableContext} from '@common/ui/tables/table-context';\nimport {Checkbox} from '@ui/forms/toggle/checkbox';\nimport {EntryActionMenuTrigger} from '@app/drive/entry-actions/entry-action-menu-trigger';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {MoreVertIcon} from '@ui/icons/material/MoreVert';\nimport clsx from 'clsx';\nimport {prettyBytes} from '@ui/utils/files/pretty-bytes';\nimport {FileThumbnail} from '@common/uploads/components/file-type-icon/file-thumbnail';\n\nconst formatFileSize = memoize(bytes => {\n  return prettyBytes(bytes);\n});\n\nexport const fileTableColumns: ColumnConfig<DriveEntry>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    header: () => <Trans message=\"Name\" />,\n    visibleInMode: 'all',\n    width: 'flex-3 min-w-200',\n    body: entry => <FileNameColumn entry={entry} />,\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    maxWidth: 'max-w-184',\n    header: () => <Trans message=\"Last modified\" />,\n    body: user => <FormattedDate date={user.updated_at} />,\n  },\n  {\n    key: 'file_size',\n    allowsSorting: true,\n    header: () => <Trans message=\"Size\" />,\n    maxWidth: 'max-w-144',\n    body: entry => formatFileSize(entry.file_size) ?? '-',\n  },\n  {\n    key: 'actions',\n    hideHeader: true,\n    header: () => <Trans message=\"Actions\" />,\n    align: 'end',\n    width: 'w-42 flex-shrink-0',\n    visibleInMode: 'all',\n    body: entry => <ActionsColumn entry={entry} />,\n  },\n];\n\nfunction FileNameColumn({entry}: {entry: DriveEntry}) {\n  const {isCollapsedMode} = useContext(TableContext);\n  const sizeClassName = isCollapsedMode ? 'w-30 h-30' : 'w-24 h-24';\n  return (\n    <div className=\"flex items-center gap-14\">\n      <FileThumbnail\n        className={clsx('rounded', sizeClassName)}\n        iconClassName={sizeClassName}\n        file={entry}\n      />\n      <div className=\"min-w-0\">\n        <div className=\"overflow-hidden overflow-ellipsis\">{entry.name}</div>\n        {isCollapsedMode && (\n          <div className=\"mt-4 flex items-center text-xs text-muted\">\n            <FormattedDate date={entry.updated_at} />\n            <div></div>\n            <div>{formatFileSize(entry.file_size)}</div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\ninterface ActionsBodyProps {\n  entry: DriveEntry;\n}\nfunction ActionsColumn({entry}: ActionsBodyProps) {\n  const {selectedRows} = useContext(TableContext);\n  return selectedRows.length ? (\n    <Checkbox\n      className=\"mr-8 block\"\n      checked={selectedRows.includes(entry.id)}\n    />\n  ) : (\n    <EntryActionMenuTrigger entries={[entry]}>\n      <IconButton className=\"text-muted\">\n        <MoreVertIcon />\n      </IconButton>\n    </EntryActionMenuTrigger>\n  );\n}\n","import {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\n\nexport const AVAILABLE_SORTS: DriveSortOption[] = [\n  {id: 'file_size', label: message('Size')},\n  {id: 'name', label: message('Name')},\n  {id: 'updated_at', label: message('Last modified')},\n  {id: 'created_at', label: message('Upload date')},\n  {id: 'type', label: message('Type')},\n  {id: 'extension', label: message('Extension')},\n];\n\nexport interface DriveSortOption {\n  id: SortColumn;\n  label: MessageDescriptor;\n}\n\nexport type SortColumn =\n  | 'file_size'\n  | 'name'\n  | 'updated_at'\n  | 'created_at'\n  | 'type'\n  | 'extension';\n\nexport type SortDirection = 'desc' | 'asc';\n\nexport interface SortValue {\n  column: SortColumn;\n  direction: SortDirection;\n}\n","import {AVAILABLE_SORTS, SortColumn} from '@app/drive/layout/sorting/available-sorts';\nimport {Button} from '@ui/buttons/button';\nimport {SortIcon} from '@ui/icons/material/Sort';\nimport {Trans} from '@ui/i18n/trans';\nimport type {DriveSortDescriptor} from '@app/drive/drive-store';\nimport {Menu, MenuItem, MenuSection, MenuTrigger} from '@ui/menu/menu-trigger';\n\ninterface Props {\n  descriptor: DriveSortDescriptor;\n  onChange: (value: DriveSortDescriptor) => void;\n  isDisabled?: boolean;\n}\nexport function EntriesSortButton({\n  descriptor,\n  onChange,\n  isDisabled = false,\n}: Props) {\n  const column = descriptor.orderBy;\n  const direction = descriptor.orderDir;\n  const sort = AVAILABLE_SORTS.find(s => s.id === column);\n\n  return (\n    <MenuTrigger\n      showCheckmark\n      selectionMode=\"multiple\"\n      selectedValue={[direction || 'desc', column || '']}\n      onItemSelected={key => {\n        if (key === 'asc' || key === 'desc') {\n          onChange({\n            orderBy: column,\n            orderDir: key,\n          });\n        } else {\n          onChange({\n            orderBy: key as SortColumn,\n            orderDir: direction,\n          });\n        }\n      }}\n    >\n      <Button\n        className=\"text-muted\"\n        variant=\"text\"\n        size=\"sm\"\n        startIcon={<SortIcon />}\n        disabled={isDisabled}\n      >\n        {sort ? <Trans {...sort.label} /> : null}\n      </Button>\n      <Menu>\n        <MenuSection label={<Trans message=\"Direction\" />}>\n          <MenuItem value=\"asc\">\n            <Trans message=\"Ascending\" />\n          </MenuItem>\n          <MenuItem value=\"desc\">\n            <Trans message=\"Descending\" />\n          </MenuItem>\n        </MenuSection>\n        <MenuSection label={<Trans message=\"Sort By\" />}>\n          {AVAILABLE_SORTS.map(item => (\n            <MenuItem key={item.id} value={item.id}>\n              <Trans {...item.label} />\n            </MenuItem>\n          ))}\n        </MenuSection>\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {appQueries} from '@app/app-queries';\nimport {useQuery} from '@tanstack/react-query';\n\nexport type UserFolderPathParams = {\n  shareable_link?: string | number;\n  password?: string | null;\n};\n\ntype Props = {\n  hash?: string;\n  params?: UserFolderPathParams;\n  isEnabled?: boolean;\n};\nexport function useFolderPath({hash, params, isEnabled = true}: Props) {\n  return useQuery({\n    ...appQueries.folderPath.get(hash!, params),\n    enabled: !!hash && isEnabled,\n  });\n}\n","import {ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentHeaderProps {\n  children: ReactNode;\n  className?: string;\n}\nexport function DashboardContentHeader({\n  children,\n  className,\n}: DashboardContentHeaderProps) {\n  return (\n    <div className={clsx(className, 'dashboard-grid-header')}>{children}</div>\n  );\n}\n"],"names":["InfiniteQueryObserver","QueryObserver","client","options","infiniteQueryBehavior","query","state","parentResult","isFetching","isRefetching","isError","isRefetchError","fetchDirection","_b","_a","isFetchNextPageError","isFetchingNextPage","isFetchPreviousPageError","isFetchingPreviousPage","hasNextPage","hasPreviousPage","useInfiniteQuery","queryClient","useBaseQuery","DashboardNavbar","children","className","hideToggleButton","props","isMobileMode","leftSidenavStatus","setLeftSidenavStatus","name","leftSidenavCanBeCompact","useContext","DashboardLayoutContext","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","setInLocalStorage","jsx","Navbar","clsx","IconButton","MenuOpenIcon","addFilesSvg","timeManagement","fileSearching","throwAwaySvg","lovingItSvg","shareSvg","defaultSortDescriptor","makeFolderPage","folder","makePartialFolderPage","hash","getPathForFolder","message","rootFolder","getBootstrapData","RootFolderPage","RecentPage","SearchPage","isSearchingOrFiltering","SharesPage","TrashPage","StarredPage","DRIVE_PAGES","stableArray","enableMapSet","initialState","getFromLocalStorage","useDriveStore","create","immer","set","get","isOpen","data","value","activePageId","getStoredSorting","storedDescriptor","entries","current","mode","key","index","merge","e","driveState","useActiveDialogEntry","dialog","s","getShareableLink","linkOrHash","getDirectLink","link","entry","addStarToEntries","entryIds","apiClient","response","useAddStarToEntries","useMutation","payload","driveInvalidateKey","toast","err","showHttpErrorToast","deleteEntries","useDeleteEntries","getLoaderMessage","r","emptyTrash","deleteForever","backendError","getAxiosErrorMessage","duplicateEntries","useDuplicateEntries","p","removeStarFromEntries","useRemoveStarFromEntries","useRestoreEntries","restoreEntries","useUnshareEntries","unshareEntries","useCreateShareableLink","createShareableLink","entryId","appQueries","useEntryActions","preview","usePreviewAction","share","useShareAction","copyLink","useCopyLinkAction","addStar","useAddToStarredAction","removeStar","useRemoveFromStarred","moveTo","useMoveToAction","rename","useRenameAction","makeCopy","useMakeCopyAction","download","useDownloadEntriesAction","deleteAction","useDeleteEntriesAction","removeSharedEntries","useRemoveSharedEntriesAction","useRestoreEntriesAction","action","RemoveRedEyeIcon","activePage","PersonAddIcon","drive","useSettings","createLink","LinkIcon","isUsingDirectLinks","publicLink","copy","starEntries","tag","StarIcon","StarOutlineIcon","DriveFileMoveIcon","DriveFileRenameOutlineIcon","ContentCopyIcon","downloadUrl","useFileEntryUrls","FileDownloadIcon","downloadFileFromUrl","DeleteIcon","RestoreIcon","useStorageSummary","useQuery","formatResponse","percentage","prettyBytes","useDriveUploadQueue","uploadMultiple","useFileUploadStore","usage","useCallback","files","parentId","file","UploadedFile","sizeOfFiles","sum","currentlyUsing","availableSpace","restrictions","restrictionsFromConfig","UploadType","getActiveWorkspaceId","useDrivePageActions","page","newFolder","useNewFolderAction","uploadFiles","useUploadFilesAction","uploadFolder","useUploadFolderAction","useEmptyTrashAction","CreateNewFolderIcon","FileUploadIcon","openUploadWindow","DriveFolderUploadIcon","DeleteForeverIcon","EntryActionMenuTrigger","showIfNoActions","PageMenu","EntriesMenu","actions","BaseMenu","MenuTrigger","Menu","MenuItem","createElement","Trans","BaseFileGridItem","React","isSelected","footerAdornment","domProps","ref","jsxs","FileThumbnail","Footer","isMobile","adornment","formatFileSize","memoize","bytes","fileTableColumns","FileNameColumn","user","FormattedDate","ActionsColumn","isCollapsedMode","TableContext","sizeClassName","selectedRows","Checkbox","MoreVertIcon","AVAILABLE_SORTS","EntriesSortButton","descriptor","onChange","isDisabled","column","direction","sort","Button","SortIcon","MenuSection","item","useFolderPath","params","isEnabled","DashboardContentHeader"],"mappings":"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","x_google_ignoreList":[0,1]}