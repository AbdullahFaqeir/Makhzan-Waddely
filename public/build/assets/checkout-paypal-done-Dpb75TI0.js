import{b5 as m,aC as g,r as o,j as i,k as f,x as r}from"./main-BdzhGpqn.js";import{B as b}from"./billing-redirect-message-6yuC9Q9u.js";import{C as d,a as h}from"./checkout-product-summary-CSKglORp.js";import"./TaskAlt-Dt65A2PZ.js";import"./skeleton-CTimao-U.js";import"./billing-queries-7PHfszbY.js";import"./formatted-price-DRpdBayZ.js";import"./product-feature-list-Pn5BcLN8.js";function B(){const{productId:s,priceId:t}=m(),[e]=g(),a=o.useRef(!1),[p,n]=o.useState();return o.useEffect(()=>{const c=e.get("subscriptionId"),u=e.get("status");a.current||(c&&u==="success"?C(c).then(()=>{n(l("success",s,t)),window.location.href="/billing"}):n(l(u,s,t)),a.current=!0)},[t,s,e]),i.jsxs(d,{children:[i.jsx(b,{config:p}),i.jsx(h,{showBillingLine:!1})]})}function l(s,t,e){switch(s){case"success":return{message:r("Subscription successful!"),status:"success",buttonLabel:r("Return to site"),link:"/billing"};default:return{message:r("Something went wrong. Please try again."),status:"error",buttonLabel:r("Go back"),link:y(t,e)}}}function y(s,t){return s&&t?`/checkout/${s}/${t}`:"/"}function C(s){return f.post("billing/paypal/store-subscription-details-locally",{paypal_subscription_id:s})}export{B as Component};
