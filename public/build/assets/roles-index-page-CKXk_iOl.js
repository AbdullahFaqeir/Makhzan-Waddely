import{aD as b,cc as x,j as e,r as m,L as g,T as a,al as f,cL as y,D as C,ai as v,J as T,aj as S,a5 as p,a7 as w,an as I,ao as P,av as E,k as L}from"./main-owSUWNVS.js";import{a as k}from"./admin-config-DsMNBUzM.js";import{D as A}from"./settings-links-CpaqNUpE.js";import{u as M,a as F,G as H,D as N,b as B,c as R}from"./use-datatable-query-CxfVxFSv.js";import{D as q}from"./data-table-export-csv-button-BUFm0WXx.js";import{D as O}from"./data-table-add-item-button-C867XSQv.js";import{a as Q,D as $,b as W,c as z}from"./datatable-page-with-header-layout-68nRfBM1.js";import{T as G}from"./table-Bl939KD9.js";import{F as K}from"./formatted-date-dVjFR1LG.js";import{D as V}from"./Delete-D6PatUO1.js";import{E as _}from"./Edit-D8nu-GLe.js";import{M as J}from"./MoreVert-Btfc9NhN.js";import{C as U}from"./confirmation-dialog-DdZaouVf.js";import{T as X,a as Y,b as Z}from"./tabs-CAX8nIFM.js";import{t as ee}from"./team-DYmDDGxN.js";import"./external-link-BpSO0s5u.js";import"./FilterAlt-xRRmNiqG.js";import"./select-filter-panel-2MY77qxo.js";import"./use-normalized-models-Cb3k3qGb.js";import"./form-chip-field-CYaGs1JT.js";import"./input-4Oo6Fyef.js";import"./ArrowRightAlt-PxVB8wV6.js";import"./DateRange-6Lw_fZZT.js";import"./use-base-date-picker-state-Cn_aBnWX.js";import"./use-date-formatter-BiXQj-wq.js";import"./KeyboardArrowRight-ChYgp5kQ.js";import"./use-date-range-picker-state-Bb0A2vO_.js";import"./list-B5Ky1WKX.js";import"./switch-DbAW1G8x.js";import"./dialog-footer-D_t7V-bM.js";import"./use-current-date-time-lVcX-4fw.js";import"./select-Bv69-mBO.js";import"./skeleton-xT-yudp1.js";import"./accordion-CpK0I08P.js";import"./checkbox-CiHJ6TYf.js";import"./CheckBoxOutlineBlank-6JQ3-TmB.js";import"./FileDownload-bolxAr3M.js";import"./download-file-from-url-BVaKcxRP.js";import"./Add-BV-9IpU7.js";import"./dashboard-layout-context-Cg5RoSzJ.js";import"./use-toggle-dashboard-left-sidebar-B95u609v.js";import"./ArrowDownward-BrhAHC5n.js";import"./useEffectEvent-BzNFWHXk.js";import"./use-pointer-events-BS6HVgE8.js";import"./useGlobalListeners-MjeT7y1B.js";const te=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(a,{message:"Role"}),body:t=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(a,{message:t.name})}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:t.description?e.jsx(a,{message:t.description}):void 0})]})},{key:"updated_at",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx(K,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-84 flex-shrink-0",body:t=>e.jsx(ae,{role:t})}];function Ue(){var c;const t=b(),{searchParams:o,sortDescriptor:i,mergeIntoSearchParams:n,setSearchQuery:u,isFiltering:j}=M(y),l=F(x.roles.index(o)),h=e.jsxs(m.Fragment,{children:[e.jsx(q,{endpoint:"roles/csv/export"}),e.jsx(O,{elementType:g,to:`new?type=${o.type??"users"}`,children:e.jsx(a,{message:"Add new role"})})]}),r=(c=m.useContext(f).roles)==null?void 0:c.types,D=o.type?r==null?void 0:r.findIndex(s=>s.type===o.type):0,d=r!=null&&r.length?e.jsx(X,{selectedTab:D,onTabChange:s=>{n({type:r[s].type})},children:e.jsx(Y,{className:"mx-24",children:r.map(s=>e.jsx(Z,{className:"min-w-100",children:e.jsx(a,{...s.label})},s.type))})}):null;return e.jsxs(Q,{children:[e.jsx(H,{query:l}),e.jsx($,{title:e.jsx(a,{message:"Roles"}),showSidebarToggleButton:!0,border:d?"border-none":void 0,rightContent:e.jsx(A,{variant:"button",link:k.pages.roles,size:"xs"})}),d,e.jsxs(W,{children:[e.jsx(N,{searchValue:o.query,onSearchChange:u,actions:h}),e.jsxs(z,{children:[e.jsx(G,{columns:te,data:l.items,sortDescriptor:i,onSortChange:n,enableSelection:!1,onAction:s=>t(`${s.id}/edit`),cellHeight:"h-64"}),l.isEmpty?e.jsx(B,{image:ee,isFiltering:j,title:e.jsx(a,{message:"No roles have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching roles"})}):null,e.jsx(R,{query:l,onPageChange:s=>n({page:s}),onPerPageChange:s=>n({perPage:s})})]})]})]})}function ae({role:t}){const[o,i]=m.useState(!1);return e.jsxs(m.Fragment,{children:[e.jsx(C,{type:"modal",isOpen:o,onOpenChange:i,children:e.jsx(se,{roleId:t.id})}),e.jsxs(v,{children:[e.jsx(T,{size:"md",className:"text-muted",children:e.jsx(J,{})}),e.jsxs(S,{children:[e.jsx(p,{value:"edit",elementType:g,to:`${t.id}/edit`,startIcon:e.jsx(_,{}),children:e.jsx(a,{message:"Edit"})}),!t.internal&&e.jsx(p,{value:"delete",onSelected:()=>i(!0),startIcon:e.jsx(V,{}),children:e.jsx(a,{message:"Delete"})})]})]})]})}function se({roleId:t}){const{close:o}=w(),i=I({mutationFn:()=>L.delete(`roles/${t}`),onSuccess:()=>{E.invalidateQueries({queryKey:x.roles.invalidateKey}),o()},onError:n=>P(n)});return e.jsx(U,{isDanger:!0,title:e.jsx(a,{message:"Delete role"}),body:e.jsx(a,{message:"Are you sure you want to delete this role?"}),confirm:e.jsx(a,{message:"Delete"}),isLoading:i.isPending,onConfirm:()=>{i.mutate()}})}export{Ue as Component};
//# sourceMappingURL=roles-index-page-CKXk_iOl.js.map
