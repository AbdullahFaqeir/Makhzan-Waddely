{"version":3,"file":"user-datatable-5gc9vyBr.js","sources":["../../../common/foundation/resources/client/admin/users/requests/create-user.ts","../../../common/foundation/resources/client/admin/users/create-user-dialog.tsx","../../../common/foundation/resources/client/admin/users/requests/use-impersonate-user.ts","../../../common/foundation/resources/client/admin/users/impersonate-user-dialog.tsx","../../../common/foundation/resources/client/admin/users/user-datatable-columns.tsx","../../../common/foundation/resources/client/admin/users/user-datatable-filters.ts","../../../common/foundation/resources/client/admin/users/user-datatable.tsx"],"sourcesContent":["import {adminQueries} from '@app/admin/admin-queries';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\nimport {User} from '@ui/types/user';\nimport {UseFormReturn} from 'react-hook-form';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\nexport interface CreateUserPayload\n  extends Omit<Partial<User>, 'email_verified_at'> {\n  email_verified_at?: boolean;\n}\n\nexport function useCreateUser(form: UseFormReturn<CreateUserPayload>) {\n  return useMutation({\n    mutationFn: (props: CreateUserPayload) => createUser(props),\n    onSuccess: () => {\n      toast(message('User created'));\n      queryClient.invalidateQueries({\n        queryKey: adminQueries.users.invalidateKey,\n      });\n    },\n    onError: r => onFormQueryError(r, form),\n  });\n}\n\nfunction createUser(payload: CreateUserPayload): Promise<Response> {\n  if (payload.roles) {\n    payload.roles = payload.roles.map(r => r.id) as any;\n  }\n  return apiClient.post('users', payload).then(r => r.data);\n}\n","import {UploadType} from '@app/site-config';\nimport {useNavigate} from '@common/ui/navigation/use-navigate';\nimport {FormImageSelector} from '@common/uploads/components/image-selector';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@ui/i18n/trans';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {useForm} from 'react-hook-form';\nimport {FileUploadProvider} from '../../uploads/uploader/file-upload-provider';\nimport {CreateUserPayload, useCreateUser} from './requests/create-user';\n\nexport function CreateUserDialog() {\n  const form = useForm<CreateUserPayload>();\n  const createUser = useCreateUser(form);\n  const navigate = useNavigate();\n  const {close, formId} = useDialogContext();\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Create user\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            createUser.mutate(values, {\n              onSuccess: r => {\n                close();\n                navigate(`${r.user.id}`, {replace: true});\n              },\n            });\n          }}\n        >\n          <FileUploadProvider>\n            <FormImageSelector\n              className=\"mb-24\"\n              name=\"image\"\n              uploadType={UploadType.avatars}\n              label={<Trans message=\"Avatar\" />}\n              showRemoveButton\n            />\n          </FileUploadProvider>\n          <FormTextField\n            required\n            className=\"mb-24\"\n            name=\"email\"\n            type=\"email\"\n            label={<Trans message=\"Email\" />}\n          />\n          <FormTextField\n            className=\"mb-24\"\n            name=\"name\"\n            label={<Trans message=\"Name\" />}\n          />\n          <FormTextField\n            required\n            name=\"password\"\n            type=\"password\"\n            label={<Trans message=\"Password\" />}\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button variant=\"outline\" onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          form={formId}\n          disabled={createUser.isPending}\n        >\n          <Trans message=\"Create\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {useMutation} from '@tanstack/react-query';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\nimport {User} from '@ui/types/user';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  userId: string | number;\n}\n\nexport function useImpersonateUser() {\n  return useMutation({\n    mutationFn: (payload: Payload) => impersonateUser(payload),\n    onSuccess: async response => {\n      toast(message(`Impersonating user \"${response.user.name}\"`));\n      window.location.href = '/';\n    },\n    onError: r => showHttpErrorToast(r),\n  });\n}\n\nfunction impersonateUser(payload: Payload) {\n  return apiClient\n    .post<Response>(`admin/users/impersonate/${payload.userId}`, payload)\n    .then(r => r.data);\n}\n","import {useImpersonateUser} from '@common/admin/users/requests/use-impersonate-user';\nimport {Trans} from '@ui/i18n/trans';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {Fragment} from 'react/jsx-runtime';\n\ninterface ImpersonateUserDialogProps {\n  user: {id: number};\n}\nexport function ImpersonateUserDialog({user}: ImpersonateUserDialogProps) {\n  const impersonate = useImpersonateUser();\n  return (\n    <ConfirmationDialog\n      title={<Trans message=\"Impersonate user\" />}\n      isLoading={impersonate.isPending}\n      body={\n        <Fragment>\n          <p>\n            <Trans message=\"Are you sure you want to login as this user?\" />\n          </p>\n          <p className=\"mt-8\">\n            <Trans message=\"This will log you out of your current account and log you in as the user.\" />\n          </p>\n        </Fragment>\n      }\n      confirm={<Trans message=\"Login\" />}\n      onConfirm={() => {\n        impersonate.mutate({userId: user.id});\n      }}\n    />\n  );\n}\n","import {BanUsersDialog} from '@common/admin/users/ban-users-dialog';\nimport {ImpersonateUserDialog} from '@common/admin/users/impersonate-user-dialog';\nimport {useUnbanUsers} from '@common/admin/users/requests/use-unban-users';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {Chip} from '@ui/forms/input-field/chip-field/chip';\nimport {ChipList} from '@ui/forms/input-field/chip-field/chip-list';\nimport {FormattedDate} from '@ui/i18n/formatted-date';\nimport {Trans} from '@ui/i18n/trans';\nimport {CheckIcon} from '@ui/icons/material/Check';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {EditIcon} from '@ui/icons/material/Edit';\nimport {LoginIcon} from '@ui/icons/material/Login';\nimport {PersonOffIcon} from '@ui/icons/material/PersonOff';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {Tooltip} from '@ui/tooltip/tooltip';\nimport {User} from '@ui/types/user';\nimport clsx from 'clsx';\nimport {Link} from 'react-router';\n\nexport const userDatatableColumns: ColumnConfig<User>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    sortingKey: 'email',\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"User\" />,\n    body: user => (\n      <NameWithAvatar\n        image={user.image}\n        label={user.name}\n        description={user.email}\n        alwaysShowAvatar\n        avatarCircle\n      />\n    ),\n  },\n  {\n    key: 'roles',\n    header: () => <Trans message=\"Roles\" />,\n    body: user => (\n      <ChipList radius=\"rounded\" size=\"xs\">\n        {user?.roles?.map(role => (\n          <Chip key={role.id} selectable>\n            <Link\n              className={clsx('capitalize')}\n              target=\"_blank\"\n              to={`/admin/roles/${role.id}/edit`}\n            >\n              <Trans message={role.name} />\n            </Link>\n          </Chip>\n        ))}\n      </ChipList>\n    ),\n  },\n  {\n    key: 'subscribed',\n    header: () => <Trans message=\"Subscribed\" />,\n    width: 'w-96',\n    body: user =>\n      user.subscriptions?.filter(s => s.valid).length ? (\n        <CheckIcon className=\"text-positive icon-md\" />\n      ) : (\n        <CloseIcon className=\"text-danger icon-md\" />\n      ),\n  },\n  {\n    key: 'banned_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Suspended\" />,\n    width: 'w-96',\n    body: user =>\n      user.banned_at ? <CheckIcon className=\"text-danger icon-md\" /> : null,\n  },\n  {\n    key: 'latest_active_session',\n    width: 'w-110',\n    header: () => <Trans message=\"Last active\" />,\n    body: user =>\n      user.latest_active_session ? (\n        <time>\n          <FormattedDate date={user.latest_active_session.updated_at} />\n        </time>\n      ) : (\n        '-'\n      ),\n  },\n  {\n    key: 'created_at',\n    allowsSorting: true,\n    width: 'w-110',\n    header: () => <Trans message=\"Created at\" />,\n    body: user => (\n      <time>\n        <FormattedDate date={user.created_at} />\n      </time>\n    ),\n  },\n  {\n    key: 'actions',\n    header: () => <Trans message=\"Actions\" />,\n    width: 'w-128 flex-shrink-0',\n    hideHeader: true,\n    align: 'end',\n    visibleInMode: 'all',\n    body: user => (\n      <div className=\"text-muted\">\n        <Link to={`${user.id}/details`}>\n          <Tooltip label={<Trans message=\"Edit user\" />}>\n            <IconButton size=\"md\">\n              <EditIcon />\n            </IconButton>\n          </Tooltip>\n        </Link>\n        {user.banned_at ? (\n          <UnbanButton user={user} />\n        ) : (\n          <DialogTrigger type=\"modal\">\n            <Tooltip label={<Trans message=\"Suspend user\" />}>\n              <IconButton size=\"md\">\n                <PersonOffIcon />\n              </IconButton>\n            </Tooltip>\n            <BanUsersDialog userIds={[user.id]} />\n          </DialogTrigger>\n        )}\n        <ImpersonateButton user={user} />\n      </div>\n    ),\n  },\n];\n\ninterface UnbanButtonProps {\n  user: User;\n}\nfunction UnbanButton({user}: UnbanButtonProps) {\n  const unban = useUnbanUsers([user.id]);\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={confirmed => {\n        if (confirmed) {\n          unban.mutate();\n        }\n      }}\n    >\n      <Tooltip label={<Trans message=\"Remove suspension\" />}>\n        <IconButton size=\"md\" color=\"danger\">\n          <PersonOffIcon />\n        </IconButton>\n      </Tooltip>\n      <ConfirmationDialog\n        isDanger\n        title={<Trans message=\"Suspend “:name“\" values={{name: user.name}} />}\n        body={\n          <Trans message=\"Are you sure you want to remove suspension from this user?\" />\n        }\n        confirm={<Trans message=\"Unsuspend\" />}\n      />\n    </DialogTrigger>\n  );\n}\n\ninterface ImpersonateButtonProps {\n  user: User;\n}\nfunction ImpersonateButton({user}: ImpersonateButtonProps) {\n  return (\n    <DialogTrigger type=\"modal\">\n      <Tooltip label={<Trans message=\"Login as user\" />}>\n        <IconButton size=\"md\">\n          <LoginIcon />\n        </IconButton>\n      </Tooltip>\n      <ImpersonateUserDialog user={user} />\n    </DialogTrigger>\n  );\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '../../datatable/filters/backend-filter';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '../../datatable/filters/timestamp-filters';\nimport {message} from '@ui/i18n/message';\n\nexport const UserDatatableFilters: BackendFilter[] = [\n  {\n    key: 'email_verified_at',\n    label: message('Email'),\n    description: message('Email verification status'),\n    defaultOperator: FilterOperator.ne,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('is confirmed'),\n          value: {value: null, operator: FilterOperator.ne},\n        },\n        {\n          key: '02',\n          label: message('is not confirmed'),\n          value: {value: null, operator: FilterOperator.eq},\n        },\n      ],\n    },\n  },\n  createdAtFilter({\n    description: message('Date user registered or was created'),\n  }),\n  updatedAtFilter({\n    description: message('Date user was last updated'),\n  }),\n  {\n    key: 'subscriptions',\n    label: message('Subscription'),\n    description: message('Whether user is subscribed or not'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {\n          key: '01',\n          label: message('is subscribed'),\n          value: {value: '*', operator: FilterOperator.has},\n        },\n        {\n          key: '02',\n          label: message('is not subscribed'),\n          value: {value: '*', operator: FilterOperator.doesntHave},\n        },\n      ],\n    },\n  },\n];\n","import {commonAdminQueries} from '@common/admin/common-admin-queries';\nimport teamSvg from '@common/admin/roles/team.svg';\nimport {CreateUserDialog} from '@common/admin/users/create-user-dialog';\nimport {userDatatableColumns} from '@common/admin/users/user-datatable-columns';\nimport {UserDatatableFilters} from '@common/admin/users/user-datatable-filters';\nimport {GlobalLoadingProgress} from '@common/core/global-loading-progress';\nimport {DataTableExportCsvButton} from '@common/datatable/csv-export/data-table-export-csv-button';\nimport {DataTableAddItemButton} from '@common/datatable/data-table-add-item-button';\nimport {DataTableHeader} from '@common/datatable/data-table-header';\nimport {DataTablePaginationFooter} from '@common/datatable/data-table-pagination-footer';\nimport {useDatatableSearchParams} from '@common/datatable/filters/utils/use-datatable-search-params';\nimport {validateDatatableSearch} from '@common/datatable/filters/utils/validate-datatable-search';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport {DatatableFilters} from '@common/datatable/page/datatable-filters';\nimport {\n  DatatablePageHeaderBar,\n  DatatablePageScrollContainer,\n  DatatablePageWithHeaderBody,\n  DatatablePageWithHeaderLayout,\n} from '@common/datatable/page/datatable-page-with-header-layout';\nimport {useDatatableQuery} from '@common/datatable/requests/use-datatable-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {StaticPageTitle} from '@common/seo/static-page-title';\nimport {Table} from '@common/ui/tables/table';\nimport {useMutation} from '@tanstack/react-query';\nimport {Button} from '@ui/buttons/button';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {toast} from '@ui/toast/toast';\nimport {Fragment, useState} from 'react';\n\nexport function Component() {\n  const {billing} = useSettings();\n  const [selectedIds, setSelectedIds] = useState<(number | string)[]>([]);\n  const {\n    searchParams,\n    sortDescriptor,\n    mergeIntoSearchParams,\n    setSearchQuery,\n    isFiltering,\n  } = useDatatableSearchParams(validateDatatableSearch);\n\n  const filteredColumns = !billing.enable\n    ? userDatatableColumns.filter(c => c.key !== 'subscribed')\n    : userDatatableColumns;\n\n  const query = useDatatableQuery(commonAdminQueries.users.index(searchParams));\n\n  const selectedActions = (\n    <DialogTrigger type=\"modal\">\n      <Button variant=\"flat\" color=\"danger\">\n        <Trans message=\"Delete\" />\n      </Button>\n      <DeleteUsersDialog\n        selectedIds={selectedIds}\n        onDelete={() => setSelectedIds([])}\n      />\n    </DialogTrigger>\n  );\n\n  const actions = (\n    <Fragment>\n      <DataTableExportCsvButton endpoint=\"users/csv/export\" />\n      <DialogTrigger type=\"modal\">\n        <DataTableAddItemButton>\n          <Trans message=\"Add new user\" />\n        </DataTableAddItemButton>\n        <CreateUserDialog />\n      </DialogTrigger>\n    </Fragment>\n  );\n\n  return (\n    <DatatablePageWithHeaderLayout>\n      <GlobalLoadingProgress query={query} />\n      <StaticPageTitle>\n        <Trans message=\"Users\" />\n      </StaticPageTitle>\n      <DatatablePageHeaderBar\n        title={<Trans message=\"Users\" />}\n        showSidebarToggleButton\n      />\n      <DatatablePageWithHeaderBody>\n        <DataTableHeader\n          searchValue={searchParams.query}\n          onSearchChange={setSearchQuery}\n          actions={actions}\n          selectedItems={selectedIds}\n          selectedActions={selectedActions}\n          filters={UserDatatableFilters}\n        />\n        <DatatableFilters filters={UserDatatableFilters} />\n        <DatatablePageScrollContainer>\n          <Table\n            columns={filteredColumns}\n            data={query.items}\n            sortDescriptor={sortDescriptor}\n            onSortChange={mergeIntoSearchParams}\n            enableSelection\n            selectedRows={selectedIds}\n            onSelectionChange={setSelectedIds}\n          />\n          {query.isEmpty && (\n            <DataTableEmptyStateMessage\n              isFiltering={isFiltering}\n              image={teamSvg}\n              title={<Trans message=\"No users have been created yet\" />}\n              filteringTitle={<Trans message=\"No matching users\" />}\n            />\n          )}\n          <DataTablePaginationFooter\n            query={query}\n            onPageChange={page => mergeIntoSearchParams({page})}\n            onPerPageChange={perPage => mergeIntoSearchParams({perPage})}\n          />\n        </DatatablePageScrollContainer>\n      </DatatablePageWithHeaderBody>\n    </DatatablePageWithHeaderLayout>\n  );\n}\n\ninterface DeleteUsersDialogProps {\n  selectedIds: (number | string)[];\n  onDelete: () => void;\n}\nexport function DeleteUsersDialog({\n  selectedIds,\n  onDelete,\n}: DeleteUsersDialogProps) {\n  const {close} = useDialogContext();\n  const deleteSelectedUsers = useMutation({\n    mutationFn: () => apiClient.delete(`users/${selectedIds.join(',')}`),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({\n        queryKey: commonAdminQueries.users.invalidateKey,\n      });\n      toast(message('Users deleted'));\n      onDelete();\n      close();\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n  return (\n    <ConfirmationDialog\n      isDanger\n      isLoading={deleteSelectedUsers.isPending}\n      title={<Trans message=\"Delete users\" />}\n      body={\n        <Trans\n          message=\"Are you sure you want to delete selected users?\"\n          values={{count: selectedIds.length}}\n        />\n      }\n      confirm={<Trans message=\"Delete\" />}\n      onConfirm={() => deleteSelectedUsers.mutate()}\n    />\n  );\n}\n"],"names":["useCreateUser","form","useMutation","props","createUser","toast","message","queryClient","adminQueries","r","onFormQueryError","payload","apiClient","CreateUserDialog","useForm","navigate","useNavigate","close","formId","useDialogContext","Dialog","jsx","DialogHeader","Trans","DialogBody","jsxs","Form","values","FileUploadProvider","FormImageSelector","UploadType","FormTextField","DialogFooter","Button","useImpersonateUser","impersonateUser","response","showHttpErrorToast","ImpersonateUserDialog","user","impersonate","ConfirmationDialog","Fragment","userDatatableColumns","NameWithAvatar","ChipList","_a","role","Chip","Link","clsx","s","CheckIcon","CloseIcon","FormattedDate","Tooltip","IconButton","EditIcon","UnbanButton","DialogTrigger","PersonOffIcon","BanUsersDialog","ImpersonateButton","unban","useUnbanUsers","confirmed","LoginIcon","UserDatatableFilters","FilterOperator","FilterControlType","createdAtFilter","updatedAtFilter","Component","billing","useSettings","selectedIds","setSelectedIds","useState","searchParams","sortDescriptor","mergeIntoSearchParams","setSearchQuery","isFiltering","useDatatableSearchParams","validateDatatableSearch","filteredColumns","c","query","useDatatableQuery","commonAdminQueries","selectedActions","DeleteUsersDialog","actions","DataTableExportCsvButton","DataTableAddItemButton","DatatablePageWithHeaderLayout","GlobalLoadingProgress","StaticPageTitle","DatatablePageHeaderBar","DatatablePageWithHeaderBody","DataTableHeader","DatatableFilters","DatatablePageScrollContainer","Table","DataTableEmptyStateMessage","teamSvg","DataTablePaginationFooter","page","perPage","onDelete","deleteSelectedUsers","err"],"mappings":"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"}