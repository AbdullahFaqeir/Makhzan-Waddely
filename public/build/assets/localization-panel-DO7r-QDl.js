import{an as j,ap as f,ao as b,k as S,aH as L,x as p,w as h,j as e,bj as T,a5 as d,Y as x,bA as F,r as y,a2 as z,cC as A,am as C,T as i,B as v}from"./main-TIUJvpaR.js";import{A as E,a as I}from"./account-settings-sidenav-N9ABQ3A7.js";import"./combobox-BEK8jHgu.js";import{F as g}from"./select-T49HzTXy.js";import{g as P}from"./countries-383H_XpF.js";function M(n,t){return j({mutationFn:a=>S.put(`users/${n}`,a).then(o=>o.data),onSuccess:()=>{L(p("Updated account details"))},onError:a=>t?f(a,t):b(a)})}function $({name:n,size:t,timezones:a,label:o,...r}){const{trans:l}=h();return e.jsx(g,{selectionMode:"single",name:n,size:t,label:o,showSearchField:!0,searchPlaceholder:l(p("Search timezones")),...r,children:Object.entries(a).map(([u,m])=>e.jsx(T,{label:u,children:m.map(c=>e.jsx(d,{value:c,children:c},c))},u))})}const w=x(()=>Intl.supportedValuesOf("timeZone")),B=x(()=>{const n=w(),t={};for(const a of n){const[o,r]=a.split("/");t[o]||(t[o]=[]),t[o].push(a)}return t});function O({user:n}){const t=F(s=>s.data.i18n.locales),a=y.useId(),{trans:o}=h(),r=z({defaultValues:{language:n.language||"",country:n.country||"",timezone:n.timezone||"UTC"}}),l=M(n.id,r),u=A(),m=P(),c=B();return e.jsx(E,{id:I.LocationAndLanguage,title:e.jsx(i,{message:"Date, time and language"}),actions:e.jsx(v,{type:"submit",variant:"flat",color:"primary",form:a,disabled:l.isPending||!r.formState.isValid,children:e.jsx(i,{message:"Save"})}),children:e.jsxs(C,{form:r,onSubmit:s=>{l.mutate(s),u.mutate({locale:s.language})},id:a,children:[e.jsx(g,{className:"mb-24",selectionMode:"single",name:"language",label:e.jsx(i,{message:"Language"}),children:t.map(s=>e.jsx(d,{value:s.language,children:s.name},s.language))}),e.jsx(g,{className:"mb-24",selectionMode:"single",name:"country",label:e.jsx(i,{message:"Country"}),showSearchField:!0,searchPlaceholder:o(p("Search countries")),children:m.map(s=>e.jsx(d,{value:s.code,children:s.name},s.code))}),e.jsx($,{label:e.jsx(i,{message:"Timezone"}),name:"timezone",timezones:c})]})})}export{O as L,M as u};
