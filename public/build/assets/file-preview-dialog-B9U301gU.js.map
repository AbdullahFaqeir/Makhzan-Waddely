{"version":3,"file":"file-preview-dialog-B9U301gU.js","sources":["../../../common/foundation/resources/client/uploads/file-entry-urls.ts","../../../common/foundation/resources/client/uploads/components/file-type-icon/file-thumbnail.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-context.ts","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/default-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/audio-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/image-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/pdf-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/text-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/video-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/word-document-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/available-previews.ts","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-container.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-dialog.tsx"],"sourcesContent":["import {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {isAbsoluteUrl} from '@ui/utils/urls/is-absolute-url';\nimport {createContext, useContext, useMemo} from 'react';\n\nexport const FileEntryUrlsContext = createContext<\n  Record<string, string | number | null | undefined>\n>(null!);\n\ninterface PartialEntry {\n  url?: string;\n  hash: string;\n  file_name: string;\n  extension?: string;\n  thumbnail?: boolean;\n}\n\nexport function useFileEntryUrls(\n  entry?: PartialEntry,\n  options?: {preferThumbnail?: boolean; downloadHashes?: string[]},\n): {previewUrl?: string; downloadUrl?: string} {\n  const {base_url} = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n\n  return useMemo(() => {\n    if (!entry) {\n      return {};\n    }\n\n    const previewUrl = buildPreviewUrl(\n      entry,\n      options?.preferThumbnail || false,\n    );\n\n    const urls = {\n      previewUrl,\n      downloadUrl: `${base_url}/api/v1/file-entries/download/${\n        options?.downloadHashes || entry.hash\n      }`,\n    };\n\n    if (urlSearchParams) {\n      // preview url\n      if (urls.previewUrl) {\n        urls.previewUrl = addParams(\n          urls.previewUrl,\n          {\n            ...urlSearchParams,\n            thumbnail: options?.preferThumbnail ? 'true' : '',\n          },\n          base_url,\n        );\n      }\n\n      // download url\n      urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n    }\n\n    return urls;\n  }, [\n    base_url,\n    entry,\n    options?.downloadHashes,\n    options?.preferThumbnail,\n    urlSearchParams,\n  ]);\n}\n\nfunction buildPreviewUrl(\n  entry: PartialEntry,\n  preferThumbnail: boolean,\n): string | undefined {\n  if (!entry.url) return;\n\n  if (isAbsoluteUrl(entry.url)) {\n    if (preferThumbnail && entry.thumbnail) {\n      // replace last instance of entry.file_name in entry.url with 'thumbnail'\n      const extension = entry.extension === 'png' ? 'png' : 'jpg';\n      return entry.url.replace(\n        new RegExp(entry.file_name + '$'),\n        `thumbnail.${extension}`,\n      );\n    } else {\n      return entry.url;\n    }\n  }\n\n  return `${getBootstrapData().settings.base_url}/${entry.url}`;\n}\n\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value as string);\n  });\n  return url.toString();\n}\n","import {useTrans} from '@ui/i18n/use-trans';\nimport clsx from 'clsx';\nimport {useFileEntryUrls} from '../../file-entry-urls';\nimport {FileTypeIcon} from './file-type-icon';\n\nconst TwoMB = 2 * 1024 * 1024;\n\ninterface Props {\n  file: {\n    name: string;\n    type: string;\n    thumbnail?: boolean;\n    file_size?: number;\n    hash: string;\n    file_name: string;\n    url?: string;\n  };\n  className?: string;\n  iconClassName?: string;\n  showImage?: boolean;\n}\nexport function FileThumbnail({\n  file,\n  className,\n  iconClassName,\n  showImage = true,\n}: Props) {\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(file, {preferThumbnail: true});\n\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\n    showImage = false;\n  }\n\n  if (showImage && file.type === 'image' && previewUrl) {\n    const alt = trans({\n      message: ':fileName thumbnail',\n      values: {fileName: file.name},\n    });\n    return (\n      <img\n        className={clsx(className, 'object-cover')}\n        src={previewUrl}\n        alt={alt}\n        draggable={false}\n      />\n    );\n  }\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\n}\n","import {FilePreviewEntry} from '@common/uploads/components/file-preview/file-preview-entry';\nimport React from 'react';\n\nexport interface FilePreviewContextValue {\n  entries: FilePreviewEntry[];\n  activeIndex: number;\n}\n\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\n  null!,\n);\n","import {Button} from '@ui/buttons/button';\nimport {Trans} from '@ui/i18n/trans';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport clsx from 'clsx';\nimport {ReactNode, useContext} from 'react';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {FilePreviewContext} from '../file-preview-context';\nimport {FilePreviewProps} from './file-preview-props';\n\ninterface Props extends FilePreviewProps {\n  message?: ReactNode;\n}\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n  return (\n    <div\n      className={clsx(\n        className,\n        'w-[calc(100%-40px)] max-w-400 rounded-panel bg-elevated p-40 text-center shadow',\n      )}\n    >\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && (\n        <div className=\"mt-20 block text-center\">\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => {\n              if (downloadUrl) {\n                downloadFileFromUrl(downloadUrl);\n              }\n            }}\n          >\n            <Trans message=\"Download\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useEffect, useRef, useState} from 'react';\n\nexport function AudioFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLAudioElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <audio\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </audio>\n  );\n}\n","import clsx from 'clsx';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function ImageFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <img\n      className={clsx(className, 'shadow')}\n      src={previewUrl}\n      alt={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {FilePreviewProps} from '@common/uploads/components/file-preview/file-preview/file-preview-props';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {DefaultFilePreview} from '@common/uploads/components/file-preview/file-preview/default-file-preview';\n\nexport function PdfFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <iframe\n      title={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n      className={clsx(className, 'h-full w-full')}\n      src={`${previewUrl}#toolbar=0`}\n    />\n  );\n}\n","import {apiClient} from '@common/http/query-client';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport clsx from 'clsx';\nimport {useEffect, useState} from 'react';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {FilePreviewProps} from './file-preview-props';\n\nconst FIVE_MB = 5242880;\n\nexport function TextFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState<string | null>(null);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size! >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl)\n        .then(response => {\n          setContents(response.data);\n        })\n        .catch(() => {\n          setIsFailed(true);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [entry, previewUrl]);\n\n  if (isLoading) {\n    return (\n      <ProgressCircle\n        isIndeterminate\n        aria-label={trans({message: 'Loading file contents'})}\n      />\n    );\n  }\n\n  if (tooLarge) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"This file is too large to preview.\" />}\n      />\n    );\n  }\n\n  if (isFailed) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"There was an issue previewing this file\" />}\n      />\n    );\n  }\n\n  return (\n    <pre\n      className={clsx(\n        'h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded-panel bg-elevated p-20 text-sm',\n        className,\n      )}\n    >\n      <div className=\"container mx-auto\">{`${contents}`}</div>\n    </pre>\n  );\n}\n\nfunction getFileContents(src: string) {\n  return apiClient.get(src, {\n    responseType: 'text',\n    // required for s3 presigned url to work\n    withCredentials: false,\n    headers: {\n      Accept: 'text/plain',\n    },\n  });\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\n\nexport function VideoFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLVideoElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <video\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      playsInline\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </video>\n  );\n}\n","import { apiClient } from '@common/http/query-client';\nimport { useTrans } from '@ui/i18n/use-trans';\nimport { ProgressCircle } from '@ui/progress/progress-circle';\nimport clsx from 'clsx';\nimport { useEffect, useRef, useState } from 'react';\nimport { useFileEntryUrls } from '../../../file-entry-urls';\nimport { DefaultFilePreview } from './default-file-preview';\nimport { FilePreviewProps } from './file-preview-props';\n\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const ref = useRef<HTMLIFrameElement>(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef<any>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <div className={clsx(className, 'h-full w-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe\n        ref={ref}\n        title={trans({\n          message: 'Preview for :name',\n          values: {name: entry.name},\n        })}\n        className={clsx('h-full w-full', isLoading && 'hidden')}\n      />\n    </div>\n  );\n}\n\nasync function buildPreviewUrl(\n  urlString: string,\n  entry: {id: number},\n): Promise<string> {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {data} = await apiClient.post(\n      `file-entries/${entry.id}/add-preview-token`,\n    );\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n\n  return buildOfficeLivePreviewUrl(url);\n}\n\nfunction buildOfficeLivePreviewUrl(url: URL) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\n    url.toString(),\n  )}`;\n}\n","import {AudioFilePreview} from './file-preview/audio-file-preview';\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\nimport {ImageFilePreview} from './file-preview/image-file-preview';\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\nimport {TextFilePreview} from './file-preview/text-file-preview';\nimport {VideoFilePreview} from './file-preview/video-file-preview';\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\n\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview,\n} as const;\n\nexport function getPreviewForEntry(entry: {mime?: string; type?: string}) {\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\n  const type = entry?.type as keyof typeof AvailablePreviews;\n  return (\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\n  );\n}\n","import {FilePreviewEntry} from '@common/uploads/components/file-preview/file-preview-entry';\nimport {FileThumbnail} from '@common/uploads/components/file-type-icon/file-thumbnail';\nimport {useControlledState} from '@react-stately/utils';\nimport {opacityAnimation} from '@ui/animation/opacity-animation';\nimport {Button} from '@ui/buttons/button';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {Trans} from '@ui/i18n/trans';\nimport {ChevronLeftIcon} from '@ui/icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '@ui/icons/material/ChevronRight';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {FileDownloadIcon} from '@ui/icons/material/FileDownload';\nimport {KeyboardArrowLeftIcon} from '@ui/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@ui/icons/material/KeyboardArrowRight';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport {useMediaQuery} from '@ui/utils/hooks/use-media-query';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\nimport {useFileEntryUrls} from '../../file-entry-urls';\nimport {getPreviewForEntry} from './available-previews';\nimport {FilePreviewContext} from './file-preview-context';\n\nexport interface FilePreviewContainerProps {\n  entries: FilePreviewEntry[];\n  activeIndex?: number;\n  defaultActiveIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  onClose?: () => void;\n  showHeader?: boolean;\n  headerActionsLeft?: ReactNode;\n  className?: string;\n  allowDownload?: boolean;\n}\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}: FilePreviewContainerProps) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex || 0,\n    props.onActiveIndexChange,\n  );\n\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {entries, activeIndex};\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n\n  return (\n    <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && (\n        <Header\n          actionsLeft={headerActionsLeft}\n          isMobile={isMobile}\n          onClose={onClose}\n          onNext={canOpenNext ? openNext : undefined}\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\n          allowDownload={allowDownload}\n        />\n      )}\n      <div className={clsx('relative flex-auto overflow-hidden', className)}>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\"\n            disabled={!canOpenPrevious}\n            onClick={openPrevious}\n          >\n            <KeyboardArrowLeftIcon />\n          </IconButton>\n        )}\n        <AnimatePresence initial={false}>\n          <m.div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            key={activeEntry.id}\n            {...opacityAnimation}\n          >\n            <Preview\n              className=\"max-h-[calc(100%-30px)]\"\n              entry={activeEntry}\n              allowDownload={allowDownload}\n            />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\"\n            disabled={!canOpenNext}\n            onClick={openNext}\n          >\n            <KeyboardArrowRightIcon />\n          </IconButton>\n        )}\n      </div>\n    </FilePreviewContext.Provider>\n  );\n}\n\ninterface HeaderProps {\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onClose?: () => void;\n  isMobile: boolean | null;\n  actionsLeft?: ReactNode;\n  allowDownload?: boolean;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload,\n}: HeaderProps) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n\n  const desktopDownloadButton = (\n    <Button\n      startIcon={<FileDownloadIcon />}\n      variant=\"text\"\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <Trans message=\"Download\" />\n    </Button>\n  );\n\n  const mobileDownloadButton = (\n    <IconButton\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <FileDownloadIcon />\n    </IconButton>\n  );\n\n  const downloadButton = isMobile\n    ? mobileDownloadButton\n    : desktopDownloadButton;\n\n  return (\n    <div className=\"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-elevated px-10 text-sm text-muted\">\n      <div className=\"flex w-1/3 items-center justify-start gap-4\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main\">\n        <FileThumbnail\n          file={activeEntry}\n          iconClassName=\"w-16 h-16\"\n          showImage={false}\n        />\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap\">\n        {!isMobile && (\n          <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"mx-20 h-24 w-1 bg-divider\" />\n          </Fragment>\n        )}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {Dialog} from '@ui/overlays/dialog/dialog';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {\n  FilePreviewContainer,\n  FilePreviewContainerProps,\n} from './file-preview-container';\n\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\nexport function FilePreviewDialog(props: Props) {\n  return (\n    <Dialog\n      size=\"fullscreenTakeover\"\n      background=\"bg-alt\"\n      className=\"flex flex-col\"\n    >\n      <Content {...props} />\n    </Dialog>\n  );\n}\n\nexport function Content(props: Props) {\n  const {close} = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}\n"],"names":["FileEntryUrlsContext","createContext","useFileEntryUrls","entry","options","base_url","useSettings","urlSearchParams","useContext","useMemo","urls","buildPreviewUrl","addParams","preferThumbnail","isAbsoluteUrl","extension","getBootstrapData","urlString","params","baseUrl","url","key","value","TwoMB","FileThumbnail","file","className","iconClassName","showImage","trans","useTrans","previewUrl","alt","jsx","clsx","FileTypeIcon","FilePreviewContext","React","DefaultFilePreview","message","allowDownload","entries","activeIndex","activeEntry","content","Trans","downloadUrl","jsxs","Button","downloadFileFromUrl","AudioFilePreview","props","ref","useRef","mediaInvalid","setMediaInvalid","useState","useEffect","_a","ImageFilePreview","PdfFilePreview","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","isLoading","setIsLoading","isFailed","setIsFailed","contents","setContents","getFileContents","response","ProgressCircle","src","apiClient","VideoFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","timeoutId","data","buildOfficeLivePreviewUrl","AvailablePreviews","getPreviewForEntry","mime","type","FilePreviewContainer","onClose","showHeader","headerActionsLeft","isMobile","useMediaQuery","setActiveIndex","useControlledState","contextValue","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","IconButton","KeyboardArrowLeftIcon","AnimatePresence","m","opacityAnimation","KeyboardArrowRightIcon","onNext","onPrevious","actionsLeft","downloadButton","FileDownloadIcon","Fragment","ChevronLeftIcon","ChevronRightIcon","CloseIcon","FilePreviewDialog","Dialog","Content","close","useDialogContext"],"mappings":"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"}