{"version":3,"file":"use-rerurun-scheduled-command-C6-7g7MT.js","sources":["../../../common/foundation/resources/client/admin/logging/schedule/use-rerurun-scheduled-command.tsx"],"sourcesContent":["import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {message} from '@ui/i18n/message';\nimport {toast} from '@ui/toast/toast';\nimport {DatatableDataQueryKey} from '@common/datatable/requests/paginated-resources';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  id: number;\n}\n\nexport function useRerunScheduledCommand() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (payload: Payload) => rerunCommand(payload),\n    onSuccess: async (response, props) => {\n      await queryClient.invalidateQueries({\n        queryKey: DatatableDataQueryKey('logs/schedule'),\n      });\n      toast.positive(trans(message('Command reran')));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction rerunCommand({id}: Payload): Promise<Response> {\n  return apiClient.post(`logs/schedule/rerun/${id}`).then(r => r.data);\n}\n"],"names":["useRerunScheduledCommand","trans","useTrans","useMutation","payload","rerunCommand","response","props","queryClient","DatatableDataQueryKey","toast","message","err","showHttpErrorToast","id","apiClient","r"],"mappings":"2IAeO,SAASA,GAA2B,CACzC,KAAM,CAAC,MAAAC,CAAA,EAASC,EAAA,EAChB,OAAOC,EAAY,CACjB,WAAaC,GAAqBC,EAAaD,CAAO,EACtD,UAAW,MAAOE,EAAUC,IAAU,CACpC,MAAMC,EAAY,kBAAkB,CAClC,SAAUC,EAAsB,eAAe,CAAA,CAChD,EACDC,EAAM,SAAST,EAAMU,EAAQ,eAAe,CAAC,CAAC,CAChD,EACA,QAASC,GAAOC,EAAmBD,CAAG,CAAA,CACvC,CACH,CAEA,SAASP,EAAa,CAAC,GAAAS,GAAiC,CACtD,OAAOC,EAAU,KAAK,uBAAuBD,CAAE,EAAE,EAAE,KAAKE,GAAKA,EAAE,IAAI,CACrE"}