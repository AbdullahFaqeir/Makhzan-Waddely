{"version":3,"file":"accordion-CpK0I08P.js","sources":["../../../common/foundation/resources/client/ui/library/accordion/accordtion-animation.ts","../../../common/foundation/resources/client/ui/library/accordion/accordion.tsx"],"sourcesContent":["export const AccordionAnimation = {\n  variants: {\n    open: {\n      height: 'auto',\n      visibility: 'visible',\n      transitionEnd: {\n        overflow: 'auto',\n      },\n    },\n    closed: {\n      height: 0,\n      overflow: 'hidden',\n      transitionEnd: {\n        visibility: 'hidden',\n      },\n    },\n  },\n  transition: {type: 'tween', duration: 0.2},\n} as const;\n","import {FocusScope, useFocusManager} from '@react-aria/focus';\nimport {useControlledState} from '@react-stately/utils';\nimport {AccordionAnimation} from '@ui/accordion/accordtion-animation';\nimport {ArrowDropDownIcon} from '@ui/icons/material/ArrowDropDown';\nimport {SvgIconProps} from '@ui/icons/svg-icon';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport React, {\n  ReactElement,\n  ReactNode,\n  RefObject,\n  cloneElement,\n  isValidElement,\n  useId,\n  useRef,\n} from 'react';\n\ntype Props = {\n  variant?: 'outline' | 'default' | 'minimal';\n  children?: ReactNode;\n  mode?: 'single' | 'multiple';\n  expandedValues?: (string | number)[];\n  defaultExpandedValues?: (string | number)[];\n  onExpandedChange?: (key: (string | number)[]) => void;\n  className?: string;\n  isLazy?: boolean;\n  gap?: string;\n  size?: 'md' | 'lg';\n};\nexport const Accordion = React.forwardRef<HTMLDivElement, Props>(\n  (\n    {\n      variant = 'default',\n      mode = 'single',\n      children,\n      className,\n      isLazy,\n      gap = 'space-y-10',\n      size,\n      ...other\n    },\n    ref,\n  ) => {\n    const [expandedValues, setExpandedValues] = useControlledState(\n      other.expandedValues,\n      other.defaultExpandedValues || [],\n      other.onExpandedChange,\n    );\n\n    const itemsCount = React.Children.count(children);\n\n    return (\n      <div\n        className={clsx(variant === 'outline' && gap, className)}\n        ref={ref}\n        role=\"presentation\"\n      >\n        <AnimatePresence>\n          <FocusScope>\n            {React.Children.map(children, (child, index) => {\n              if (!isValidElement<AccordionItemProps>(child)) return null;\n              return cloneElement<AccordionItemProps>(child, {\n                key: child.key || index,\n                value: child.props.value || index,\n                isFirst: index === 0,\n                isLast: index === itemsCount - 1,\n                mode,\n                variant,\n                expandedValues,\n                setExpandedValues,\n                isLazy,\n                size,\n              });\n            })}\n          </FocusScope>\n        </AnimatePresence>\n      </div>\n    );\n  },\n);\n\nexport interface AccordionItemProps {\n  children: ReactNode;\n  disabled?: boolean;\n  label: ReactNode;\n  description?: ReactNode;\n  descriptionClassName?: string;\n  value?: string | number;\n  isFirst?: boolean;\n  isLast?: boolean;\n  bodyClassName?: string;\n  className?: string;\n  bodyPadding?: string;\n  labelClassName?: string;\n  fontClassName?: string;\n  buttonPadding?: string;\n  chevronPosition?: 'left' | 'right';\n  startIcon?: ReactElement<SvgIconProps>;\n  startIconColor?: string;\n  endAppend?: ReactElement;\n  variant?: 'outline' | 'default' | 'minimal';\n  expandedValues?: (string | number)[];\n  setExpandedValues?: (keys: (string | number)[]) => void;\n  mode?: 'single' | 'multiple';\n  size?: Props['size'];\n  footerContent?: ReactNode;\n  isLazy?: boolean;\n  onHeaderMouseEnter?: () => void;\n  onHeaderMouseLeave?: () => void;\n  onOpen?: () => void;\n  ref?: RefObject<HTMLDivElement | null>;\n}\nexport function AccordionItem(props: AccordionItemProps) {\n  const {\n    children,\n    label,\n    disabled,\n    bodyClassName,\n    className,\n    bodyPadding = 'p-16',\n    labelClassName,\n    fontClassName,\n    buttonPadding,\n    startIcon,\n    startIconColor = 'text-muted',\n    description,\n    descriptionClassName = 'text-xs text-muted',\n    endAppend,\n    chevronPosition = 'right',\n    isFirst,\n    mode,\n    isLazy,\n    size,\n    variant,\n    footerContent,\n    onHeaderMouseEnter,\n    onHeaderMouseLeave,\n    onOpen,\n    ref,\n  } = props;\n  const expandedValues = props.expandedValues || [];\n  const value = props.value || 0;\n  const setExpandedValues = props.setExpandedValues || (() => {});\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const isExpanded = !disabled && expandedValues!.includes(value!);\n  const wasExpandedOnce = useRef(false);\n  if (isExpanded) {\n    wasExpandedOnce.current = true;\n  }\n  const focusManager = useFocusManager();\n  const id = useId();\n  const buttonId = `${id}-button`;\n  const panelId = `${id}-panel`;\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        focusManager?.focusNext();\n        break;\n      case 'ArrowUp':\n        focusManager?.focusPrevious();\n        break;\n      case 'Home':\n        focusManager?.focusFirst();\n        break;\n      case 'End':\n        focusManager?.focusLast();\n        break;\n    }\n  };\n\n  const toggle = () => {\n    const i = expandedValues.indexOf(value);\n    if (i > -1) {\n      const newKeys = [...expandedValues];\n      newKeys.splice(i, 1);\n      setExpandedValues(newKeys);\n      return;\n    }\n\n    if (mode === 'single') {\n      setExpandedValues([value]);\n    } else {\n      setExpandedValues([...expandedValues, value]);\n    }\n    onOpen?.();\n  };\n\n  const chevron = (\n    <div>\n      <ArrowDropDownIcon\n        aria-hidden=\"true\"\n        size=\"md\"\n        className={clsx(\n          disabled ? 'text-disabled' : 'text-muted',\n          isExpanded && 'rotate-180 transition-transform',\n        )}\n      />\n    </div>\n  );\n\n  return (\n    <div\n      data-value={value}\n      ref={ref}\n      className={clsx(\n        'transition-button',\n        variant === 'default' && 'border-b',\n        variant === 'outline' && 'rounded-panel border',\n        variant === 'outline' && isExpanded && 'border-divider-darker shadow',\n        disabled && 'text-disabled',\n        className,\n      )}\n    >\n      <h3\n        className={clsx(\n          'flex w-full items-center justify-between',\n          disabled && 'pointer-events-none',\n          isFirst && variant === 'default' && 'border-t',\n          isExpanded && variant !== 'minimal' && size !== 'lg'\n            ? 'border-b'\n            : 'border-b border-b-transparent',\n          variant === 'outline'\n            ? isExpanded\n              ? 'rounded-panel-t'\n              : 'rounded-panel'\n            : undefined,\n        )}\n        onMouseEnter={onHeaderMouseEnter}\n        onMouseLeave={onHeaderMouseLeave}\n      >\n        <button\n          disabled={disabled}\n          aria-expanded={isExpanded}\n          id={buttonId}\n          aria-controls={panelId}\n          type=\"button\"\n          ref={buttonRef}\n          onKeyDown={onKeyDown}\n          onClick={() => {\n            if (!disabled) {\n              toggle();\n            }\n          }}\n          className={clsx(\n            'flex min-w-0 flex-auto items-center gap-12 text-left outline-none transition-button hover:bg-hover focus-visible:bg-primary/focus',\n            buttonPadding ? buttonPadding : 'px-16 py-12',\n          )}\n        >\n          {chevronPosition === 'left' && chevron}\n          {startIcon &&\n            cloneElement<any>(startIcon, {\n              size: startIcon.props?.size ?? 'md',\n              className: clsx(\n                (startIcon as any).props.className,\n                disabled ? 'text-disabled' : startIconColor,\n              ),\n            })}\n          <div className=\"flex-auto overflow-hidden overflow-ellipsis\">\n            <div\n              className={clsx(\n                fontClassName\n                  ? fontClassName\n                  : size === 'lg'\n                    ? 'text-md font-semibold'\n                    : 'text-sm',\n                labelClassName,\n              )}\n            >\n              {label}\n            </div>\n            {description && (\n              <div className={descriptionClassName}>{description}</div>\n            )}\n          </div>\n          {chevronPosition === 'right' && chevron}\n        </button>\n        {endAppend && (\n          <div className=\"flex-shrink-0 px-4 text-sm text-muted\">\n            {endAppend}\n          </div>\n        )}\n      </h3>\n      <m.div\n        aria-labelledby={id}\n        role=\"region\"\n        variants={AccordionAnimation.variants}\n        transition={AccordionAnimation.transition}\n        initial={false}\n        animate={isExpanded ? 'open' : 'closed'}\n      >\n        <div className={clsx(bodyPadding, bodyClassName)}>\n          {!isLazy || wasExpandedOnce ? children : null}\n        </div>\n        {footerContent}\n      </m.div>\n    </div>\n  );\n}\n"],"names":["AccordionAnimation","Accordion","React","variant","mode","children","className","isLazy","gap","size","other","ref","expandedValues","setExpandedValues","useControlledState","itemsCount","jsx","clsx","AnimatePresence","FocusScope","child","index","isValidElement","cloneElement","AccordionItem","props","label","disabled","bodyClassName","bodyPadding","labelClassName","fontClassName","buttonPadding","startIcon","startIconColor","description","descriptionClassName","endAppend","chevronPosition","isFirst","footerContent","onHeaderMouseEnter","onHeaderMouseLeave","onOpen","value","buttonRef","useRef","isExpanded","wasExpandedOnce","focusManager","useFocusManager","id","useId","buttonId","panelId","onKeyDown","e","toggle","i","newKeys","chevron","ArrowDropDownIcon","jsxs","_a","m"],"mappings":"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"}