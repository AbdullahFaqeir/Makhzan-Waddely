import{r as n,bw as h,j as a,l as j,bt as E,bx as i,bn as m,b9 as P,by as b,b3 as f,e as p,X as D,k as y,q as N,N as S,F as v}from"./main-TIUJvpaR.js";import{P as L}from"./page-meta-tags-D0SmNym_.js";import"./default-meta-tags-BkUitnZo.js";function I({page:e}){const r=n.useRef(null);return n.useEffect(()=>{r.current&&h(r.current)},[]),a.jsx("div",{className:"px-16 md:px-24",children:a.jsxs("div",{className:"custom-page-body prose mx-auto my-50 dark:prose-invert",children:[a.jsx("h1",{children:e.title}),a.jsx("div",{ref:r,className:"whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:e.body}})]})})}const T={delay:500,minDuration:200};function w(e,r){r=Object.assign({},T,r);const[t,s]=n.useState("IDLE"),u=n.useRef(null);return n.useEffect(()=>{e&&t==="IDLE"&&(clearTimeout(u.current),u.current=setTimeout(()=>{if(!e)return s("IDLE");u.current=setTimeout(()=>{s("EXPIRE")},r==null?void 0:r.minDuration),s("DISPLAY")},r==null?void 0:r.delay),s("DELAY")),!e&&t!=="DISPLAY"&&(clearTimeout(u.current),s("IDLE"))},[e,t,r.delay,r.minDuration]),n.useEffect(()=>()=>clearTimeout(u.current),[]),t==="DISPLAY"||t==="EXPIRE"}function C({query:e,show404:r=!0,loader:t,loaderClassName:s,loaderIsScreen:u=!0,delayedSpinner:o=!0,redirectOn404:c,isLoading:l}){const{isLoggedIn:g}=j();l=l??e.isLoading;const d=w(l,{delay:500,minDuration:200});return l?!d&&o?null:t||a.jsx(E,{className:s,screen:u}):e.isError&&(i(e.error,401)||i(e.error,403))&&!g?a.jsx(m,{to:"/login",replace:!0}):r&&e.isError&&i(e.error,404)?c?a.jsx(m,{to:c,replace:!0}):a.jsx(P,{}):a.jsx(b,{})}const x=e=>`custom-pages/${e}`;function A(e){const r=f();return e||(e=r.pageId),p({queryKey:[x(e)],queryFn:()=>R(e),initialData:()=>{var s;const t=(s=D().loaders)==null?void 0:s.customPage;if(t!=null&&t.page&&(t.page.id==e||t.page.slug==e))return t}})}function R(e){return y.get(x(e)).then(r=>r.data)}function Y({slug:e}){const{pageSlug:r}=f();let t;N().forEach(u=>{var c;const o=(c=u.handle)==null?void 0:c.slug;o&&(t=o)});const s=A(e||r||t);return n.useEffect(()=>{var u;(u=s.data)!=null&&u.page&&window.scrollTo(0,0)},[s]),a.jsxs("div",{className:"flex min-h-screen flex-col bg",children:[a.jsx(L,{query:s}),a.jsx(S,{color:"bg",menuPosition:"custom-page-navbar",className:"sticky top-0 flex-shrink-0"}),a.jsx("div",{className:"flex-auto",children:s.data?a.jsx(I,{page:s.data.page}):a.jsx(C,{query:s,loaderClassName:"mt-80"})}),a.jsx(v,{className:"mx-14 md:mx-40"})]})}export{Y as Component};
