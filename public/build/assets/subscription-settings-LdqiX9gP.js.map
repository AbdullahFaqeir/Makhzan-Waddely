{"version":3,"file":"subscription-settings-LdqiX9gP.js","sources":["../../../common/foundation/resources/client/admin/settings/pages/subscription-settings.tsx"],"sourcesContent":["import {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {SettingsErrorGroup} from '@common/admin/settings/layout/settings-error-group';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {DocsLink} from '@common/admin/settings/layout/settings-links';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSwitch} from '@ui/forms/toggle/switch';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {Fragment} from 'react';\nimport {useForm, useFormContext} from 'react-hook-form';\n\nexport function Component() {\n  const {trans} = useTrans();\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      client: {\n        billing: {\n          enable: data.client.billing?.enable ?? false,\n          paypal_test_mode: data.client.billing?.paypal_test_mode ?? false,\n          paypal: {\n            enable: data.client.billing?.paypal?.enable ?? false,\n          },\n          stripe: {\n            enable: data.client.billing?.stripe?.enable ?? false,\n          },\n          invoice: {\n            address: data.client.billing?.invoice?.address ?? '',\n            notes: data.client.billing?.invoice?.notes ?? '',\n          },\n        },\n      },\n      server: {\n        paypal_client_id: data.server?.paypal_client_id ?? '',\n        paypal_secret: data.server?.paypal_secret ?? '',\n        paypal_webhook_id: data.server?.paypal_webhook_id ?? '',\n        stripe_key: data.server?.stripe_key ?? '',\n        stripe_secret: data.server?.stripe_secret ?? '',\n        stripe_webhook_secret: data.server?.stripe_webhook_secret ?? '',\n      },\n    },\n  });\n\n  return (\n    <AdminSettingsLayout form={form} title={<Trans message=\"Subscriptions\" />}>\n      <GeneralSection />\n      <PaypalSection />\n      <StripeSection />\n      <InvoiceAddressSection />\n      <InvoiceNotesSection />\n    </AdminSettingsLayout>\n  );\n}\n\nfunction GeneralSection() {\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Subscriptions\" />}\n      description={\n        <Trans message=\"Enable or disable subscription functionality across the site.\" />\n      }\n    >\n      <FormSwitch name=\"client.billing.enable\">\n        <Trans message=\"Enable subscriptions\" />\n      </FormSwitch>\n    </SettingsPanel>\n  );\n}\n\nfunction PaypalSection() {\n  const {watch} = useFormContext<AdminSettings>();\n  const paypalIsEnabled = watch('client.billing.paypal.enable');\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"PayPal Gateway\" />}\n      description={\n        <Trans message=\"Configure PayPal payment gateway integration.\" />\n      }\n      link={\n        <DocsLink link=\"https://support.vebto.com/hc/articles/147/configuring-paypal\">\n          <Trans message=\"How to set up PayPal\" />\n        </DocsLink>\n      }\n    >\n      <FormSwitch name=\"client.billing.paypal.enable\">\n        <Trans message=\"Enable PayPal\" />\n      </FormSwitch>\n      {paypalIsEnabled && (\n        <SettingsErrorGroup\n          name=\"paypal_group\"\n          separatorTop={false}\n          separatorBottom={false}\n        >\n          {isInvalid => (\n            <Fragment>\n              <FormTextField\n                size=\"sm\"\n                name=\"server.paypal_client_id\"\n                label={<Trans message=\"PayPal Client ID\" />}\n                required\n                invalid={isInvalid}\n                className=\"mt-20\"\n              />\n              <FormTextField\n                size=\"sm\"\n                name=\"server.paypal_secret\"\n                label={<Trans message=\"PayPal Secret\" />}\n                required\n                invalid={isInvalid}\n                className=\"mt-20\"\n              />\n              <FormTextField\n                size=\"sm\"\n                name=\"server.paypal_webhook_id\"\n                label={<Trans message=\"PayPal Webhook ID\" />}\n                required\n                invalid={isInvalid}\n                className=\"mt-20\"\n              />\n              <FormSwitch\n                name=\"client.billing.paypal_test_mode\"\n                invalid={isInvalid}\n                className=\"mt-20\"\n              >\n                <Trans message=\"PayPal test mode\" />\n              </FormSwitch>\n            </Fragment>\n          )}\n        </SettingsErrorGroup>\n      )}\n    </SettingsPanel>\n  );\n}\n\nfunction StripeSection() {\n  const {watch} = useFormContext<AdminSettings>();\n  const stripeEnabled = watch('client.billing.stripe.enable');\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Stripe Gateway\" />}\n      description={\n        <Trans message=\"Configure Stripe payment gateway integration.\" />\n      }\n      link={\n        <DocsLink link=\"https://support.vebto.com/hc/articles/148/configuring-stripe\">\n          <Trans message=\"How to set up Stripe\" />\n        </DocsLink>\n      }\n    >\n      <FormSwitch name=\"client.billing.stripe.enable\">\n        <Trans message=\"Enable Stripe\" />\n      </FormSwitch>\n      {stripeEnabled && (\n        <SettingsErrorGroup\n          name=\"stripe_group\"\n          separatorTop={false}\n          separatorBottom={false}\n        >\n          {isInvalid => (\n            <Fragment>\n              <FormTextField\n                size=\"sm\"\n                name=\"server.stripe_key\"\n                label={<Trans message=\"Stripe publishable key\" />}\n                required\n                className=\"mt-20\"\n                invalid={isInvalid}\n              />\n              <FormTextField\n                size=\"sm\"\n                name=\"server.stripe_secret\"\n                label={<Trans message=\"Stripe secret key\" />}\n                required\n                className=\"mt-20\"\n                invalid={isInvalid}\n              />\n              <FormTextField\n                size=\"sm\"\n                name=\"server.stripe_webhook_secret\"\n                label={<Trans message=\"Stripe webhook signing secret\" />}\n                className=\"mt-20\"\n                invalid={isInvalid}\n              />\n            </Fragment>\n          )}\n        </SettingsErrorGroup>\n      )}\n    </SettingsPanel>\n  );\n}\n\nfunction InvoiceAddressSection() {\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Invoice Address\" />}\n      description={\n        <Trans message=\"Set the address that will appear on customer invoices.\" />\n      }\n    >\n      <FormTextField\n        size=\"sm\"\n        label={<Trans message=\"Address\" />}\n        inputElementType=\"textarea\"\n        rows={2}\n        name=\"client.billing.invoice.address\"\n      />\n    </SettingsPanel>\n  );\n}\n\nfunction InvoiceNotesSection() {\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Invoice Notes\" />}\n      description={\n        <Trans message=\"Default notes to show under the notes section of customer invoices.\" />\n      }\n    >\n      <FormTextField\n        size=\"sm\"\n        label={<Trans message=\"Notes\" />}\n        inputElementType=\"textarea\"\n        rows={2}\n        name=\"client.billing.invoice.notes\"\n      />\n    </SettingsPanel>\n  );\n}\n"],"names":["Component","useTrans","data","useAdminSettings","form","useForm","_a","_b","_d","_c","_f","_e","_h","_g","_j","_i","_k","_l","_m","_n","_o","_p","jsxs","AdminSettingsLayout","Trans","jsx","GeneralSection","PaypalSection","StripeSection","InvoiceAddressSection","InvoiceNotesSection","SettingsPanel","FormSwitch","watch","useFormContext","paypalIsEnabled","DocsLink","SettingsErrorGroup","isInvalid","Fragment","FormTextField","stripeEnabled"],"mappings":"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"}