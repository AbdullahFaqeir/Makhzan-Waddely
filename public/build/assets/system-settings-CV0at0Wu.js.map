{"version":3,"file":"system-settings-CV0at0Wu.js","sources":["../../../common/foundation/resources/client/admin/settings/pages/system-settings/cache-settings.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/update-page/updater-types.ts","../../../common/foundation/resources/client/ui/library/icons/check-circle-filled.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/update-page/update-event-message.tsx","../../../common/foundation/resources/client/http/make-streamed-fetch-request.ts","../../../node_modules/eventsource-parser/dist/index.js","../../../node_modules/eventsource-parser/dist/stream.js","../../../common/foundation/resources/client/admin/settings/pages/system-settings/update-page/updater-context-provider.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/license-page.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/logging-settings.tsx","../../../common/foundation/resources/client/admin/settings/requests/use-queue-stats.ts","../../../common/foundation/resources/client/admin/settings/pages/system-settings/queue-settings.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/update-page/update-page.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/websocket-settings.tsx","../../../common/foundation/resources/client/admin/settings/pages/system-settings/system-settings.tsx"],"sourcesContent":["import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {SettingsErrorGroup} from '@common/admin/settings/layout/settings-error-group';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {DocsLink} from '@common/admin/settings/layout/settings-links';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {apiClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/http/show-http-error-toast';\nimport {SectionHelper} from '@common/ui/other/section-helper';\nimport {useMutation} from '@tanstack/react-query';\nimport {Button} from '@ui/buttons/button';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSelect, Option} from '@ui/forms/select/select';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {Trans} from '@ui/i18n/trans';\nimport {toast} from '@ui/toast/toast';\nimport {ComponentType, Fragment, ReactElement} from 'react';\nimport {useForm, useFormContext} from 'react-hook-form';\n\ninterface Props {\n  tabs: ReactElement;\n  title: ReactElement<MessageDescriptor>;\n}\nexport function CacheSettings({tabs, title}: Props) {\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      server: {\n        cache_store: data.server.cache_store ?? 'file',\n        memcached_host: data.server.memcached_host ?? '',\n        memcached_port: data.server.memcached_port ?? '',\n      },\n    },\n  });\n  return (\n    <AdminSettingsLayout form={form} title={title} tabs={tabs}>\n      <CacheProviderPanel />\n      <ClearCachePanel />\n    </AdminSettingsLayout>\n  );\n}\n\nexport function CacheProviderPanel() {\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Cache Provider\" />}\n      description={\n        <Trans message=\"Configure which method should be used for storing and retrieving cached items.\" />\n      }\n      link={\n        AdminDocsUrls.settings.cache ? (\n          <DocsLink link={AdminDocsUrls.settings.cache} />\n        ) : undefined\n      }\n    >\n      <CacheSelect />\n      <SectionHelper\n        size=\"sm\"\n        color=\"warning\"\n        className=\"mt-12\"\n        description={\n          <Trans\n            message={\n              '\"File\" is a good default, but other providers can provide better peformance, however they require extra setup on the server.'\n            }\n          />\n        }\n      />\n    </SettingsPanel>\n  );\n}\n\nexport function ClearCachePanel() {\n  const clearCache = useClearCache();\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Clear Cache\" />}\n      description={\n        <Trans message=\"Clear application cache if you're experiencing issues with stale data.\" />\n      }\n    >\n      <Button\n        type=\"button\"\n        variant=\"outline\"\n        size=\"xs\"\n        color=\"primary\"\n        disabled={clearCache.isPending}\n        onClick={() => clearCache.mutate()}\n      >\n        <Trans message=\"Clear cache\" />\n      </Button>\n    </SettingsPanel>\n  );\n}\n\nfunction CacheSelect() {\n  const {watch, clearErrors} = useFormContext<AdminSettings>();\n  const cacheStore = watch('server.cache_store');\n\n  let CredentialSection: ComponentType<CredentialProps> | null = null;\n  if (cacheStore === 'memcached') {\n    CredentialSection = MemcachedCredentials;\n  }\n\n  return (\n    <SettingsErrorGroup\n      separatorTop={false}\n      separatorBottom={false}\n      name=\"cache_group\"\n    >\n      {isInvalid => {\n        return (\n          <Fragment>\n            <FormSelect\n              size=\"sm\"\n              invalid={isInvalid}\n              onSelectionChange={() => clearErrors()}\n              selectionMode=\"single\"\n              name=\"server.cache_store\"\n            >\n              <Option value=\"file\">\n                <Trans message=\"File (Default)\" />\n              </Option>\n              <Option value=\"array\">\n                <Trans message=\"None\" />\n              </Option>\n              <Option value=\"apc\">APC</Option>\n              <Option value=\"memcached\">Memcached</Option>\n              <Option value=\"redis\">Redis</Option>\n            </FormSelect>\n            {CredentialSection && (\n              <div className=\"mt-20\">\n                <CredentialSection isInvalid={isInvalid} />\n              </div>\n            )}\n          </Fragment>\n        );\n      }}\n    </SettingsErrorGroup>\n  );\n}\n\ninterface CredentialProps {\n  isInvalid: boolean;\n}\nfunction MemcachedCredentials({isInvalid}: CredentialProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name=\"server.memcached_host\"\n        label={<Trans message=\"Memcached host\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        type=\"number\"\n        name=\"server.memcached_port\"\n        label={<Trans message=\"Memcached port\" />}\n        required\n      />\n    </Fragment>\n  );\n}\n\nfunction useClearCache() {\n  return useMutation({\n    mutationFn: () => apiClient.post('cache/flush').then(r => r.data),\n    onSuccess: () => {\n      toast(message('Cache cleared'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n","export const UpdateStep = {\n  Preparing: 'preparing',\n  Downloading: 'downloading',\n  Extracting: 'extracting',\n  MovingNewFiles: 'moving_new_files',\n  Finalizing: 'finalizing',\n} as const;\n\nexport const UpdateStepMessage = {\n  [UpdateStep.Preparing]: 'Preparing to update',\n  [UpdateStep.Downloading]: 'Downloading update',\n  [UpdateStep.Extracting]: 'Extracting update',\n  [UpdateStep.MovingNewFiles]: 'Copying new files',\n  [UpdateStep.Finalizing]: 'Finalizing update',\n};\n\nexport type UpdateStepName = (typeof UpdateStep)[keyof typeof UpdateStep];\n\nexport const UpdateStepStatus = {\n  Active: 'active',\n  Completed: 'completed',\n  Failed: 'failed',\n} as const;\n\nexport type UpdateEvent = {\n  type: 'event';\n  step: UpdateStepName;\n  status: (typeof UpdateStepStatus)[keyof typeof UpdateStepStatus];\n  message: string;\n  context?: {\n    error?: string;\n    progressPercentage?: number;\n  };\n};\n","import {createSvgIcon} from '@ui/icons/create-svg-icon';\n\nexport const CheckCircleFilledIcon = createSvgIcon(\n  <path d=\"m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z\" />,\n  'PlayArrowFilled',\n  '0 -960 960 960',\n);\n","import {\n  UpdateEvent,\n  UpdateStepStatus,\n} from '@common/admin/settings/pages/system-settings/update-page/updater-types';\nimport {Trans} from '@ui/i18n/trans';\nimport {CheckCircleFilledIcon} from '@ui/icons/check-circle-filled';\nimport {WarningIcon} from '@ui/icons/material/Warning';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport clsx from 'clsx';\n\ntype EventMessageProps = {\n  event: UpdateEvent;\n};\nexport function UpdateEventMessage({event}: EventMessageProps) {\n  return (\n    <div\n      className={clsx(\n        event.status === UpdateStepStatus.Completed && 'opacity-50',\n      )}\n    >\n      <div className=\"flex items-center gap-8\">\n        <EventStatusIndicator event={event} />\n        <div>{event.message}</div>\n      </div>\n      {event.context?.error ? (\n        <div className=\"mt-2 break-words text-sm text-danger\">\n          <Trans message=\"Update failed:\" /> {event.context.error}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nfunction EventStatusIndicator({event}: EventMessageProps) {\n  switch (event.status) {\n    case UpdateStepStatus.Active:\n      return (\n        <ProgressCircle\n          isIndeterminate={!event.context?.progressPercentage}\n          size=\"w-24 h-24\"\n          value={event.context?.progressPercentage}\n        />\n      );\n    case UpdateStepStatus.Completed:\n      return <CheckCircleFilledIcon className=\"text-positive\" />;\n    case UpdateStepStatus.Failed:\n      return <WarningIcon className=\"text-danger\" />;\n  }\n}\n","import {getEchoSocketId} from '@common/http/get-echo-socket-id';\nimport {getApiClientGlobalHeaders} from '@common/http/query-client';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\n\nexport function makeStreamedFetchRequest(\n  url: string,\n  payload?: unknown,\n  signal?: AbortSignal,\n) {\n  const headers: Record<string, string> = {\n    ...getApiClientGlobalHeaders(),\n    Accept: 'text/event-stream',\n    'Content-Type': 'application/json',\n    'X-CSRF-TOKEN': getBootstrapData().csrf_token,\n  };\n\n  const echoSocketId = getEchoSocketId();\n  if (typeof echoSocketId === 'string') {\n    headers['X-Socket-ID'] = echoSocketId;\n  }\n\n  return fetch(`${getBootstrapData().settings.base_url}/api/v1/${url}`, {\n    method: 'POST',\n    headers,\n    body: payload ? JSON.stringify(payload) : undefined,\n    signal,\n  });\n}\n","class ParseError extends Error {\n  constructor(message, options) {\n    super(message), this.name = \"ParseError\", this.type = options.type, this.field = options.field, this.value = options.value, this.line = options.line;\n  }\n}\nfunction noop(_arg) {\n}\nfunction createParser(callbacks) {\n  if (typeof callbacks == \"function\")\n    throw new TypeError(\n      \"`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?\"\n    );\n  const { onEvent = noop, onError = noop, onRetry = noop, onComment } = callbacks;\n  let incompleteLine = \"\", isFirstChunk = !0, id, data = \"\", eventType = \"\";\n  function feed(newChunk) {\n    const chunk = isFirstChunk ? newChunk.replace(/^\\xEF\\xBB\\xBF/, \"\") : newChunk, [complete, incomplete] = splitLines(`${incompleteLine}${chunk}`);\n    for (const line of complete)\n      parseLine(line);\n    incompleteLine = incomplete, isFirstChunk = !1;\n  }\n  function parseLine(line) {\n    if (line === \"\") {\n      dispatchEvent();\n      return;\n    }\n    if (line.startsWith(\":\")) {\n      onComment && onComment(line.slice(line.startsWith(\": \") ? 2 : 1));\n      return;\n    }\n    const fieldSeparatorIndex = line.indexOf(\":\");\n    if (fieldSeparatorIndex !== -1) {\n      const field = line.slice(0, fieldSeparatorIndex), offset = line[fieldSeparatorIndex + 1] === \" \" ? 2 : 1, value = line.slice(fieldSeparatorIndex + offset);\n      processField(field, value, line);\n      return;\n    }\n    processField(line, \"\", line);\n  }\n  function processField(field, value, line) {\n    switch (field) {\n      case \"event\":\n        eventType = value;\n        break;\n      case \"data\":\n        data = `${data}${value}\n`;\n        break;\n      case \"id\":\n        id = value.includes(\"\\0\") ? void 0 : value;\n        break;\n      case \"retry\":\n        /^\\d+$/.test(value) ? onRetry(parseInt(value, 10)) : onError(\n          new ParseError(`Invalid \\`retry\\` value: \"${value}\"`, {\n            type: \"invalid-retry\",\n            value,\n            line\n          })\n        );\n        break;\n      default:\n        onError(\n          new ParseError(\n            `Unknown field \"${field.length > 20 ? `${field.slice(0, 20)}\\u2026` : field}\"`,\n            { type: \"unknown-field\", field, value, line }\n          )\n        );\n        break;\n    }\n  }\n  function dispatchEvent() {\n    data.length > 0 && onEvent({\n      id,\n      event: eventType || void 0,\n      // If the data buffer's last character is a U+000A LINE FEED (LF) character,\n      // then remove the last character from the data buffer.\n      data: data.endsWith(`\n`) ? data.slice(0, -1) : data\n    }), id = void 0, data = \"\", eventType = \"\";\n  }\n  function reset(options = {}) {\n    incompleteLine && options.consume && parseLine(incompleteLine), isFirstChunk = !0, id = void 0, data = \"\", eventType = \"\", incompleteLine = \"\";\n  }\n  return { feed, reset };\n}\nfunction splitLines(chunk) {\n  const lines = [];\n  let incompleteLine = \"\", searchIndex = 0;\n  for (; searchIndex < chunk.length; ) {\n    const crIndex = chunk.indexOf(\"\\r\", searchIndex), lfIndex = chunk.indexOf(`\n`, searchIndex);\n    let lineEnd = -1;\n    if (crIndex !== -1 && lfIndex !== -1 ? lineEnd = Math.min(crIndex, lfIndex) : crIndex !== -1 ? crIndex === chunk.length - 1 ? lineEnd = -1 : lineEnd = crIndex : lfIndex !== -1 && (lineEnd = lfIndex), lineEnd === -1) {\n      incompleteLine = chunk.slice(searchIndex);\n      break;\n    } else {\n      const line = chunk.slice(searchIndex, lineEnd);\n      lines.push(line), searchIndex = lineEnd + 1, chunk[searchIndex - 1] === \"\\r\" && chunk[searchIndex] === `\n` && searchIndex++;\n    }\n  }\n  return [lines, incompleteLine];\n}\nexport {\n  ParseError,\n  createParser\n};\n//# sourceMappingURL=index.js.map\n","import { createParser } from \"./index.js\";\nimport { ParseError } from \"./index.js\";\nclass EventSourceParserStream extends TransformStream {\n  constructor({ onError, onRetry, onComment } = {}) {\n    let parser;\n    super({\n      start(controller) {\n        parser = createParser({\n          onEvent: (event) => {\n            controller.enqueue(event);\n          },\n          onError(error) {\n            onError === \"terminate\" ? controller.error(error) : typeof onError == \"function\" && onError(error);\n          },\n          onRetry,\n          onComment\n        });\n      },\n      transform(chunk) {\n        parser.feed(chunk);\n      }\n    });\n  }\n}\nexport {\n  EventSourceParserStream,\n  ParseError\n};\n//# sourceMappingURL=stream.js.map\n","import {\n  UpdateEvent,\n  UpdateStep,\n  UpdateStepMessage,\n  UpdateStepName,\n  UpdateStepStatus,\n} from '@common/admin/settings/pages/system-settings/update-page/updater-types';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {throwAxiosError} from '@common/http/get-axios-error-message';\nimport {makeStreamedFetchRequest} from '@common/http/make-streamed-fetch-request';\nimport {EventSourceParserStream} from 'eventsource-parser/stream';\nimport {createContext, ReactNode, useState} from 'react';\nimport {flushSync} from 'react-dom';\n\nconst DEFAULT_ERROR = 'An unknown error occurred during update';\n\ntype StartUpdateParams = {\n  moduleName?: string;\n};\n\ntype UpdaterContextValue = {\n  updateInProgress: boolean;\n  updateStarted: boolean;\n  setUpdateStarted: (value: boolean) => void;\n  events: UpdateEvent[];\n  updateOrInstallModule: (moduleName: string) => Promise<boolean>;\n  updateAppAndModules: () => Promise<boolean>;\n  moduleNames: string[];\n  // module that is currently being updated (\"app\" for main app)\n  activeModuleName: string | null;\n};\n\n// execute isolatable steps in separate http requests to hopefully avoid request timeout issues\nconst groupedSteps: UpdateStepName[][] = [\n  [UpdateStep.Preparing],\n  [UpdateStep.Downloading],\n  [UpdateStep.Extracting],\n  [UpdateStep.MovingNewFiles],\n  [UpdateStep.Finalizing],\n];\n\nlet internalEvents: UpdateEvent[] = [];\n\nconst anyStepFailed = () =>\n  internalEvents.some(e => e.status === UpdateStepStatus.Failed);\n\nexport const UpdaterContext = createContext<UpdaterContextValue>(null!);\n\ntype UpdaterContextProviderProps = {\n  children: ReactNode;\n};\nexport function UpdaterContextProvider({\n  children,\n}: UpdaterContextProviderProps) {\n  // get names of modules that should be updated along with the app\n  const {data: adminSettings} = useAdminSettings();\n  const moduleNames = Object.entries(adminSettings?.modules ?? {})\n    .filter(\n      ([, module]) =>\n        !module.built_in && module.installed && module.envato_purchase_code,\n    )\n    .map(([name]) => name);\n\n  const [updateStarted, setUpdateStarted] = useState(false);\n  const [updateInProgress, setUpdateInProgress] = useState(false);\n  const [events, setEvents] = useState<UpdateEvent[]>([]);\n  const [activeModuleName, setActiveModuleName] = useState<string | null>(null);\n\n  const updateOrInstallModule = async (\n    moduleName: string,\n  ): Promise<boolean> => {\n    setUpdateStarted(true);\n    setUpdateInProgress(true);\n    setActiveModuleName(moduleName);\n\n    const success = await runUpdate(moduleName);\n    flushSync(() => setUpdateInProgress(false));\n    return success;\n  };\n\n  const updateAppAndModules = async (): Promise<boolean> => {\n    setUpdateStarted(true);\n    setUpdateInProgress(true);\n\n    const names = ['app', ...moduleNames];\n\n    for (const name of names) {\n      setActiveModuleName(name);\n      const success = await runUpdate(name);\n      if (!success) {\n        flushSync(() => setUpdateInProgress(false));\n        return false;\n      }\n    }\n\n    flushSync(() => setUpdateInProgress(false));\n    return true;\n  };\n\n  const runUpdate = async (moduleName: 'app' | string): Promise<boolean> => {\n    internalEvents = [];\n    setEvents([]);\n\n    for (const steps of groupedSteps) {\n      if (anyStepFailed()) {\n        break;\n      }\n      await runUpdateStep({\n        steps,\n        moduleName,\n        onEvent: () => setEvents(internalEvents),\n      });\n    }\n\n    return !anyStepFailed();\n  };\n\n  return (\n    <UpdaterContext.Provider\n      value={{\n        updateInProgress,\n        updateStarted,\n        setUpdateStarted,\n        events,\n        updateOrInstallModule,\n        updateAppAndModules,\n        moduleNames,\n        activeModuleName,\n      }}\n    >\n      {children}\n    </UpdaterContext.Provider>\n  );\n}\n\ntype RunUpdateStepParams = {\n  steps: UpdateStepName[];\n  moduleName?: string;\n  onEvent: () => void;\n};\n\nasync function runUpdateStep({\n  steps,\n  moduleName,\n  onEvent,\n}: RunUpdateStepParams): Promise<void> {\n  const abortController = new AbortController();\n\n  // add active event on js side as well, incase buffering is disabled on the server\n  // and we won't receive any events until http request for step is completed\n  internalEvents.push({\n    type: 'event',\n    step: steps[0],\n    status: UpdateStepStatus.Active,\n    message: UpdateStepMessage[steps[0]],\n  });\n  onEvent();\n\n  try {\n    const response = await makeStreamedFetchRequest(\n      'update',\n      {\n        steps,\n        moduleName,\n      },\n      abortController?.signal,\n    );\n\n    if (!response.ok || !response?.body) {\n      throwAxiosError();\n    }\n\n    for await (const e of responseToIterator(response, abortController)) {\n      internalEvents =\n        internalEvents.at(-1)?.step === e.step\n          ? [...internalEvents.slice(0, -1), e]\n          : [...internalEvents, e];\n      onEvent();\n      if (e.context?.error) {\n        break;\n      }\n    }\n  } catch (err) {\n    // always set last event to failed if there's a client side error\n    finalizeInternalEvents(true);\n  }\n\n  finalizeInternalEvents();\n}\n\nasync function* responseToIterator(\n  response: Response,\n  abortController: AbortController,\n): AsyncGenerator<UpdateEvent> {\n  if (!response.ok || !response.body) {\n    return throwAxiosError();\n  }\n\n  const reader = response.body\n    .pipeThrough(new TextDecoderStream())\n    .pipeThrough(new EventSourceParserStream())\n    .getReader();\n\n  // Handle any cases where we must abort\n  reader.closed.then(() => abortController.abort());\n\n  // Handle logic for aborting\n  abortController.signal.addEventListener('abort', () => reader.cancel());\n\n  while (!abortController.signal.aborted) {\n    const {done, value} = await reader.read();\n    if (done) {\n      abortController.abort();\n      break;\n    }\n\n    if (!value || !value.event) continue;\n\n    const e = JSON.parse(value.data);\n\n    // end stream\n    if (e.type === 'endStream') {\n      abortController.abort();\n      break;\n    }\n\n    // emit\n    yield e;\n  }\n}\n\n// update step didn't complete fully, but no error was returned from backend\nfunction finalizeInternalEvents(forceError: boolean = false): UpdateEvent[] {\n  if (\n    !forceError &&\n    internalEvents.length &&\n    internalEvents.at(-1)?.status === UpdateStepStatus.Completed\n  ) {\n    return internalEvents;\n  }\n\n  // incase no events were emitted at all\n  if (!internalEvents?.length) {\n    internalEvents = [\n      {\n        type: 'event',\n        step: UpdateStep.Preparing,\n        status: UpdateStepStatus.Failed,\n        message: 'Preparing to update',\n      },\n    ];\n  }\n\n  // change last event from active to failed\n  const i = internalEvents.length - 1;\n  internalEvents[i].status = UpdateStepStatus.Failed;\n  if (!internalEvents[i].context) {\n    internalEvents[i].context = {};\n  }\n  internalEvents[i].context.error =\n    internalEvents[i].context.error || DEFAULT_ERROR;\n  return internalEvents;\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {UpdateEventMessage} from '@common/admin/settings/pages/system-settings/update-page/update-event-message';\nimport {\n  UpdaterContext,\n  UpdaterContextProvider,\n} from '@common/admin/settings/pages/system-settings/update-page/updater-context-provider';\nimport {\n  UpdateStep,\n  UpdateStepStatus,\n} from '@common/admin/settings/pages/system-settings/update-page/updater-types';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {DatatablePageHeaderBar} from '@common/datatable/page/datatable-page-with-header-layout';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {apiClient} from '@common/http/query-client';\nimport {Button} from '@ui/buttons/button';\nimport {Form} from '@ui/forms/form';\nimport {Chip} from '@ui/forms/input-field/chip-field/chip';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {message} from '@ui/i18n/message';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {OpenInNewIcon} from '@ui/icons/material/OpenInNew';\nimport {BlockerDialog} from '@ui/overlays/dialog/blocker-dialog';\nimport {toast} from '@ui/toast/toast';\nimport {ReactElement, ReactNode, use, useState} from 'react';\nimport {flushSync} from 'react-dom';\nimport {useForm, UseFormReturn} from 'react-hook-form';\n\ntype FormValue = {\n  purchase_code: string;\n};\n\ntype Props = {\n  tabs: ReactElement;\n  title: ReactElement<MessageDescriptor>;\n  rightContent?: ReactNode;\n};\nexport function LicensePage({tabs, title, rightContent}: Props) {\n  return (\n    <div className=\"dashboard-grid-content dashboard-rounded-panel flex h-full flex-col\">\n      <DatatablePageHeaderBar\n        title={title}\n        border=\"border-none\"\n        showSidebarToggleButton\n        rightContent={rightContent}\n      />\n      {tabs}\n      <div className=\"overflow-y-auto\">\n        <div className=\"mx-auto p-12 @container/settings-form md:p-24 lg:max-w-[1440px]\">\n          <LicensePanel />\n          <ModulePanels />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LicensePanel() {\n  const {trans} = useTrans();\n  const {data} = useAdminSettings();\n  const [activatedPurchaseCode, setActivatedPurchaseCode] = useState(\n    data.license?.purchase_code ?? '',\n  );\n\n  const form = useForm<FormValue>({\n    defaultValues: {\n      purchase_code: activatedPurchaseCode ?? '',\n    },\n  });\n\n  const [isPending, setIsPending] = useState(false);\n  const handleSubmit = async (values: FormValue) => {\n    setIsPending(true);\n    const code = await registerPurchaseCode({\n      code: values.purchase_code,\n      form,\n      itemId: data.license?.item_id ?? 0,\n    });\n    setIsPending(false);\n    if (code) {\n      toast(message('Purchase code activated'));\n      setActivatedPurchaseCode(code);\n    }\n  };\n\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Envato purchase code\" />}\n      description={\n        <Trans message=\"Activate your license to enable automatic updates and other functionality.\" />\n      }\n      link={\n        <Button\n          variant=\"link\"\n          color=\"primary\"\n          size=\"sm\"\n          href={AdminDocsUrls.settings.purchaseCode}\n          target=\"_blank\"\n        >\n          <Trans message=\"Where is my purchase code?\" />\n        </Button>\n      }\n    >\n      <Form\n        form={form}\n        disableNativeValidation\n        onSubmit={values => handleSubmit(values)}\n      >\n        <FormTextField\n          name=\"purchase_code\"\n          label={<Trans message=\"Envato purchase code\" />}\n          labelDisplay=\"hidden\"\n          placeholder={trans(\n            message('Example: :code', {\n              values: {code: '91939276-b234-49d1-ac42-6c7xe5t7a128'},\n            }),\n          )}\n          endAdornment={\n            <Chip\n              size=\"xs\"\n              color={activatedPurchaseCode ? 'positive' : 'danger'}\n              className=\"mr-12\"\n            >\n              {activatedPurchaseCode ? (\n                <Trans message=\"ACTIVATED\" />\n              ) : (\n                <Trans message=\"NOT ACTIVATED\" />\n              )}\n            </Chip>\n          }\n          required\n        />\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          disabled={isPending}\n          className=\"mt-24\"\n        >\n          <Trans message=\"Activate purchase code\" />\n        </Button>\n      </Form>\n    </SettingsPanel>\n  );\n}\n\nfunction ModulePanels() {\n  const {data} = useAdminSettings();\n\n  if (!data.modules || !Object.keys(data.modules).length) {\n    return null;\n  }\n\n  return (\n    <div>\n      <h2 className=\"mb-12 mt-44 text-lg font-semibold\">\n        <Trans message=\"Addon purchase codes\" />\n      </h2>\n      <div className=\"space-y-12\">\n        {Object.entries(data.modules)\n          .filter(([, module]) => !module.built_in)\n          .map(([key, module]) => (\n            <UpdaterContextProvider key={key}>\n              <ModulePanel name={key} config={module} />\n            </UpdaterContextProvider>\n          ))}\n      </div>\n    </div>\n  );\n}\n\ntype ModulePanelProps = {\n  name: string;\n  config: NonNullable<AdminSettings['modules']>[string];\n};\nfunction ModulePanel({config, name}: ModulePanelProps) {\n  const {trans} = useTrans();\n  const {data} = useAdminSettings();\n  const envatoItemId = data.modules?.[name]?.envato_item_id;\n  const {updateOrInstallModule} = use(UpdaterContext);\n  const [installed, setInstalled] = useState(config.installed);\n  const [activatedPurchaseCode, setActivatedPurchaseCode] = useState(\n    config.envato_purchase_code,\n  );\n  const form = useForm<FormValue>({\n    defaultValues: {\n      purchase_code: activatedPurchaseCode ?? '',\n    },\n  });\n\n  const handleModuleInstall = async () => {\n    const success = await updateOrInstallModule(name);\n    if (success) {\n      flushSync(() => {\n        setIsPending(false);\n        setInstalled(true);\n      });\n      setTimeout(() => {\n        window.location.reload();\n      }, 1000);\n    } else {\n      toast.danger(message('Failed to install module'));\n    }\n  };\n\n  const [isPending, setIsPending] = useState(false);\n  const handleSubmit = async (values: FormValue) => {\n    // // purchase code\n    setIsPending(true);\n    const code = await registerPurchaseCode({\n      code: values.purchase_code,\n      form,\n      itemId: config.envato_item_id ?? 0,\n      moduleName: name,\n    });\n\n    if (code) {\n      setActivatedPurchaseCode(code);\n      // no need to show this toast if we will be installing the module\n      if (installed) {\n        toast(message('Purchase code activated'));\n      } else {\n        handleModuleInstall();\n      }\n    }\n\n    setIsPending(false);\n  };\n\n  return (\n    <SettingsPanel\n      id={`module-${name}`}\n      title={config.label}\n      description={\n        <Trans message=\"Enter purchase code to install this addon.\" />\n      }\n      link={\n        <Button\n          variant=\"link\"\n          color=\"primary\"\n          size=\"sm\"\n          href={`https://codecanyon.net/item/i/${envatoItemId}`}\n          target=\"_blank\"\n          endIcon={<OpenInNewIcon />}\n        >\n          <Trans message=\"Get this addon\" />\n        </Button>\n      }\n    >\n      {isPending ? <BlockerDialog shouldBlock /> : null}\n      <Form form={form} onSubmit={values => handleSubmit(values)}>\n        <FormTextField\n          required\n          size=\"sm\"\n          name=\"purchase_code\"\n          label={<Trans message=\"Envato purchase code\" />}\n          labelDisplay=\"hidden\"\n          placeholder={trans(\n            message('Example: :code', {\n              values: {code: '91939276-b234-49d1-ac42-6c7xe5t7a128'},\n            }),\n          )}\n          endAdornment={\n            <Chip\n              size=\"xs\"\n              color={activatedPurchaseCode ? 'positive' : 'danger'}\n              className=\"mr-12\"\n            >\n              {activatedPurchaseCode ? (\n                <Trans message=\"ACTIVATED\" />\n              ) : (\n                <Trans message=\"NOT ACTIVATED\" />\n              )}\n            </Chip>\n          }\n        />\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          type=\"submit\"\n          className=\"mt-16\"\n          size=\"xs\"\n          disabled={isPending}\n        >\n          {installed ? (\n            <Trans message=\"Activate\" />\n          ) : (\n            <Trans message=\"Activate and install\" />\n          )}\n        </Button>\n      </Form>\n      <ModuleInstallProgress\n        onRetry={() => handleModuleInstall()}\n        className=\"mt-24 rounded-panel border p-16\"\n      />\n    </SettingsPanel>\n  );\n}\n\ntype ModuleInstallProgressProps = {\n  onRetry: () => void;\n  className?: string;\n};\nexport function ModuleInstallProgress({\n  onRetry,\n  className,\n}: ModuleInstallProgressProps) {\n  const {events, updateInProgress} = use(UpdaterContext);\n  const lastEvent = events.at(-1);\n\n  if (!events.length && !updateInProgress) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      <div className=\"space-y-18\">\n        {events.map((event, index) => (\n          <UpdateEventMessage event={event} key={index} />\n        ))}\n      </div>\n      {lastEvent?.context?.error ? (\n        <div className=\"mt-24 flex items-center gap-12\">\n          <Button variant=\"flat\" color=\"primary\" onClick={() => onRetry()}>\n            <Trans message=\"Retry\" />\n          </Button>\n          <Button variant=\"outline\" color=\"primary\" endIcon={<OpenInNewIcon />}>\n            <Trans message=\"Update manually\" />\n          </Button>\n        </div>\n      ) : null}\n      {lastEvent?.step === UpdateStep.Finalizing &&\n      lastEvent?.status === UpdateStepStatus.Completed ? (\n        <div className=\"mt-24 text-muted\">\n          <Trans message=\"Module installed successfully! Reloading the page...\" />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\ntype RegisterPurchaseCodeParams = {\n  code: string;\n  form: UseFormReturn<{purchase_code: string}>;\n  itemId: number;\n  moduleName?: string;\n};\nasync function registerPurchaseCode({\n  code,\n  form,\n  itemId,\n  moduleName,\n}: RegisterPurchaseCodeParams): Promise<string | undefined> {\n  try {\n    const response = await apiClient.post<{purchase_code: string}>(\n      'license/register-purchase-code',\n      {\n        purchase_code: code,\n        item_id: itemId,\n        module: moduleName,\n      },\n    );\n\n    return response.data.purchase_code;\n  } catch (error) {\n    onFormQueryError(error, form);\n  }\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {SettingsErrorGroup} from '@common/admin/settings/layout/settings-error-group';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {DocsLink} from '@common/admin/settings/layout/settings-links';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {ExternalLink} from '@ui/buttons/external-link';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {Trans} from '@ui/i18n/trans';\nimport {ReactElement} from 'react';\nimport {useForm, useFormContext} from 'react-hook-form';\n\ninterface Props {\n  tabs: ReactElement;\n  title: ReactElement<MessageDescriptor>;\n}\nexport function LoggingSettings({tabs, title}: Props) {\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      server: {\n        sentry_dsn: data.server.sentry_dsn ?? '',\n      },\n    },\n  });\n  return (\n    <AdminSettingsLayout form={form} title={title} tabs={tabs}>\n      <SentryPanel />\n    </AdminSettingsLayout>\n  );\n}\n\nfunction SentryPanel() {\n  const {clearErrors} = useFormContext();\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Sentry Integration\" />}\n      description={\n        <Trans\n          values={{\n            a: parts => (\n              <ExternalLink href=\"https://sentry.io\">{parts}</ExternalLink>\n            ),\n          }}\n          message=\"<a>Sentry</a> integration provides real-time error tracking and helps identify and fix issues when site is in production.\"\n        />\n      }\n      link={\n        AdminDocsUrls.settings.logging ? (\n          <DocsLink link={AdminDocsUrls.settings.logging} />\n        ) : null\n      }\n    >\n      <SettingsErrorGroup\n        separatorTop={false}\n        separatorBottom={false}\n        name=\"logging_group\"\n      >\n        {isInvalid => {\n          return (\n            <FormTextField\n              size=\"sm\"\n              onChange={() => clearErrors()}\n              invalid={isInvalid}\n              name=\"server.sentry_dsn\"\n              type=\"url\"\n              minLength={30}\n              label={<Trans message=\"Sentry DSN\" />}\n            />\n          );\n        }}\n      </SettingsErrorGroup>\n    </SettingsPanel>\n  );\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {apiClient} from '@common/http/query-client';\nimport {useQuery} from '@tanstack/react-query';\nimport {useSettings} from '@ui/settings/use-settings';\n\ninterface Response extends BackendResponse {\n  failedJobs: number;\n  jobsPerMinute: number;\n  pausedMasters: number;\n  periods: {\n    failedJobs: number;\n    recentJobs: number;\n  };\n  processes: number;\n  queueWithMaxRuntime?: string;\n  queueWithMaxThroughput?: string;\n  recentJobs: number;\n  status: 'running' | 'inactive' | 'paused';\n}\n\nexport function useQueueStats() {\n  const {site} = useSettings();\n  return useQuery({\n    queryKey: ['queue-stats'],\n    queryFn: () =>\n      site.demo\n        ? Promise.resolve({\n            status: 'running',\n          })\n        : fetchStats(),\n    refetchInterval: 5000, // Poll every 5s\n  });\n}\n\nfunction fetchStats() {\n  return apiClient\n    .get<Response>('horizon/api/stats')\n    .then(response => response.data);\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {SettingsErrorGroup} from '@common/admin/settings/layout/settings-error-group';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {DocsLink} from '@common/admin/settings/layout/settings-links';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {useQueueStats} from '@common/admin/settings/requests/use-queue-stats';\nimport {SectionHelper} from '@common/ui/other/section-helper';\nimport {Button} from '@ui/buttons/button';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSelect, Option} from '@ui/forms/select/select';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {Trans} from '@ui/i18n/trans';\nimport {ErrorIcon} from '@ui/icons/material/Error';\nimport {OpenInNewIcon} from '@ui/icons/material/OpenInNew';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {ComponentType, Fragment, ReactElement} from 'react';\nimport {useForm, useFormContext} from 'react-hook-form';\n\ninterface Props {\n  tabs: ReactElement;\n  title: ReactElement<MessageDescriptor>;\n}\nexport function QueueSettings({tabs, title}: Props) {\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      server: {\n        queue_connection: data.server.queue_connection ?? 'sync',\n        aws_access_key_id: data.server.aws_access_key_id ?? '',\n        aws_secret_access_key: data.server.aws_secret_access_key ?? '',\n        sqs_prefix: data.server.sqs_prefix ?? '',\n        sqs_queue: data.server.sqs_queue ?? '',\n        aws_default_region: data.server.aws_default_region ?? '',\n      },\n    },\n  });\n  const selectedDriver = form.watch('server.queue_connection');\n\n  return (\n    <AdminSettingsLayout form={form} title={title} tabs={tabs}>\n      <QueueMethodPanel />\n      {selectedDriver !== 'sync' && <QueueStatusPanel />}\n    </AdminSettingsLayout>\n  );\n}\n\nexport function QueueMethodPanel() {\n  const {watch, clearErrors} = useFormContext<AdminSettings>();\n  const queueDriver = watch('server.queue_connection');\n\n  let CredentialSection: ComponentType<CredentialProps> | null = null;\n  if (queueDriver === 'sqs') {\n    CredentialSection = SqsCredentials;\n  }\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Queue Method\" />}\n      description={\n        <Trans message=\"Queues allow deferring time-consuming tasks, such as sending emails, until a later time.\" />\n      }\n      link={\n        AdminDocsUrls.settings.queue ? (\n          <DocsLink link={AdminDocsUrls.settings.queue} />\n        ) : undefined\n      }\n    >\n      <SettingsErrorGroup\n        separatorTop={false}\n        separatorBottom={false}\n        name=\"queue_group\"\n      >\n        {isInvalid => {\n          return (\n            <Fragment>\n              <FormSelect\n                size=\"sm\"\n                invalid={isInvalid}\n                onSelectionChange={() => {\n                  clearErrors();\n                }}\n                selectionMode=\"single\"\n                name=\"server.queue_connection\"\n                required\n              >\n                <Option value=\"sync\">\n                  <Trans message=\"None (Default)\" />\n                </Option>\n                <Option value=\"beanstalkd\">Beanstalkd</Option>\n                <Option value=\"database\">\n                  <Trans message=\"Database\" />\n                </Option>\n                <Option value=\"sqs\">\n                  <Trans message=\"SQS (Amazon simple queue service)\" />\n                </Option>\n                <Option value=\"redis\">Redis</Option>\n              </FormSelect>\n              {CredentialSection && (\n                <div className=\"mt-20\">\n                  <CredentialSection isInvalid={isInvalid} />\n                </div>\n              )}\n            </Fragment>\n          );\n        }}\n      </SettingsErrorGroup>\n    </SettingsPanel>\n  );\n}\nfunction QueueStatusPanel() {\n  const {base_url} = useSettings();\n  const {data, status} = useQueueStats();\n\n  const workerIsRunning = status !== 'pending' && data?.status === 'running';\n\n  return (\n    <SettingsPanel\n      title={<Trans message=\"Queue Status\" />}\n      description={\n        <Trans message=\"Monitor the current status of your queue and access the queue dashboard.\" />\n      }\n    >\n      <div className=\"flex items-center gap-14\">\n        {workerIsRunning ? (\n          <Fragment>\n            <div className=\"min-w-108 flex w-max items-center gap-8 rounded-button bg-positive-lighter px-10 py-4 text-sm capitalize\">\n              <div className=\"h-10 w-10 rounded-full bg-positive\" />\n              <Trans message=\"Worker is running\" />\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"xs\"\n              elementType=\"a\"\n              href={`${base_url}/horizon`}\n              target=\"_blank\"\n              endIcon={<OpenInNewIcon />}\n            >\n              <Trans message=\"Monitor\" />\n            </Button>\n          </Fragment>\n        ) : (\n          <WorkerInactiveWarning />\n        )}\n      </div>\n    </SettingsPanel>\n  );\n}\n\nfunction WorkerInactiveWarning() {\n  return (\n    <SectionHelper\n      leadingIcon={<ErrorIcon size=\"xs\" className=\"text-danger\" />}\n      title={<Trans message=\"Queue worker is inactive\" />}\n      description={\n        <Trans message=\"The queue worker is not running. Please start the worker or set queue driver to 'none', otherwise some features will not work properly.\" />\n      }\n      color=\"danger\"\n    />\n  );\n}\n\ninterface CredentialProps {\n  isInvalid: boolean;\n}\nfunction SqsCredentials({isInvalid}: CredentialProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name=\"server.aws_access_key_id\"\n        label={<Trans message=\"SQS queue key\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name=\"server.aws_secret_access_key\"\n        label={<Trans message=\"SQS queue secret\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name=\"server.sqs_prefix\"\n        label={<Trans message=\"SQS queue prefix\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        className=\"mb-20\"\n        name=\"server.sqs_queue\"\n        label={<Trans message=\"SQS queue name\" />}\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        invalid={isInvalid}\n        name=\"server.aws_default_region\"\n        label={<Trans message=\"SQS queue region\" />}\n        required\n      />\n    </Fragment>\n  );\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {UpdateEventMessage} from '@common/admin/settings/pages/system-settings/update-page/update-event-message';\nimport {\n  UpdaterContext,\n  UpdaterContextProvider,\n} from '@common/admin/settings/pages/system-settings/update-page/updater-context-provider';\nimport {\n  UpdateStep,\n  UpdateStepStatus,\n} from '@common/admin/settings/pages/system-settings/update-page/updater-types';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {DatatablePageHeaderBar} from '@common/datatable/page/datatable-page-with-header-layout';\nimport {Button} from '@ui/buttons/button';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {Trans} from '@ui/i18n/trans';\nimport {BrowserUpdatedIcon} from '@ui/icons/material/BrowserUpdated';\nimport {OpenInNewIcon} from '@ui/icons/material/OpenInNew';\nimport {BlockerDialog} from '@ui/overlays/dialog/blocker-dialog';\nimport {ucFirst} from '@ui/utils/string/uc-first';\nimport {ReactElement, ReactNode, use} from 'react';\nimport {Link} from 'react-router';\n\ntype Props = {\n  tabs: ReactElement;\n  title: ReactElement<MessageDescriptor>;\n  rightContent?: ReactNode;\n};\nexport function UpdatePage(props: Props) {\n  return (\n    <UpdaterContextProvider>\n      <Content {...props} />\n    </UpdaterContextProvider>\n  );\n}\n\nfunction Content({tabs, title, rightContent}: Props) {\n  const {updateStarted} = use(UpdaterContext);\n\n  const content = updateStarted ? <ActiveUpdatePanel /> : <WelcomePanel />;\n\n  return (\n    <div className=\"dashboard-grid-content dashboard-rounded-panel flex h-full flex-col\">\n      <DatatablePageHeaderBar\n        title={title}\n        showSidebarToggleButton\n        border=\"border-none\"\n        rightContent={rightContent}\n      />\n      {tabs}\n      <div className=\"overflow-y-auto\">\n        <div className=\"mx-auto p-12 @container/settings-form md:p-24 lg:max-w-[1440px]\">\n          {content}\n        </div>\n      </div>\n    </div>\n  );\n}\n\ntype UpdatePanelProps = {\n  children: ReactNode;\n};\nfunction UpdatePanel({children}: UpdatePanelProps) {\n  const {data} = useAdminSettings();\n  const alreadyOnLatestVersion = !data?.update_available;\n  return (\n    <div className=\"rounded-panel border p-24 shadow-sm\">\n      <div className=\"text-center\">\n        <BrowserUpdatedIcon size=\"lg\" />\n        <h1 className=\"mb-4 mt-12 text-xl font-semibold\">\n          {alreadyOnLatestVersion ? (\n            <Trans message=\"You already have the latest version installed\" />\n          ) : (\n            <Trans message=\"System update\" />\n          )}\n        </h1>\n        <p className=\"text-muted\">\n          <Trans message=\"Update your system to the latest version. This will download and install updates automatically, please do not close this page while update is in progress.\" />\n        </p>\n      </div>\n      <div className=\"mt-24\">{children}</div>\n    </div>\n  );\n}\n\nfunction WelcomePanel() {\n  const {updateAppAndModules} = use(UpdaterContext);\n  const {data} = useAdminSettings();\n  const alreadyOnLatestVersion = !data?.update_available;\n  return (\n    <UpdatePanel>\n      <div className=\"w-full text-center\">\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          onClick={async () => {\n            const success = await updateAppAndModules();\n            if (success) {\n              setTimeout(() => {\n                window.location.href = '/admin/settings';\n              }, 1000);\n            }\n          }}\n        >\n          {alreadyOnLatestVersion ? (\n            <Trans\n              message=\"Re-install version :version\"\n              values={{version: data?.server?.app_version}}\n            />\n          ) : (\n            <Trans message=\"Start Update\" />\n          )}\n        </Button>\n      </div>\n    </UpdatePanel>\n  );\n}\n\nfunction ActiveUpdatePanel() {\n  const {\n    events,\n    updateInProgress,\n    updateAppAndModules,\n    moduleNames,\n    activeModuleName,\n  } = use(UpdaterContext);\n  const lastEvent = events.at(-1);\n\n  return (\n    <div>\n      <BlockerDialog shouldBlock={updateInProgress} />\n      <UpdatePanel>\n        <div className=\"border-t border-t-divider-lighter pt-24\">\n          {moduleNames?.length && activeModuleName ? (\n            <div className=\"mb-20 font-semibold\">\n              <Trans message=\"Updating\" />:{' '}\n              <ModuleDisplayName name={activeModuleName} />\n            </div>\n          ) : null}\n          <div className=\"space-y-18\">\n            {events.map((event, index) => (\n              <UpdateEventMessage event={event} key={index} />\n            ))}\n          </div>\n          {lastEvent?.context?.error ? (\n            <div className=\"mt-24 flex items-center gap-12\">\n              <Button\n                variant=\"flat\"\n                color=\"primary\"\n                onClick={() => updateAppAndModules()}\n              >\n                <Trans message=\"Retry\" />\n              </Button>\n              <Button\n                variant=\"outline\"\n                color=\"primary\"\n                href={AdminDocsUrls.manualUpdate}\n                target=\"_blank\"\n                endIcon={<OpenInNewIcon />}\n              >\n                <Trans message=\"Update manually\" />\n              </Button>\n            </div>\n          ) : null}\n          {lastEvent?.step === UpdateStep.Finalizing &&\n          lastEvent?.status === UpdateStepStatus.Completed ? (\n            <div className=\"mt-24\">\n              <div className=\"mb-12 text-muted\">\n                <Trans message=\"Update completed successfully! Reloading the page...\" />\n              </div>\n              <Button\n                variant=\"flat\"\n                color=\"primary\"\n                elementType={Link}\n                to=\"/admin\"\n              >\n                <Trans message=\"Return to admin area\" />\n              </Button>\n            </div>\n          ) : null}\n        </div>\n      </UpdatePanel>\n    </div>\n  );\n}\n\ntype ModuleDisplayNameProps = {\n  name: string;\n};\nfunction ModuleDisplayName({name}: ModuleDisplayNameProps) {\n  const {data} = useAdminSettings();\n  if (name === 'app') {\n    return <Trans message=\"Application\" />;\n  }\n  return <span>{data.modules?.[name]?.label ?? ucFirst(name)}</span>;\n}\n","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {SettingsErrorGroup} from '@common/admin/settings/layout/settings-error-group';\nimport {AdminSettingsLayout} from '@common/admin/settings/layout/settings-layout';\nimport {DocsLink} from '@common/admin/settings/layout/settings-links';\nimport {SettingsPanel} from '@common/admin/settings/layout/settings-panel';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {FormSelect, Option} from '@ui/forms/select/select';\nimport {MessageDescriptor} from '@ui/i18n/message-descriptor';\nimport {Trans} from '@ui/i18n/trans';\nimport {ComponentType, Fragment, ReactElement} from 'react';\nimport {useForm, useFormContext, useWatch} from 'react-hook-form';\nimport {AdminSettings} from '../../admin-settings';\n\ntype Props = {\n  tabs: ReactElement;\n  title: ReactElement<MessageDescriptor>;\n};\nexport function WebsocketSettings({tabs, title}: Props) {\n  const {data} = useAdminSettings();\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      server: {\n        broadcast_connection: data.server.broadcast_connection ?? 'null',\n\n        // pusher\n        pusher_app_id: data.server.pusher_app_id ?? '',\n        pusher_app_key: data.server.pusher_app_key ?? '',\n        pusher_app_secret: data.server.pusher_app_secret ?? '',\n        pusher_app_cluster: data.server.pusher_app_cluster ?? '',\n\n        // reverb\n        reverb_app_id: data.server.reverb_app_id ?? '',\n        reverb_app_key: data.server.reverb_app_key ?? '',\n        reverb_app_secret: data.server.reverb_app_secret ?? '',\n        reverb_host: data.server.reverb_host ?? '',\n        reverb_port: data.server.reverb_port ?? '',\n        reverb_scheme: data.server.reverb_scheme ?? 'https',\n\n        // ably\n        ably_key: data.server.ably_key ?? '',\n      },\n    },\n  });\n  return (\n    <AdminSettingsLayout form={form} title={title} tabs={tabs}>\n      <DriverSection />\n    </AdminSettingsLayout>\n  );\n}\n\nfunction DriverSection() {\n  const {clearErrors, control} = useFormContext<AdminSettings>();\n  const driver = useWatch({\n    control,\n    name: 'server.broadcast_connection',\n  });\n\n  let CredentialSection: ComponentType<CredentialsProps> | null = null;\n  if (driver === 'pusher') {\n    CredentialSection = PusherFields;\n  } else if (driver === 'ably') {\n    CredentialSection = AblyFields;\n  } else if (driver === 'reverb') {\n    CredentialSection = ReverbFields;\n  }\n  return (\n    <SettingsPanel\n      className=\"mb-24\"\n      title={<Trans message=\"Websockets Provider\" />}\n      description={\n        <Trans message=\"Configure websockets provider responsible for all realtime functionality on the site.\" />\n      }\n      link={\n        AdminDocsUrls.settings.websockets ? (\n          <DocsLink link={AdminDocsUrls.settings.websockets}>\n            <Trans message=\"What are websockets?\" />\n          </DocsLink>\n        ) : null\n      }\n    >\n      <SettingsErrorGroup\n        separatorTop={false}\n        separatorBottom={false}\n        name=\"websockets_group\"\n      >\n        {isInvalid => (\n          <Fragment>\n            <FormSelect\n              size=\"sm\"\n              invalid={isInvalid}\n              onSelectionChange={() => clearErrors()}\n              selectionMode=\"single\"\n              name=\"server.broadcast_connection\"\n              required\n            >\n              <Option value=\"null\">\n                <Trans message=\"None (Disabled)\" />\n              </Option>\n              <Option value=\"reverb\">Local (Laravel Reverb)</Option>\n              <Option value=\"pusher\">Pusher</Option>\n              <Option value=\"ably\">\n                <Trans message=\"Ably\" />\n              </Option>\n            </FormSelect>\n            {CredentialSection && (\n              <div className=\"mt-30\">\n                <CredentialSection isInvalid={isInvalid} />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </SettingsErrorGroup>\n    </SettingsPanel>\n  );\n}\n\ninterface CredentialsProps {\n  isInvalid: boolean;\n}\nfunction PusherFields({isInvalid}: CredentialsProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        size=\"sm\"\n        name=\"server.pusher_app_id\"\n        label={<Trans message=\"Pusher app ID\" />}\n        className=\"mb-20\"\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        name=\"server.pusher_app_key\"\n        label={<Trans message=\"Pusher app key\" />}\n        className=\"mb-20\"\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        name=\"server.pusher_app_secret\"\n        label={<Trans message=\"Pusher app secret\" />}\n        className=\"mb-20\"\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        name=\"server.pusher_app_cluster\"\n        label={<Trans message=\"Pusher app cluster\" />}\n        className=\"mb-20\"\n        placeholder=\"mt1\"\n        required\n      />\n    </Fragment>\n  );\n}\n\nfunction AblyFields({isInvalid}: CredentialsProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        size=\"sm\"\n        name=\"server.ably_key\"\n        label={<Trans message=\"Ably API key\" />}\n        className=\"mb-20\"\n        required\n      />\n    </Fragment>\n  );\n}\n\nfunction ReverbFields({isInvalid}: CredentialsProps) {\n  return (\n    <Fragment>\n      <FormTextField\n        size=\"sm\"\n        name=\"server.reverb_host\"\n        label={<Trans message=\"Reverb host\" />}\n        className=\"mb-20\"\n        required\n      />\n      <FormTextField\n        size=\"sm\"\n        name=\"server.reverb_port\"\n        label={<Trans message=\"Reverb port\" />}\n        className=\"mb-20\"\n        required\n      />\n      <FormSelect\n        size=\"sm\"\n        name=\"server.reverb_scheme\"\n        label={<Trans message=\"Reverb scheme\" />}\n        className=\"mb-20\"\n        required\n      >\n        <Option value=\"http\">HTTP</Option>\n        <Option value=\"https\">HTTPS</Option>\n      </FormSelect>\n    </Fragment>\n  );\n}\n","import {CacheSettings} from '@common/admin/settings/pages/system-settings/cache-settings';\nimport {LicensePage} from '@common/admin/settings/pages/system-settings/license-page';\nimport {LoggingSettings} from '@common/admin/settings/pages/system-settings/logging-settings';\nimport {QueueSettings} from '@common/admin/settings/pages/system-settings/queue-settings';\nimport {UpdatePage} from '@common/admin/settings/pages/system-settings/update-page/update-page';\nimport {WebsocketSettings} from '@common/admin/settings/pages/system-settings/websocket-settings';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {Chip} from '@ui/forms/input-field/chip-field/chip';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {Tab} from '@ui/tabs/tab';\nimport {TabList} from '@ui/tabs/tab-list';\nimport {Tabs} from '@ui/tabs/tabs';\nimport {Fragment, ReactElement, useMemo} from 'react';\nimport {useSearchParams} from 'react-router';\n\nconst allTabs = [\n  {\n    name: 'license',\n    label: message('License'),\n  },\n  {\n    name: 'updates',\n    label: message('Updates'),\n  },\n  {\n    name: 'cache',\n    label: message('Cache'),\n  },\n  {\n    name: 'queue',\n    label: message('Queue'),\n  },\n  {\n    name: 'logging',\n    label: message('Logging'),\n  },\n  {\n    name: 'websockets',\n    label: message('Websockets'),\n  },\n] as const;\n\ntype TabName = (typeof allTabs)[number]['name'];\n\nexport function Component() {\n  const {websockets} = useSettings();\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const filteredTabs = useMemo(\n    () =>\n      allTabs.filter(\n        tab => tab.name !== 'websockets' || websockets?.integrated,\n      ),\n    [websockets],\n  );\n\n  const tabName = (searchParams.get('tab') ?? 'license') as TabName;\n  const tabIndex = filteredTabs.findIndex(tab => tab.name === tabName) ?? 0;\n\n  return (\n    <Fragment>\n      <TabContent\n        tabName={tabName}\n        tabs={\n          <Tabs\n            selectedTab={tabIndex}\n            onTabChange={tabIndex => {\n              const tab = filteredTabs[tabIndex];\n              setSearchParams({tab: tab.name}, {replace: true});\n            }}\n          >\n            <TabList className=\"mx-24\">\n              {filteredTabs.map(tab => (\n                <Tab key={tab.name}>\n                  <Trans {...tab.label} />\n                </Tab>\n              ))}\n            </TabList>\n          </Tabs>\n        }\n      />\n    </Fragment>\n  );\n}\n\ninterface TabContentProps {\n  tabName: TabName;\n  tabs: ReactElement;\n}\nfunction TabContent({tabName, tabs}: TabContentProps) {\n  const {data} = useAdminSettings();\n  const title = <Trans message=\"System\" />;\n  const rightContent = (\n    <Chip size=\"sm\" fontWeight=\"font-semibold\">\n      {data.server.app_version}\n    </Chip>\n  );\n  switch (tabName) {\n    case 'cache':\n      return <CacheSettings tabs={tabs} title={title} />;\n    case 'queue':\n      return <QueueSettings tabs={tabs} title={title} />;\n    case 'logging':\n      return <LoggingSettings tabs={tabs} title={title} />;\n    case 'websockets':\n      return <WebsocketSettings tabs={tabs} title={title} />;\n    case 'license':\n      return (\n        <LicensePage tabs={tabs} title={title} rightContent={rightContent} />\n      );\n    case 'updates':\n      return (\n        <UpdatePage tabs={tabs} title={title} rightContent={rightContent} />\n      );\n  }\n}\n"],"names":["CacheSettings","tabs","title","data","useAdminSettings","form","useForm","jsxs","AdminSettingsLayout","jsx","CacheProviderPanel","ClearCachePanel","SettingsPanel","Trans","AdminDocsUrls","DocsLink","CacheSelect","SectionHelper","clearCache","useClearCache","Button","watch","clearErrors","useFormContext","cacheStore","CredentialSection","MemcachedCredentials","SettingsErrorGroup","isInvalid","Fragment","FormSelect","Option","FormTextField","useMutation","apiClient","r","toast","message","err","showHttpErrorToast","UpdateStep","UpdateStepMessage","UpdateStepStatus","CheckCircleFilledIcon","createSvgIcon","UpdateEventMessage","event","clsx","EventStatusIndicator","_a","ProgressCircle","_b","WarningIcon","makeStreamedFetchRequest","url","payload","signal","headers","getApiClientGlobalHeaders","getBootstrapData","ParseError","options","noop","_arg","createParser","callbacks","onEvent","onError","onRetry","onComment","incompleteLine","isFirstChunk","id","eventType","feed","newChunk","chunk","complete","incomplete","splitLines","line","parseLine","dispatchEvent","fieldSeparatorIndex","field","offset","value","processField","reset","lines","searchIndex","crIndex","lfIndex","lineEnd","EventSourceParserStream","parser","controller","error","DEFAULT_ERROR","groupedSteps","internalEvents","anyStepFailed","e","UpdaterContext","createContext","UpdaterContextProvider","children","adminSettings","moduleNames","module","name","updateStarted","setUpdateStarted","useState","updateInProgress","setUpdateInProgress","events","setEvents","activeModuleName","setActiveModuleName","updateOrInstallModule","moduleName","success","runUpdate","flushSync","updateAppAndModules","names","steps","runUpdateStep","abortController","response","throwAxiosError","responseToIterator","finalizeInternalEvents","reader","done","forceError","i","LicensePage","rightContent","DatatablePageHeaderBar","LicensePanel","ModulePanels","trans","useTrans","activatedPurchaseCode","setActivatedPurchaseCode","isPending","setIsPending","handleSubmit","values","code","registerPurchaseCode","Form","Chip","key","ModulePanel","config","envatoItemId","use","installed","setInstalled","handleModuleInstall","OpenInNewIcon","BlockerDialog","ModuleInstallProgress","className","lastEvent","index","itemId","onFormQueryError","LoggingSettings","SentryPanel","parts","ExternalLink","useQueueStats","site","useSettings","useQuery","fetchStats","QueueSettings","selectedDriver","QueueMethodPanel","QueueStatusPanel","queueDriver","SqsCredentials","base_url","status","workerIsRunning","WorkerInactiveWarning","ErrorIcon","UpdatePage","props","Content","content","ActiveUpdatePanel","WelcomePanel","UpdatePanel","alreadyOnLatestVersion","BrowserUpdatedIcon","ModuleDisplayName","Link","ucFirst","WebsocketSettings","DriverSection","control","driver","useWatch","PusherFields","AblyFields","ReverbFields","allTabs","Component","websockets","searchParams","setSearchParams","useSearchParams","filteredTabs","useMemo","tab","tabName","tabIndex","TabContent","Tabs","TabList","Tab"],"mappings":"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","x_google_ignoreList":[5,6]}