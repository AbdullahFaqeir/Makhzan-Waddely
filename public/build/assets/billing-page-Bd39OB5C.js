import{j as e,r as o,T as t,B as d,L as c,ay as p,e as f,A as y,y as u,z as j,g as N,aF as w}from"./main-owSUWNVS.js";import{u as l}from"./use-billing-user-DbYEkCss.js";import{F as x}from"./formatted-date-dVjFR1LG.js";import{B as m}from"./billing-plan-panel-DS3Aen73.js";import{F as h,a as b}from"./formatted-price-BZx2tBTa.js";import{S as v}from"./section-helper-nxxDgZEf.js";import{C as P}from"./CalendarToday-l2VPsvNm.js";import{b as C}from"./billing-queries-F2MY7m0o.js";import{O as _}from"./OpenInNew-CfDYDCt9.js";import{S as i}from"./skeleton-xT-yudp1.js";import{E as g}from"./Edit-D8nu-GLe.js";import"./use-date-formatter-BiXQj-wq.js";function z(){const{subscription:s}=l();if(!(s!=null&&s.price)||!(s!=null&&s.product))return null;const n=e.jsx(x,{preset:"long",date:s.renews_at});return e.jsxs(o.Fragment,{children:[s.past_due?e.jsx(F,{}):null,e.jsx(m,{title:e.jsx(t,{message:"Current plan"}),children:e.jsxs("div",{className:"mt-24 flex justify-between gap-20",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-xl font-bold",children:s.product.name}),e.jsx(h,{className:"mb-2 text-xl",price:s.price}),e.jsx("div",{className:"text-base",children:e.jsx(t,{message:"Your plan renews on :date",values:{date:n}})})]}),e.jsxs("div",{className:"w-[233px]",children:[e.jsx(d,{variant:"flat",color:"primary",size:"md",className:"mb-12 w-full",elementType:c,to:"/billing/change-plan",disabled:s.gateway_name==="none",children:e.jsx(t,{message:"Change plan"})}),e.jsx(d,{variant:"outline",color:"danger",size:"md",className:"w-full",elementType:c,to:"/billing/cancel",children:e.jsx(t,{message:"Cancel plan"})})]})]})})]})}function F(){return e.jsx(v,{className:"mb-24",color:"danger",title:"Payment is past due",description:"Your recent recurring payment has failed with the payment method we have on file. Please update your payment method to avoid any service interruptions."})}function k(){const{subscription:s}=l();if(!(s!=null&&s.price)||!(s!=null&&s.product))return null;const n=e.jsx("span",{className:"whitespace-nowrap",children:e.jsx(x,{preset:"long",date:s.ends_at})});return e.jsx(m,{title:e.jsx(t,{message:"Current plan"}),children:e.jsxs("div",{className:"mt-24 flex flex-col justify-between gap-20",children:[e.jsxs("div",{children:[e.jsx(p,{className:"mb-10 w-min",size:"xs",radius:"rounded",color:"danger",children:e.jsx(t,{message:"Canceled"})}),e.jsx("div",{className:"mb-2 text-xl font-bold",children:s.product.name}),e.jsx(h,{className:"mb-8 text-xl",price:s.price}),e.jsxs("div",{className:"flex items-center gap-8 text-base",children:[e.jsx(P,{size:"sm",className:"text-muted"}),e.jsx("div",{className:"flex-auto",children:e.jsx(t,{message:"Your plan will be canceled on :date",values:{date:n}})})]})]}),e.jsx("div",{className:"w-[233px]",children:e.jsx(d,{variant:"flat",color:"primary",size:"md",className:"mb-12 w-full",elementType:c,to:"/billing/renew",children:e.jsx(t,{message:"Renew plan"})})})]})})}function S(){var r;const{user:s}=l(),n=f(C.invoices.index(s==null?void 0:s.id));if(!s)return null;const a=(r=n.data)==null?void 0:r.invoices;return e.jsx(m,{title:e.jsx(t,{message:"Payment history"}),children:e.jsx("div",{className:"max-w-[464px]",children:e.jsx(y,{initial:!1,mode:"wait",children:n.isLoading?e.jsx(B,{},"loading-skeleton"):e.jsx(I,{invoices:a},"invoices")})})})}function I({invoices:s}){const{base_url:n}=N();return e.jsxs(u.div,{...j,children:[s!=null&&s.length?void 0:e.jsx("div",{className:"italic text-muted",children:e.jsx(t,{message:"No invoices yet"})}),s==null?void 0:s.map(a=>{var r;return e.jsxs("div",{className:"mb-14 flex items-center justify-between gap-10 whitespace-nowrap text-base",children:[e.jsxs("a",{href:`${n}/billing/invoices/${a.uuid}`,target:"_blank",className:"flex items-center gap-8 hover:underline",rel:"noreferrer",children:[e.jsx(x,{date:a.created_at}),e.jsx(_,{size:"xs"})]}),a.subscription.price&&e.jsx("div",{children:e.jsx(b,{value:a.subscription.price.amount,currency:a.subscription.price.currency})}),e.jsx(p,{size:"xs",color:a.paid?"positive":"danger",radius:"rounded",children:a.paid?e.jsx(t,{message:"Paid"}):e.jsx(t,{message:"Unpaid"})}),e.jsx("div",{children:(r=a.subscription.product)==null?void 0:r.name})]},a.id)})]})}function B(){return e.jsxs(u.div,{...j,children:[e.jsx(i,{className:"mb-14"}),e.jsx(i,{className:"mb-14"}),e.jsx(i,{className:"mb-14"}),e.jsx(i,{className:"mb-14"}),e.jsx(i,{})]})}const L=""+new URL("paypal-B29zazWi.svg",import.meta.url).href;function T(){const{user:s,subscription:n}=l();if(!s||!n)return null;const r=n.gateway_name==="paypal"?M:E;return e.jsx(m,{title:e.jsx(t,{message:"Payment method"}),children:e.jsx(r,{methodClassName:"whitespace-nowrap text-base max-w-[464px] flex items-center gap-10",linkClassName:"flex items-center gap-4 text-muted mt-18 block hover:underline"})})}function E({methodClassName:s,linkClassName:n}){const{user:a}=l();return a?e.jsxs(o.Fragment,{children:[e.jsxs("div",{className:s,children:[e.jsx("span",{className:"capitalize",children:a.card_brand})," ••••",a.card_last_four,a.card_expires&&e.jsx("div",{className:"ml-auto",children:e.jsx(t,{message:"Expires :date",values:{date:a.card_expires}})})]}),e.jsxs(c,{className:n,to:"/billing/change-payment-method",children:[e.jsx(g,{size:"sm"}),e.jsx(t,{message:"Change payment method"})]})]}):null}function M({methodClassName:s,linkClassName:n}){const{subscription:a}=l();return e.jsxs(o.Fragment,{children:[e.jsx("div",{className:s,children:e.jsx(w,{src:L})}),e.jsxs("a",{className:n,href:`https://www.sandbox.paypal.com/myaccount/autopay/connect/${a==null?void 0:a.gateway_id}/funding`,target:"_blank",rel:"noreferrer",children:[e.jsx(g,{size:"sm"}),e.jsx(t,{message:"Change payment method"})]})]})}function J(){const{subscription:s}=l();if(!(s!=null&&s.price)||!(s!=null&&s.product))return null;const n=s.ends_at?e.jsx(k,{}):e.jsx(z,{});return e.jsxs("div",{children:[n,e.jsx(T,{}),e.jsx(S,{})]})}export{J as Component};
//# sourceMappingURL=billing-page-Bd39OB5C.js.map
