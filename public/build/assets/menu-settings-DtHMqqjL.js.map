{"version":3,"file":"menu-settings-DtHMqqjL.js","sources":["../../../common/foundation/resources/client/admin/settings/pages/menu-settings/dropdown-menu.svg","../../../common/foundation/resources/client/admin/settings/pages/menu-settings/menu-settings.tsx"],"sourcesContent":["export default \"__VITE_ASSET__DSjgVQGK__\"","import {AdminDocsUrls} from '@app/admin/admin-config';\nimport {commonAdminQueries} from '@common/admin/common-admin-queries';\nimport {MenuItemForm} from '@common/admin/menus/menu-item-form';\nimport {AdminSettings} from '@common/admin/settings/admin-settings';\nimport {useSettingsPageStore} from '@common/admin/settings/layout/settings-page-store';\nimport {SettingsSectionButton} from '@common/admin/settings/layout/settings-section-button';\nimport {SettingsWithPreview} from '@common/admin/settings/layout/settings-with-preview';\nimport {AddMenuItemDialog} from '@common/admin/settings/pages/menu-settings/add-menu-item-dialog';\nimport dropdownMenu from '@common/admin/settings/pages/menu-settings/dropdown-menu.svg';\nimport {useAdminSettings} from '@common/admin/settings/requests/use-admin-settings';\nimport {MenuItemConfig} from '@common/menus/menu-config';\nimport {useSuspenseQuery} from '@tanstack/react-query';\nimport {Accordion, AccordionItem} from '@ui/accordion/accordion';\nimport {Button} from '@ui/buttons/button';\nimport {FormChipField} from '@ui/forms/input-field/chip-field/form-chip-field';\nimport {FormTextField} from '@ui/forms/input-field/text-field/text-field';\nimport {Item} from '@ui/forms/listbox/item';\nimport {message} from '@ui/i18n/message';\nimport {Trans} from '@ui/i18n/trans';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {createSvgIconFromTree} from '@ui/icons/create-svg-icon';\nimport {AddIcon} from '@ui/icons/material/Add';\nimport {ArrowRightIcon} from '@ui/icons/material/ArrowRight';\nimport {DeleteIcon} from '@ui/icons/material/Delete';\nimport {DragIndicatorIcon} from '@ui/icons/material/DragIndicator';\nimport {IllustratedMessage} from '@ui/images/illustrated-message';\nimport {SvgImage} from '@ui/images/svg-image';\nimport {\n  useSortable,\n  UseSortableProps,\n} from '@ui/interactions/dnd/sortable/use-sortable';\nimport {ConfirmationDialog} from '@ui/overlays/dialog/confirmation-dialog';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {DialogHeader} from '@ui/overlays/dialog/dialog-header';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {moveItemInNewArray} from '@ui/utils/array/move-item-in-new-array';\nimport {nanoid} from 'nanoid';\nimport {Fragment, useCallback, useRef, useState} from 'react';\nimport {\n  FieldArrayWithId,\n  useFieldArray,\n  useForm,\n  useFormContext,\n  useWatch,\n} from 'react-hook-form';\n\nexport function Component() {\n  const {trans} = useTrans();\n  const {data} = useAdminSettings();\n\n  const form = useForm<AdminSettings>({\n    defaultValues: {\n      client: {\n        menus: data?.client.menus ?? [],\n      },\n    },\n  });\n\n  return (\n    <SettingsWithPreview\n      title={<Trans message=\"Menus\" />}\n      defaultRoute=\"/\"\n      docsLink={AdminDocsUrls.settings.menus}\n    >\n      <SettingsWithPreview.Content>\n        <SettingsWithPreview.Form form={form}>\n          <div className=\"mb-12\">\n            <Button\n              variant=\"outline\"\n              color=\"primary\"\n              startIcon={<AddIcon />}\n              size=\"xs\"\n              onClick={() => {\n                const id = nanoid(10);\n\n                form.setValue(\n                  'client.menus',\n                  [\n                    ...form.getValues('client.menus'),\n                    {\n                      name: trans(\n                        message('New menu :number', {\n                          values: {\n                            number: form.getValues('client.menus').length + 1,\n                          },\n                        }),\n                      ),\n                      id,\n                      positions: [],\n                      items: [],\n                    },\n                  ],\n                  {shouldDirty: true},\n                );\n              }}\n            >\n              <Trans message=\"Add new menu\" />\n            </Button>\n          </div>\n          <MenuList />\n        </SettingsWithPreview.Form>\n      </SettingsWithPreview.Content>\n      <SettingsWithPreview.Preview />\n    </SettingsWithPreview>\n  );\n}\n\nfunction useSyncPreviewRouteWithActiveMenu() {\n  const form = useFormContext<AdminSettings>();\n  const setPreviewRoute = useSettingsPageStore(s => s.setPreviewRoute);\n  const {\n    data: {config},\n  } = useSuspenseQuery(commonAdminQueries.settings.menuEditorConfig());\n\n  return useCallback((menuId: string | number | null) => {\n    const menu = form.getValues('client.menus').find(m => m.id === menuId);\n    if (menu) {\n      menu.positions.forEach(positionName => {\n        const position = config.positions.find(r => r.name === positionName);\n        if (position) {\n          setPreviewRoute(position.route);\n        }\n      });\n    } else {\n      setPreviewRoute('/');\n    }\n  }, []);\n}\n\nfunction MenuList() {\n  const syncPreviewRouteWithActiveMenu = useSyncPreviewRouteWithActiveMenu();\n\n  const form = useFormContext<AdminSettings>();\n  const {fields} = useFieldArray({\n    control: form.control,\n    name: 'client.menus',\n    keyName: 'key',\n  });\n\n  return (\n    <Accordion\n      variant=\"outline\"\n      size=\"lg\"\n      onExpandedChange={([menuId]) => {\n        syncPreviewRouteWithActiveMenu(menuId);\n      }}\n    >\n      {fields.map((menu, index) => (\n        <AccordionItem key={menu.key} label={menu.name} value={menu.id}>\n          <MenuEditor id={menu.id} index={index} />\n        </AccordionItem>\n      ))}\n    </Accordion>\n  );\n}\n\ninterface MenuEditorProps {\n  id: string;\n  index: number;\n}\nfunction MenuEditor({id, index}: MenuEditorProps) {\n  const syncPreviewRouteWithActiveMenu = useSyncPreviewRouteWithActiveMenu();\n  const {data} = useSuspenseQuery(\n    commonAdminQueries.settings.menuEditorConfig(),\n  );\n  const menuFormPath = `client.menus.${index}` as const;\n\n  return (\n    <Fragment>\n      <div className=\"mb-30 border-b pb-30\">\n        <FormTextField\n          name={`${menuFormPath}.name`}\n          label={<Trans message=\"Name\" />}\n          className=\"mb-20\"\n          autoFocus\n        />\n        <FormChipField\n          chipSize=\"sm\"\n          name={`${menuFormPath}.positions`}\n          valueKey=\"id\"\n          label={<Trans message=\"Where should this menu appear on the site?\" />}\n          onChange={() => {\n            syncPreviewRouteWithActiveMenu(id);\n          }}\n        >\n          {data.config.positions.map(position => (\n            <Item key={position.name} value={position.name}>\n              {position.label}\n            </Item>\n          ))}\n        </FormChipField>\n      </div>\n      <MenuItemsManager formPath={`${menuFormPath}.items`} />\n      <div className=\"mt-24 text-right\">\n        <DeleteMenuTrigger menuId={id} />\n      </div>\n    </Fragment>\n  );\n}\n\ninterface MenuItemsManagerProps {\n  formPath: string;\n}\nexport function MenuItemsManager({formPath}: MenuItemsManagerProps) {\n  const typedFormPath = formPath as `client.menus.${number}.items`;\n  const form = useFormContext<AdminSettings>();\n  const items =\n    useWatch({\n      control: form.control,\n      name: formPath as `client.menus.${number}.items`,\n    }) ?? [];\n\n  const [selectedItemIndex, setSelectedItemIndex] = useState<number | null>(\n    null,\n  );\n\n  return (\n    <Fragment>\n      <div className=\"flex flex-shrink-0 items-center justify-between gap-16\">\n        <Trans message=\"Menu items\" />\n        <DialogTrigger\n          type=\"drawer\"\n          placement=\"right\"\n          onClose={(menuItemConfig?: MenuItemConfig) => {\n            if (menuItemConfig) {\n              form.setValue(typedFormPath, [...items, menuItemConfig], {\n                shouldDirty: true,\n              });\n            }\n          }}\n        >\n          <Button color=\"primary\" size=\"xs\" startIcon={<AddIcon />}>\n            <Trans message=\"Add\" />\n          </Button>\n          <AddMenuItemDialog />\n        </DialogTrigger>\n      </div>\n      <div className=\"mt-12 flex-shrink-0\">\n        {items.map((item, index) => (\n          <MenuListItem\n            key={item.id}\n            item={item}\n            items={items}\n            onClick={() => setSelectedItemIndex(index)}\n            onSortEnd={(oldIndex, newIndex) => {\n              form.setValue(\n                typedFormPath,\n                moveItemInNewArray(items, oldIndex, newIndex),\n                {shouldDirty: true},\n              );\n            }}\n          />\n        ))}\n        {!items.length ? (\n          <IllustratedMessage\n            size=\"xs\"\n            className=\"my-40\"\n            image={<SvgImage src={dropdownMenu} />}\n            title={<Trans message=\"No menu items yet\" />}\n            description={\n              <Trans message=\"Click “add“ button to start adding links, pages, routes and other items to this menu. \" />\n            }\n          />\n        ) : null}\n      </div>\n      <DialogTrigger\n        isOpen={selectedItemIndex !== null}\n        type=\"drawer\"\n        onClose={() => setSelectedItemIndex(null)}\n      >\n        <Dialog>\n          <DialogHeader\n            rightAdornment={\n              <Button\n                variant=\"outline\"\n                size=\"xs\"\n                onClick={() => setSelectedItemIndex(null)}\n              >\n                <Trans message=\"Save & close\" />\n              </Button>\n            }\n          >\n            <Trans message=\"Edit menu item\" />\n          </DialogHeader>\n          <DialogBody>\n            <MenuItemForm formPathPrefix={`${formPath}.${selectedItemIndex}`} />\n            <div className=\"mt-24 text-right\">\n              <DeleteMenuItemTrigger\n                itemsPath={formPath}\n                itemIndex={selectedItemIndex!}\n                onDelete={() => setSelectedItemIndex(null)}\n              />\n            </div>\n          </DialogBody>\n        </Dialog>\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface DeleteMenuTriggerProps {\n  menuId: string;\n}\nfunction DeleteMenuTrigger({menuId}: DeleteMenuTriggerProps) {\n  const form = useFormContext<AdminSettings>();\n  const name = `client.menus` as const;\n  const menus = useWatch({\n    control: form.control,\n    name,\n  });\n  const menu = menus.find(m => m.id === menuId);\n\n  if (!menu) {\n    return null;\n  }\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed) {\n          form.setValue(\n            name,\n            menus.filter(m => m.id !== menuId),\n            {\n              shouldDirty: true,\n            },\n          );\n        }\n      }}\n    >\n      <Button color=\"danger\" size=\"xs\">\n        <Trans message=\"Delete menu\" />\n      </Button>\n      <ConfirmationDialog\n        isDanger\n        title={<Trans message=\"Delete menu\" />}\n        body={\n          <Trans\n            message=\"Are you sure you want to delete “:name“?\"\n            values={{name: menu.name}}\n          />\n        }\n        confirm={<Trans message=\"Delete\" />}\n      />\n    </DialogTrigger>\n  );\n}\n\ninterface MenuListItemProps {\n  item: MenuItemConfig;\n  items: FieldArrayWithId[];\n  onSortEnd: UseSortableProps['onSortEnd'];\n  onClick: () => void;\n}\nfunction MenuListItem({item, items, onSortEnd, onClick}: MenuListItemProps) {\n  const ref = useRef<HTMLButtonElement>(null);\n  const {sortableProps, dragHandleRef} = useSortable({\n    item,\n    items,\n    type: 'menuEditorSortable',\n    ref,\n    onSortEnd,\n    strategy: 'liveSort',\n  });\n\n  const Icon = item.icon && createSvgIconFromTree(item.icon);\n  const iconOnlyLabel = (\n    <div className=\"flex items-center gap-4 text-xs text-muted\">\n      {Icon && <Icon size=\"sm\" />}\n      (<Trans message=\"No label...\" />)\n    </div>\n  );\n\n  return (\n    <Fragment>\n      <SettingsSectionButton\n        ref={ref}\n        {...sortableProps}\n        onClick={onClick}\n        endIcon={<ArrowRightIcon className=\"text-muted\" />}\n      >\n        <div className=\"flex items-center gap-10\">\n          <div\n            className=\"flex h-36 w-36 items-center justify-center\"\n            ref={dragHandleRef}\n          >\n            <DragIndicatorIcon\n              size=\"sm\"\n              className=\"text-muted hover:cursor-move\"\n            />\n          </div>\n          <div>{item.label || iconOnlyLabel}</div>\n        </div>\n      </SettingsSectionButton>\n    </Fragment>\n  );\n}\n\ninterface DeleteMenuItemTriggerProps {\n  itemsPath: string;\n  itemIndex: number;\n  onDelete: () => void;\n}\nfunction DeleteMenuItemTrigger({\n  itemsPath,\n  itemIndex,\n  onDelete,\n}: DeleteMenuItemTriggerProps) {\n  const {fields} = useFieldArray({\n    name: itemsPath,\n  });\n  const {setValue, getValues} = useFormContext();\n\n  const item = fields[+itemIndex] as MenuItemConfig;\n\n  if (!item) return null;\n\n  return (\n    <DialogTrigger\n      type=\"modal\"\n      onClose={isConfirmed => {\n        if (isConfirmed && itemIndex > -1) {\n          const currentItems = getValues(itemsPath) as MenuItemConfig[];\n          setValue(\n            itemsPath,\n            currentItems.filter((_, i) => i !== +itemIndex),\n            {shouldDirty: true},\n          );\n          onDelete();\n        }\n      }}\n    >\n      <Button\n        variant=\"outline\"\n        color=\"danger\"\n        size=\"xs\"\n        startIcon={<DeleteIcon />}\n      >\n        <Trans message=\"Delete this item\" />\n      </Button>\n      <ConfirmationDialog\n        isDanger\n        title={<Trans message=\"Delete item\" />}\n        body={\n          <Trans\n            message=\"Are you sure you want to delete “:name“?\"\n            values={{name: item.label}}\n          />\n        }\n        confirm={<Trans message=\"Delete\" />}\n      />\n    </DialogTrigger>\n  );\n}\n"],"names":["dropdownMenu","Component","trans","useTrans","data","useAdminSettings","form","useForm","jsxs","SettingsWithPreview","jsx","Trans","AdminDocsUrls","Button","AddIcon","id","nanoid","message","MenuList","useSyncPreviewRouteWithActiveMenu","useFormContext","setPreviewRoute","useSettingsPageStore","config","useSuspenseQuery","commonAdminQueries","useCallback","menuId","menu","m","positionName","position","r","syncPreviewRouteWithActiveMenu","fields","useFieldArray","Accordion","index","AccordionItem","MenuEditor","menuFormPath","Fragment","FormTextField","FormChipField","Item","MenuItemsManager","DeleteMenuTrigger","formPath","typedFormPath","items","useWatch","selectedItemIndex","setSelectedItemIndex","useState","DialogTrigger","menuItemConfig","AddMenuItemDialog","item","MenuListItem","oldIndex","newIndex","moveItemInNewArray","IllustratedMessage","SvgImage","Dialog","DialogHeader","DialogBody","MenuItemForm","DeleteMenuItemTrigger","name","menus","isConfirmed","ConfirmationDialog","onSortEnd","onClick","ref","useRef","sortableProps","dragHandleRef","useSortable","Icon","createSvgIconFromTree","iconOnlyLabel","SettingsSectionButton","ArrowRightIcon","DragIndicatorIcon","itemsPath","itemIndex","onDelete","setValue","getValues","currentItems","_","i","DeleteIcon"],"mappings":"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"}