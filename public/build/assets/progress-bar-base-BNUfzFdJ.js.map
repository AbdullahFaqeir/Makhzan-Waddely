{"version":3,"file":"progress-bar-base-BNUfzFdJ.js","sources":["../../../common/foundation/resources/client/ui/library/progress/progress-bar-base.tsx"],"sourcesContent":["import React, {CSSProperties, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {clamp} from '@ui/utils/number/clamp';\nimport {useNumberFormatter} from '@ui/i18n/use-number-formatter';\nimport {getInputFieldClassNames} from '@ui/forms/input-field/get-input-field-class-names';\nimport {InputSize} from '@ui/forms/input-field/input-size';\n\nexport interface ProgressBarBaseProps {\n  value?: number;\n  minValue?: number;\n  maxValue?: number;\n  className?: string;\n  showValueLabel?: boolean;\n  size?: 'xs' | 'sm' | 'md';\n  labelPosition?: 'top' | 'bottom';\n  isIndeterminate?: boolean;\n  label?: ReactNode;\n  formatOptions?: Intl.NumberFormatOptions;\n  role?: string;\n  radius?: string;\n  trackColor?: string;\n  trackHeight?: string;\n  progressColor?: string;\n}\n\nexport function ProgressBarBase(props: ProgressBarBaseProps) {\n  let {\n    value = 0,\n    minValue = 0,\n    maxValue = 100,\n    size = 'md',\n    label,\n    showValueLabel = !!label,\n    isIndeterminate = false,\n    labelPosition = 'top',\n    className,\n    role,\n    formatOptions = {\n      style: 'percent',\n    },\n    radius = 'rounded',\n    trackColor = 'bg-primary-light',\n    progressColor = 'bg-primary',\n    trackHeight = getSize(size),\n  } = props;\n\n  const id = useId();\n\n  value = clamp(value, minValue, maxValue);\n\n  const percentage = (value - minValue) / (maxValue - minValue);\n  const formatter = useNumberFormatter(formatOptions);\n\n  let valueLabel = '';\n  if (!isIndeterminate && showValueLabel) {\n    const valueToFormat =\n      formatOptions.style === 'percent' ? percentage : value;\n    valueLabel = formatter.format(valueToFormat);\n  }\n\n  const barStyle: CSSProperties = {};\n  if (!isIndeterminate) {\n    barStyle.width = `${Math.round(percentage * 100)}%`;\n  }\n\n  const style = getInputFieldClassNames({size});\n\n  const labelEl = (label || valueLabel) && (\n    <div className={clsx('my-4 flex justify-between gap-10', style.label)}>\n      {label && <span id={id}>{label}</span>}\n      {valueLabel && <div>{valueLabel}</div>}\n    </div>\n  );\n\n  return (\n    <div\n      aria-valuenow={isIndeterminate ? undefined : value}\n      aria-valuemin={minValue}\n      aria-valuemax={maxValue}\n      aria-valuetext={isIndeterminate ? undefined : (valueLabel as string)}\n      aria-labelledby={label ? id : undefined}\n      role={role || 'progressbar'}\n      className={clsx(className, 'min-w-42')}\n    >\n      {labelPosition === 'top' && labelEl}\n      <div className={`${trackHeight} ${radius} ${trackColor} overflow-hidden`}>\n        <div\n          className={clsx(\n            progressColor,\n            'fill h-full rounded-l transition-width duration-200',\n            isIndeterminate && 'progress-bar-indeterminate-animate',\n          )}\n          style={barStyle}\n        />\n      </div>\n      {labelPosition === 'bottom' && labelEl}\n    </div>\n  );\n}\n\nfunction getSize(size: InputSize) {\n  switch (size) {\n    case 'sm':\n      return 'h-6';\n    case 'xs':\n      return 'h-4';\n    default:\n      return 'h-8';\n  }\n}\n"],"names":["ProgressBarBase","props","value","minValue","maxValue","size","label","showValueLabel","isIndeterminate","labelPosition","className","role","formatOptions","radius","trackColor","progressColor","trackHeight","getSize","id","useId","clamp","percentage","formatter","useNumberFormatter","valueLabel","valueToFormat","barStyle","style","getInputFieldClassNames","labelEl","jsxs","clsx","jsx"],"mappings":"6EAyBO,SAASA,EAAgBC,EAA6B,CAC3D,GAAI,CACF,MAAAC,EAAQ,EACR,SAAAC,EAAW,EACX,SAAAC,EAAW,IACX,KAAAC,EAAO,KACP,MAAAC,EACA,eAAAC,EAAiB,CAAC,CAACD,EACnB,gBAAAE,EAAkB,GAClB,cAAAC,EAAgB,MAChB,UAAAC,EACA,KAAAC,EACA,cAAAC,EAAgB,CACd,MAAO,SAAA,EAET,OAAAC,EAAS,UACT,WAAAC,EAAa,mBACb,cAAAC,EAAgB,aAChB,YAAAC,EAAcC,EAAQZ,CAAI,CAAA,EACxBJ,EAEJ,MAAMiB,EAAKC,EAAAA,MAAA,EAEXjB,EAAQkB,EAAMlB,EAAOC,EAAUC,CAAQ,EAEvC,MAAMiB,GAAcnB,EAAQC,IAAaC,EAAWD,GAC9CmB,EAAYC,EAAmBX,CAAa,EAElD,IAAIY,EAAa,GACjB,GAAI,CAAChB,GAAmBD,EAAgB,CACtC,MAAMkB,EACJb,EAAc,QAAU,UAAYS,EAAanB,EACnDsB,EAAaF,EAAU,OAAOG,CAAa,CAC7C,CAEA,MAAMC,EAA0B,CAAA,EAC3BlB,IACHkB,EAAS,MAAQ,GAAG,KAAK,MAAML,EAAa,GAAG,CAAC,KAGlD,MAAMM,EAAQC,EAAwB,CAAC,KAAAvB,EAAK,EAEtCwB,GAAWvB,GAASkB,IACxBM,EAAAA,KAAC,MAAA,CAAI,UAAWC,EAAK,mCAAoCJ,EAAM,KAAK,EACjE,SAAA,CAAArB,GAAS0B,EAAAA,IAAC,OAAA,CAAK,GAAAd,EAAS,SAAAZ,EAAM,EAC9BkB,GAAcQ,EAAAA,IAAC,MAAA,CAAK,SAAAR,CAAA,CAAW,CAAA,EAClC,EAGF,OACEM,EAAAA,KAAC,MAAA,CACC,gBAAetB,EAAkB,OAAYN,EAC7C,gBAAeC,EACf,gBAAeC,EACf,iBAAgBI,EAAkB,OAAagB,EAC/C,kBAAiBlB,EAAQY,EAAK,OAC9B,KAAMP,GAAQ,cACd,UAAWoB,EAAKrB,EAAW,UAAU,EAEpC,SAAA,CAAAD,IAAkB,OAASoB,EAC5BG,EAAAA,IAAC,OAAI,UAAW,GAAGhB,CAAW,IAAIH,CAAM,IAAIC,CAAU,mBACpD,SAAAkB,EAAAA,IAAC,MAAA,CACC,UAAWD,EACThB,EACA,sDACAP,GAAmB,oCAAA,EAErB,MAAOkB,CAAA,CAAA,EAEX,EACCjB,IAAkB,UAAYoB,CAAA,CAAA,CAAA,CAGrC,CAEA,SAASZ,EAAQZ,EAAiB,CAChC,OAAQA,EAAA,CACN,IAAK,KACH,MAAO,MACT,IAAK,KACH,MAAO,MACT,QACE,MAAO,KAAA,CAEb"}