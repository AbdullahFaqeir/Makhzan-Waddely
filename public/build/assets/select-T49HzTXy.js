import{r as h,w as Z,cd as ee,j as e,P as se,a_ as ne,ce as te,ah as ae,ae as oe,cf as le,T as ie,cg as re,bX as ce,c as L,aa as ue,ch as de,ci as fe,cj as me,bY as he,aw as pe,S as xe}from"./main-TIUJvpaR.js";function ge({isLoading:s,icon:o,size:f}){const a=h.useRef(null),{trans:p}=Z(),[c,u]=h.useState(!1),{state:{isOpen:x,inputValue:t}}=ee(),i=h.useRef(t);return h.useEffect(()=>{s&&!c?(a.current===null&&(a.current=setTimeout(()=>{u(!0)},500)),t!==i.current&&(clearTimeout(a.current),a.current=setTimeout(()=>{u(!0)},500))):s||(u(!1),clearTimeout(a.current),a.current=null),i.current=t},[s,c,t]),c&&(x||s)?e.jsx(se,{"aria-label":p({message:"Loading"}),size:"w-24 h-24",isIndeterminate:!0}):o||e.jsx(ne,{size:f})}function be(s){const o=le(),{hideCaret:f,placeholder:a=e.jsx(ie,{message:"Select an option..."}),selectedValue:p,onItemSelected:c,onOpenChange:u,onInputValueChange:x,onSelectionChange:t,selectionMode:i="single",minWidth:g="min-w-128",children:we,searchPlaceholder:D,showEmptyMessage:M,showSearchField:d,defaultInputValue:Ce,defaultSelectedValue:Ie,inputValue:je,isLoading:j,isAsync:ve,valueClassName:k,floatingWidth:O=o?"auto":"matchTrigger",ref:P,showCheckmark:R,inputRadius:z,appearance:A,...v}=s,w=re({...s,selectionMode:i,showCheckmark:R,clearInputOnItemSelection:!0,showEmptyMessage:M||d,floatingWidth:O,role:"listbox",virtualFocus:d},P),{state:{selectedValues:C,isOpen:r,setIsOpen:E,activeIndex:S,setSelectedIndex:$,inputValue:q,setInputValue:B},collections:y,focusItem:W,listboxId:F,reference:X,refs:b,listContent:N,onInputChange:Y}=w,{fieldProps:T,inputProps:_}=ce({...v,focusRef:b.reference});let I=e.jsx("span",{className:"text-main/50",children:a});if(i==="multiple"){const n=C.map(l=>{var m;return(m=y.collection.get(l))==null?void 0:m.element.props.children}).filter(Boolean);n.length>0&&(I=e.jsx("span",{className:"flex items-center overflow-hidden overflow-ellipsis whitespace-nowrap",children:n.map((l,m)=>e.jsxs(h.Fragment,{children:[e.jsx("div",{className:"block",children:l}),m<n.length-1?e.jsx("span",{className:"mr-4 block",children:","}):null]},m))}))}else if(i==="single"){const n=y.collection.get(C[0]);n&&(I=e.jsxs("span",{className:"flex items-center gap-10",children:[n.element.props.startIcon,e.jsx("span",{className:L("overflow-hidden overflow-ellipsis whitespace-nowrap",k),children:n.element.props.children})]}))}const V=ue({...s,inputRadius:z||(A==="dropdown"?"rounded-button":"rounded-input"),endAdornment:!0}),{handleTriggerKeyDown:G,handleListboxKeyboardNavigation:H,handleListboxSearchFieldKeydown:J}=me(w),{findMatchingItem:K}=de(),Q=n=>{if(!r)return;const l=K(n,N,S);l!=null&&W("increment",l)},U=n=>{if(r)return;const l=K(n,N,S);l!=null&&$(l)};return e.jsx(fe,{listbox:w,onKeyDownCapture:d?void 0:Q,onKeyDown:H,onClose:d?()=>B(""):void 0,isLoading:j,searchField:d&&e.jsx(pe,{size:s.size==="xs"||s.size==="sm"?"xs":"sm",placeholder:D,startAdornment:e.jsx(xe,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":r?"true":"false","aria-haspopup":"listbox","aria-controls":r?F:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:q,onChange:Y,onKeyDown:n=>{J(n)}}),children:e.jsxs(he,{fieldClassNames:V,...T,endAdornment:!f&&e.jsx(ge,{isLoading:j,size:s.size}),children:[e.jsx("button",{..._,type:"button","aria-expanded":r?"true":"false","aria-haspopup":"listbox","aria-controls":r?F:void 0,ref:X,onKeyDown:G,onKeyDownCapture:d?void 0:U,disabled:v.disabled,onClick:()=>{E(!r)},className:L(V.input,!T.unstyled&&g),children:I}),e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute bottom-0 left-0 w-full opacity-0",children:e.jsx("label",{children:e.jsx("input",{tabIndex:-1,required:s.required,name:s.name,value:C[0],onChange:()=>{},onFocus:()=>{b.reference.current&&"focus"in b.reference.current&&b.reference.current.focus()}})})})]})})}function ye({children:s,...o}){const f=te(o),{field:{onChange:a,onBlur:p,value:c=null,ref:u},fieldState:{invalid:x,error:t}}=ae({name:o.name,rules:f}),i={onSelectionChange:a,onBlur:p,selectedValue:c,invalid:x,errorMessage:t==null?void 0:t.message,name:o.name},g=o.errorMessage||(t==null?void 0:t.message);return e.jsx(be,{ref:u,...oe(i,o,{errorMessage:g}),children:s})}export{ge as C,ye as F,be as S};
