import{j as e,aj as W,af as X,r as o,bG as Y,ab as Z,c as u,b_ as B,T as x,B as v,aJ as U,cu as D,J as ee}from"./main-BdzhGpqn.js";import{r as se}from"./file-upload-provider-Cq9bpz4o.js";import{u as le}from"./use-active-upload-DEBAs0lx.js";import{A as re}from"./AddAPhoto-DuYWQYIn.js";import{P as ae}from"./progress-bar-base-LbuncwuG.js";import{F as ie}from"./file-input-config-DrcTpI3-.js";function te(i){return e.jsx(ae,{...i})}function ne({className:i,label:r,description:t,descriptionPosition:l="top",value:c,onChange:s,defaultValue:a,uploadMetadata:d,showRemoveButton:m,showEditButtonOnHover:f=!1,invalid:b,errorMessage:R,required:S,autoFocus:q,variant:z="input",previewSize:T="h-80",placeholderIcon:J,stretchPreview:O=!1,previewRadius:V,disabled:g,uploadType:F,onFileSelected:h}){const{uploadFile:G,entry:N,uploadStatus:y,deleteEntry:L,isDeletingEntry:M,percentage:_}=le(),E=o.useRef(null);Y({autoFocus:q},E);const P=o.useId(),k=r?`${P}-label`:void 0,A=t?`${P}-description`:void 0,I=c||(N==null?void 0:N.url),C={uploadType:F,showToastOnRestrictionFail:!0,restrictions:se({uploadType:F}),metadata:{...d},onSuccess:n=>{s==null||s(n.url,n)},onError:n=>{n&&U.danger(n)}},j=Z({description:t,descriptionPosition:l,invalid:b});let p;z==="avatar"?p=de:z==="square"?p=ce:p=oe;const H=m?e.jsx(v,{variant:"link",color:"danger",size:"xs",disabled:M||!I||g,onClick:()=>{L({onSuccess:()=>s==null?void 0:s("")})},children:e.jsx(x,{message:"Remove image"})}):null,K=a!=null&&c!==a?e.jsx(v,{variant:"outline",color:"primary",size:"xs",disabled:g,onClick:()=>{s==null||s(a)},children:e.jsx(x,{message:"Use default"})}):null,Q=o.useCallback(()=>{var n;(n=E.current)==null||n.click()},[]),$=t?e.jsx("div",{className:j.description,children:t}):null;return e.jsxs("div",{className:u("text-sm",i),children:[r&&e.jsx("div",{id:k,className:j.label,children:r}),l==="top"&&$,e.jsx("div",{"aria-labelledby":k,"aria-describedby":A,children:e.jsxs(B,{fieldClassNames:j,errorMessage:R,invalid:b,children:[e.jsx(p,{inputFieldClassNames:j,placeholderIcon:J,previewSize:T,isLoading:y==="inProgress",imageUrl:I,removeButton:H,useDefaultButton:K,showEditButtonOnHover:f,stretchPreview:O,previewRadius:V,handleUpload:Q,disabled:g,children:e.jsx("input",{ref:E,"aria-labelledby":k,"aria-describedby":A,required:I?!1:S,accept:ie.image,type:"file",disabled:y==="inProgress",className:"sr-only",onChange:n=>{var w;(w=n.target.files)!=null&&w.length&&(G(n.target.files[0],C),h==null||h(n.target.files[0]))}})}),y==="inProgress"&&e.jsx(te,{className:"absolute left-0 right-0 top-0",size:"xs",value:_})]})}),l==="bottom"&&$]})}function oe({children:i,inputFieldClassNames:r,imageUrl:t,previewSize:l,stretchPreview:c,isLoading:s,handleUpload:a,removeButton:d,useDefaultButton:m,disabled:f}){return t?e.jsxs(o.Fragment,{children:[e.jsxs("div",{className:`${l} relative mb-10 overflow-hidden rounded border bg-fg-base/8 p-6`,children:[e.jsx("img",{className:u("mx-auto h-full rounded",c?"object-cover":"object-contain"),onClick:()=>a(),src:t,alt:""}),i]}),e.jsx(v,{onClick:()=>a(),disabled:s||f,className:"mr-10",variant:"outline",color:"primary",size:"xs",children:e.jsx(x,{message:"Replace"})}),d&&o.cloneElement(d,{variant:"outline"}),m&&o.cloneElement(m,{variant:"outline"})]}):o.cloneElement(i,{className:u(r.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})}function ce({children:i,placeholderIcon:r,previewSize:t,imageUrl:l,stretchPreview:c,handleUpload:s,removeButton:a,useDefaultButton:d,previewRadius:m="rounded",showEditButtonOnHover:f=!1,disabled:b}){return e.jsxs("div",{children:[e.jsxs("div",{className:u(t,m,!l&&"border","group z-20 flex flex-col items-center justify-center gap-14 bg-fg-base/8 bg-center bg-no-repeat",c?"bg-cover":"bg-contain p-6"),style:l?{backgroundImage:`url(${l})`}:void 0,onClick:()=>s(),children:[r&&!l&&o.cloneElement(r,{size:"lg"}),e.jsx(v,{variant:"raised",color:"white",size:"xs",className:u(f&&"invisible group-hover:visible"),disabled:b,children:l?e.jsx(x,{message:"Replace image"}):e.jsx(x,{message:"Upload image"})})]}),i,(a||d)&&e.jsxs("div",{className:"mt-8",children:[a&&o.cloneElement(a,{variant:"link"}),d&&o.cloneElement(d,{variant:"link"})]})]})}function de({children:i,placeholderIcon:r,previewSize:t,isLoading:l,imageUrl:c,removeButton:s,useDefaultButton:a,handleUpload:d,previewRadius:m="rounded-full",disabled:f}){return r||(r=e.jsx(D,{viewBox:"0 0 48 48",className:u("h-full w-full bg-primary-light/40 text-primary/40",m)})),e.jsxs("div",{children:[e.jsxs("div",{className:u("relative",t),onClick:()=>d(),children:[c?e.jsx("img",{src:c,className:u("h-full w-full object-cover",m),alt:""}):r,e.jsx("div",{className:"absolute -bottom-6 -right-6 rounded-full bg-elevated shadow-xl",children:e.jsx(ee,{disabled:l||f,type:"button",variant:"outline",size:"sm",iconSize:"xs",color:"primary",radius:"rounded-full",children:e.jsx(re,{})})})]}),i,(s||a)&&e.jsxs("div",{className:"mt-14",children:[s&&o.cloneElement(s,{variant:"link"}),a&&o.cloneElement(a,{variant:"link"})]})]})}function pe(i){const{field:{onChange:r,value:t=null},fieldState:{error:l}}=W({name:i.name}),c={onChange:r,value:t,invalid:l!=null,errorMessage:l?e.jsx(x,{message:"Please select an image."}):null};return e.jsx(ne,{...X(c,i)})}export{pe as F,ne as I};
