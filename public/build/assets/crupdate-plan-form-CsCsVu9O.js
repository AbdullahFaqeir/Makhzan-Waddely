import{x as m,Y as A,w as B,a8 as p,r as h,j as e,T as s,a3 as j,a5 as c,B as y,a6 as P,J as D,ak as I}from"./main-TIUJvpaR.js";import{F as E}from"./permission-selector-CHlyRAPq.js";import{F as T}from"./formatted-price-BnJL0Dzb.js";import{A as M,a as V}from"./accordion-CabB8onw.js";import{F as f,S as z}from"./select-T49HzTXy.js";import{F as g}from"./switch-Bj7wwiPq.js";import{A as C}from"./Add-CRE_6SK0.js";const b=[{key:"day1",label:m("Daily"),interval:"day",interval_count:1},{key:"week1",label:m("Weekly"),interval:"week",interval_count:1},{key:"month1",label:m("Monthly"),interval:"month",interval_count:1},{key:"month3",label:m("Every 3 months"),interval:"month",interval_count:3},{key:"month6",label:m("Every 6 months"),interval:"month",interval_count:6},{key:"year1",label:m("Yearly"),interval:"year",interval_count:1},{key:"custom",label:m("Custom"),interval:null,interval_count:null}],w=["USD","EUR","JPY","GBP","AUD","CAD","CHF","CNY","HKD","NZD"],Y=A((r="en")=>{const i=Intl.supportedValuesOf("currency").map(n=>({code:n,name:new Intl.DisplayNames([r],{type:"currency"}).of(n)})),l=i.filter(n=>w.includes(n.code)),a=i.filter(n=>!w.includes(n.code));return[...l,...a]});function q({index:r,onRemovePrice:t}){const{trans:i}=B(),l=Y(),{watch:a,getValues:n}=p(),o=!a("id"),d=a(`prices.${r}.id`)==null,F=a(`prices.${r}.subscriptions_count`)||0,[k,$]=h.useState(()=>{const x=n(`prices.${r}.interval`),S=n(`prices.${r}.interval_count`),N=b.find(_=>_.key===`${x}${S}`);return N?N.key:"custom"}),u=o||d||!F;return e.jsxs(h.Fragment,{children:[!u&&e.jsx("p",{className:"mb-20 max-w-500 text-sm text-muted",children:e.jsx(s,{message:"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.",values:{count:F}})}),e.jsx(j,{required:!0,disabled:!u,label:e.jsx(s,{message:"Amount"}),type:"number",min:.1,step:.01,name:`prices.${r}.amount`,className:"mb-20"}),e.jsx(f,{required:!0,disabled:!u,label:e.jsx(s,{message:"Currency"}),name:`prices.${r}.currency`,items:l,showSearchField:!0,searchPlaceholder:i(m("Search currencies")),selectionMode:"single",className:"mb-20",children:x=>e.jsx(c,{value:x.code,children:`${x.code}: ${x.name}`},x.code)}),e.jsx(H,{disabled:!u,index:r,value:k,onValueChange:$}),k==="custom"&&e.jsx(R,{disabled:!u,index:r}),e.jsx("div",{className:"text-right",children:e.jsx(y,{size:"xs",variant:"outline",color:"danger",disabled:!u,onClick:()=>{t()},children:e.jsx(s,{message:"Delete price"})})})]})}function H({index:r,value:t,onValueChange:i,disabled:l}){const{setValue:a}=p();return e.jsx(z,{label:e.jsx(s,{message:"Billing period"}),disabled:l,className:"mb-20",selectionMode:"single",selectedValue:t,onSelectionChange:n=>{if(i(n),n!=="custom"){const o=b.find(d=>d.key===n);o&&(a(`prices.${r}.interval`,o.interval),a(`prices.${r}.interval_count`,o.interval_count))}},children:b.map(n=>e.jsx(c,{value:n.key,children:e.jsx(s,{...n.label})},n.key))})}function R({index:r,disabled:t}){const{watch:i}=p(),l=i(`prices.${r}.interval`);let a;return l==="day"?a=365:l==="week"?a=52:a=12,e.jsxs("div",{className:"flex w-min rounded border",children:[e.jsx("div",{className:"flex items-center px-18 text-sm",children:e.jsx(s,{message:"Every"})}),e.jsx(j,{inputShadow:"shadow-none",inputBorder:"border-none",className:"w-80 border-l border-r",name:`prices.${r}.interval_count`,type:"number",min:1,max:a,disabled:t,required:!0}),e.jsxs(f,{inputShadow:"shadow-none",inputBorder:"border-none",name:`prices.${r}.interval`,selectionMode:"single",disabled:t,children:[e.jsx(c,{value:"day",children:e.jsx(s,{message:"Days"})}),e.jsx(c,{value:"week",children:e.jsx(s,{message:"Weeks"})}),e.jsx(c,{value:"month",children:e.jsx(s,{message:"Months"})})]})]})}function X(){return e.jsxs(h.Fragment,{children:[e.jsx(j,{name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(j,{name:"description",label:e.jsx(s,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4}),e.jsxs(f,{name:"position",selectionMode:"single",label:e.jsx(s,{message:"Position in pricing table"}),className:"mb-20",children:[e.jsx(c,{value:0,children:e.jsx(s,{message:"First"})}),e.jsx(c,{value:1,children:e.jsx(s,{message:"Second"})}),e.jsx(c,{value:2,children:e.jsx(s,{message:"Third"})}),e.jsx(c,{value:3,children:e.jsx(s,{message:"Fourth"})}),e.jsx(c,{value:4,children:e.jsx(s,{message:"Fifth"})})]}),e.jsx(g,{name:"recommended",className:"mb-20",description:e.jsx(s,{message:"Plan will be displayed more prominently on pricing page."}),children:e.jsx(s,{message:"Recommend"})}),e.jsx(g,{name:"hidden",className:"mb-20",description:e.jsx(s,{message:"Plan will not be shown on pricing or upgrade pages."}),children:e.jsx(s,{message:"Hidden"})}),e.jsx(g,{name:"free",className:"mb-20",description:e.jsx(s,{message:"Will be assigned to all users, if they are not subscribed already."}),children:e.jsx(s,{message:"Free"})}),e.jsx(v,{children:e.jsx(s,{message:"Feature list"})}),e.jsx(U,{}),e.jsx(L,{}),e.jsx(v,{children:e.jsx(s,{message:"Permissions"})}),e.jsx(E,{name:"permissions"})]})}function v({children:r}){return e.jsx("h2",{className:"mb-20 mt-40 text-base font-semibold",children:r})}function U(){const{fields:r,append:t,remove:i}=P({name:"feature_list"});return e.jsxs("div",{children:[r.map((l,a)=>e.jsxs("div",{className:"mb-10 flex gap-10",children:[e.jsx(j,{name:`feature_list.${a}.value`,size:"sm",className:"flex-auto"}),e.jsx(D,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{i(a)},children:e.jsx(I,{})})]},l.id)),e.jsx(y,{variant:"text",color:"primary",startIcon:e.jsx(C,{}),size:"xs",onClick:()=>{t({value:""})},children:e.jsx(s,{message:"Add another line"})})]})}function L(){var n;const{watch:r,formState:{errors:t}}=p(),{fields:i,append:l,remove:a}=P({name:"prices",keyName:"key"});return r("free")?null:e.jsxs(h.Fragment,{children:[e.jsx(v,{children:e.jsx(s,{message:"Pricing"})}),((n=t.prices)==null?void 0:n.message)&&e.jsx("div",{className:"mb-20 text-sm text-danger",children:t.prices.message}),e.jsx(M,{variant:"outline",className:"mb-10",children:i.map((o,d)=>e.jsx(V,{label:e.jsx(T,{price:o}),children:e.jsx(q,{index:d,onRemovePrice:()=>{a(d)}})},o.key))}),e.jsx(y,{variant:"text",color:"primary",startIcon:e.jsx(C,{}),size:"xs",onClick:()=>{l({currency:"USD",amount:1,interval_count:1,interval:"month"})},children:e.jsx(s,{message:"Add another price"})})]})}export{X as C};
