{"version":3,"file":"pricing-table-C9F3tT19.js","sources":["../../../common/foundation/resources/client/billing/pricing-table/pricing-table.tsx"],"sourcesContent":["import {useAuth} from '@common/auth/use-auth';\nimport {FormattedPrice} from '@common/billing/formatted-price';\nimport {\n  findBestPrice,\n  UpsellBillingCycle,\n} from '@common/billing/pricing-table/find-best-price';\nimport {ProductFeatureList} from '@common/billing/pricing-table/product-feature-list';\nimport {Product} from '@common/billing/product';\nimport {opacityAnimation} from '@ui/animation/opacity-animation';\nimport {Button} from '@ui/buttons/button';\nimport {Chip} from '@ui/forms/input-field/chip-field/chip';\nimport {Trans} from '@ui/i18n/trans';\nimport {Skeleton} from '@ui/skeleton/skeleton';\nimport {setInLocalStorage} from '@ui/utils/hooks/local-storage';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {Fragment} from 'react';\nimport {Link} from 'react-router';\n\ninterface PricingTableProps {\n  selectedCycle: UpsellBillingCycle;\n  className?: string;\n  products?: Product[];\n}\nexport function PricingTable({\n  selectedCycle,\n  className,\n  products,\n}: PricingTableProps) {\n  return (\n    <div\n      className={clsx(\n        'flex flex-col items-stretch gap-24 overflow-x-auto overflow-y-visible pb-20 md:flex-row md:justify-center',\n        className,\n      )}\n    >\n      <AnimatePresence initial={false} mode=\"wait\">\n        {products ? (\n          <PlanList\n            key=\"plan-list\"\n            plans={products}\n            selectedPeriod={selectedCycle}\n          />\n        ) : (\n          <SkeletonLoader key=\"skeleton-loader\" />\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\ninterface PlanListProps {\n  plans: Product[];\n  selectedPeriod: UpsellBillingCycle;\n}\nfunction PlanList({plans, selectedPeriod}: PlanListProps) {\n  const {isLoggedIn, isSubscribed} = useAuth();\n  const filteredPlans = plans.filter(plan => !plan.hidden);\n  return (\n    <Fragment>\n      {filteredPlans.map((plan, index) => {\n        const isFirst = index === 0;\n        const isLast = index === filteredPlans.length - 1;\n        const price = findBestPrice(selectedPeriod, plan.prices);\n\n        let upgradeRoute;\n        if (!isLoggedIn) {\n          upgradeRoute = `/register?redirectFrom=pricing`;\n        }\n        if (isSubscribed) {\n          upgradeRoute = `/change-plan/${plan.id}/${price?.id}/confirm`;\n        }\n        if (isLoggedIn && !plan.free) {\n          upgradeRoute = `/checkout/${plan.id}/${price?.id}`;\n        }\n\n        return (\n          <m.div\n            key={plan.id}\n            {...opacityAnimation}\n            className={clsx(\n              'w-full rounded-panel border bg p-32 shadow-lg',\n              isFirst && 'ml-auto',\n              isLast && 'mr-auto',\n            )}\n          >\n            <div className=\"mb-32\">\n              <Chip\n                radius=\"rounded\"\n                size=\"sm\"\n                className={clsx(\n                  'mb-20 w-min',\n                  !plan.recommended && 'invisible',\n                )}\n              >\n                <Trans message=\"Most popular\" />\n              </Chip>\n              <div className=\"mb-12 text-xl font-semibold\">\n                <Trans message={plan.name} />\n              </div>\n              <div className=\"text-sm text-muted\">\n                <Trans message={plan.description} />\n              </div>\n            </div>\n            <div>\n              {price ? (\n                <FormattedPrice\n                  priceClassName=\"font-bold text-4xl\"\n                  periodClassName=\"text-muted text-xs\"\n                  variant=\"separateLine\"\n                  price={price}\n                />\n              ) : (\n                <div className=\"text-4xl font-bold\">\n                  <Trans message=\"Free\" />\n                </div>\n              )}\n              <div className=\"mt-60\">\n                <Button\n                  variant={plan.recommended ? 'flat' : 'outline'}\n                  color=\"primary\"\n                  className=\"w-full\"\n                  size=\"md\"\n                  elementType={upgradeRoute ? Link : undefined}\n                  disabled={!upgradeRoute}\n                  onClick={() => {\n                    if (isLoggedIn || !price || !plan) return;\n                    setInLocalStorage('be.onboarding.selected', {\n                      productId: plan.id,\n                      priceId: price.id,\n                    });\n                  }}\n                  to={upgradeRoute}\n                >\n                  {plan.free || !isLoggedIn ? (\n                    <Trans message=\"Get started\" />\n                  ) : (\n                    <Trans message=\"Upgrade\" />\n                  )}\n                </Button>\n              </div>\n              <ProductFeatureList product={plan} />\n            </div>\n          </m.div>\n        );\n      })}\n    </Fragment>\n  );\n}\n\nfunction SkeletonLoader() {\n  return (\n    <Fragment>\n      <PlanSkeleton key=\"skeleton-1\" />\n      <PlanSkeleton key=\"skeleton-2\" />\n      <PlanSkeleton key=\"skeleton-3\" />\n    </Fragment>\n  );\n}\n\nfunction PlanSkeleton() {\n  return (\n    <m.div\n      {...opacityAnimation}\n      className=\"w-full rounded-lg border px-28 py-90 shadow-lg md:max-w-350\"\n    >\n      <Skeleton className=\"my-10\" />\n      <Skeleton className=\"mb-40\" />\n      <Skeleton className=\"mb-40 h-30\" />\n      <Skeleton className=\"mb-40 h-40\" />\n      <Skeleton className=\"mb-20\" />\n      <Skeleton />\n      <Skeleton />\n    </m.div>\n  );\n}\n"],"names":["PricingTable","selectedCycle","className","products","jsx","clsx","AnimatePresence","PlanList","SkeletonLoader","plans","selectedPeriod","isLoggedIn","isSubscribed","useAuth","filteredPlans","plan","Fragment","index","isFirst","isLast","price","findBestPrice","upgradeRoute","jsxs","m","opacityAnimation","Chip","Trans","FormattedPrice","Button","Link","setInLocalStorage","ProductFeatureList","PlanSkeleton","Skeleton"],"mappings":"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"}