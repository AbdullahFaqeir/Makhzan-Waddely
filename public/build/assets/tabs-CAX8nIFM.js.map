{"version":3,"file":"tabs-CAX8nIFM.js","sources":["../../../common/foundation/resources/client/ui/library/tabs/tabs-context.tsx","../../../common/foundation/resources/client/ui/library/tabs/tab.tsx","../../../common/foundation/resources/client/ui/library/tabs/tab-line.tsx","../../../common/foundation/resources/client/ui/library/tabs/tab-list.tsx","../../../common/foundation/resources/client/ui/library/tabs/tabs.tsx"],"sourcesContent":["import {createContext, RefObject} from 'react';\n\nexport interface TabsContext {\n  selectedTab: number;\n  setSelectedTab: (newTab: number) => void;\n  tabsRef: RefObject<HTMLElement[]>;\n  size: 'sm' | 'md';\n  isLazy?: boolean;\n  id: string;\n}\n\nexport const TabContext = createContext<TabsContext>(null!);\n","import {useFocusManager} from '@react-aria/focus';\nimport {TabContext} from '@ui/tabs/tabs-context';\nimport clsx from 'clsx';\nimport React, {JSXElementConstructor, ReactNode, useContext} from 'react';\nimport {Link, LinkProps} from 'react-router';\n\nexport interface TabProps {\n  className?: string;\n  index?: number;\n  children: ReactNode;\n  isDisabled?: boolean;\n  padding?: string;\n  elementType?: 'button' | 'a' | JSXElementConstructor<any>;\n  to?: LinkProps['to'];\n  relative?: LinkProps['relative'];\n  replace?: LinkProps['replace'];\n  width?: string;\n  height?: string;\n}\nexport function Tab({\n  index,\n  className,\n  isDisabled,\n  children,\n  padding: paddingProp,\n  elementType,\n  to,\n  relative,\n  width = 'min-w-min',\n  height,\n}: TabProps) {\n  const {\n    selectedTab,\n    setSelectedTab,\n    tabsRef,\n    size = 'md',\n    id,\n  } = useContext(TabContext);\n  const isSelected = index === selectedTab;\n  const focusManager = useFocusManager();\n  const padding = paddingProp || (size === 'sm' ? 'px-12' : 'px-18');\n\n  const mergedClassname = clsx(\n    'tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors',\n    'focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer',\n    width,\n    textColor({isDisabled, isSelected}),\n    className,\n    size === 'md' && `${padding} ${height || 'h-48'}`,\n    size === 'sm' && `${padding} ${height || 'h-32'}`,\n    isDisabled && 'pointer-events-none',\n  );\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        focusManager?.focusNext();\n        break;\n      case 'Home':\n        focusManager?.focusFirst();\n        break;\n      case 'End':\n        focusManager?.focusLast();\n        break;\n    }\n  };\n\n  const tabIndex = isSelected ? 0 : -1;\n  const Element = to ? Link : (elementType ?? 'button');\n\n  return (\n    <Element\n      disabled={isDisabled}\n      id={`${id}-${index}-tab`}\n      aria-controls={`${id}-${index}-tabpanel`}\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={isSelected}\n      tabIndex={isDisabled ? undefined : tabIndex}\n      onKeyDown={onKeyDown}\n      onClick={() => {\n        setSelectedTab(index!);\n      }}\n      to={to}\n      relative={relative}\n      className={mergedClassname}\n      ref={(el: HTMLElement) => {\n        if (tabsRef.current && el) {\n          tabsRef.current[index!] = el;\n        }\n      }}\n    >\n      {children}\n    </Element>\n  );\n}\n\ninterface TextColorProps {\n  isDisabled?: boolean;\n  isSelected: boolean;\n}\nfunction textColor({isDisabled, isSelected}: TextColorProps): string {\n  if (isDisabled) {\n    return 'text-disabled cursor-default';\n  }\n  if (isSelected) {\n    return 'text-primary';\n  }\n  return 'text-muted hover:text-main';\n}\n","import {useLayoutEffect} from '@react-aria/utils';\nimport {TabContext} from '@ui/tabs/tabs-context';\nimport clsx from 'clsx';\nimport {useContext, useRef, useState} from 'react';\n\ninterface TabLineStyle {\n  width?: string;\n  transform?: string;\n  className?: string;\n}\n\nexport function TabLine() {\n  const {tabsRef, selectedTab} = useContext(TabContext);\n  const positionRef = useRef(-1);\n  const [style, setStyle] = useState<TabLineStyle>({\n    width: undefined,\n    transform: undefined,\n    className: undefined,\n  });\n\n  useLayoutEffect(() => {\n    if (\n      selectedTab != null &&\n      tabsRef.current &&\n      selectedTab !== positionRef.current\n    ) {\n      const el = tabsRef.current[selectedTab];\n      if (!el) return;\n\n      setStyle(prevState => {\n        return {\n          width: `${el.offsetWidth}px`,\n          transform: `translateX(${el.offsetLeft}px)`,\n          // disable initial transition for tabline\n          className: prevState.width === undefined ? '' : 'transition-all',\n        };\n      });\n      positionRef.current = selectedTab;\n    }\n  }, [setStyle, selectedTab, tabsRef]);\n\n  return (\n    <div\n      className={clsx(\n        'absolute bottom-0 left-0 h-2 bg-primary',\n        style.className,\n      )}\n      role=\"presentation\"\n      style={{width: style.width, transform: style.transform}}\n    />\n  );\n}\n","import React, {Children, cloneElement, isValidElement, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {FocusScope} from '@react-aria/focus';\nimport {TabProps} from '@ui/tabs/tab';\nimport {TabLine} from '@ui/tabs/tab-line';\n\nexport interface TabListProps {\n  children: ReactNode;\n  // center tabs within tablist\n  center?: boolean;\n  // expand tabs to fill in tablist space fully. By default, tabs are only as wide as their content.\n  expand?: boolean;\n  className?: string;\n  border?: string;\n}\nexport function TabList({\n  children,\n  center,\n  expand,\n  className,\n  border = 'border-b',\n}: TabListProps) {\n  const childrenArray = Children.toArray(children);\n\n  return (\n    <FocusScope>\n      <div\n        className={clsx(\n          // hide scrollbar completely on mobile, show compact one on desktop\n          'max-sm:hidden-scrollbar md:compact-scrollbar relative flex max-w-full overflow-auto',\n          border,\n          className,\n        )}\n        role=\"tablist\"\n        aria-orientation=\"horizontal\"\n      >\n        {childrenArray.map((child, index) => {\n          if (isValidElement<TabProps>(child)) {\n            return cloneElement<TabProps>(child, {\n              index,\n              className: clsx(\n                child.props.className,\n                expand && 'flex-auto',\n                center && index === 0 && 'ml-auto',\n                center && index === childrenArray.length - 1 && 'mr-auto',\n              ),\n            });\n          }\n          return null;\n        })}\n        <TabLine />\n      </div>\n    </FocusScope>\n  );\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {TabListProps} from '@ui/tabs/tab-list';\nimport {TabPanelsProps} from '@ui/tabs/tab-panels';\nimport {TabContext, TabsContext} from '@ui/tabs/tabs-context';\nimport clsx from 'clsx';\nimport {ReactElement, useId, useMemo, useRef} from 'react';\n\nexport interface TabsProps {\n  children:\n    | [ReactElement<TabListProps>, ReactElement<TabPanelsProps>]\n    | ReactElement<TabListProps>;\n  size?: 'sm' | 'md';\n  className?: string;\n  selectedTab?: number;\n  defaultSelectedTab?: number;\n  onTabChange?: (newTab: number) => void;\n  isLazy?: boolean;\n  overflow?: string;\n}\n\nexport function Tabs(props: TabsProps) {\n  const {\n    size = 'md',\n    children,\n    className,\n    isLazy,\n    overflow = 'overflow-hidden',\n  } = props;\n\n  const tabsRef = useRef<HTMLButtonElement[]>([]);\n  const id = useId();\n\n  const [selectedTab, setSelectedTab] = useControlledState(\n    props.selectedTab,\n    props.defaultSelectedTab || 0,\n    props.onTabChange,\n  );\n\n  const ContextValue: TabsContext = useMemo(() => {\n    return {\n      selectedTab,\n      setSelectedTab,\n      tabsRef,\n      size,\n      isLazy,\n      id,\n    };\n  }, [selectedTab, id, isLazy, setSelectedTab, size]);\n\n  return (\n    <TabContext.Provider value={ContextValue}>\n      <div className={clsx(className, overflow, 'max-w-full flex-shrink-0')}>\n        {children}\n      </div>\n    </TabContext.Provider>\n  );\n}\n"],"names":["TabContext","createContext","Tab","index","className","isDisabled","children","paddingProp","elementType","to","relative","width","height","selectedTab","setSelectedTab","tabsRef","size","id","useContext","isSelected","focusManager","useFocusManager","padding","mergedClassname","clsx","textColor","onKeyDown","e","tabIndex","Element","Link","jsx","el","TabLine","positionRef","useRef","style","setStyle","useState","useLayoutEffect","prevState","TabList","center","expand","border","childrenArray","Children","FocusScope","jsxs","child","isValidElement","cloneElement","Tabs","props","isLazy","overflow","useId","useControlledState","ContextValue","useMemo"],"mappings":"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"}